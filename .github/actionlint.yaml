# 🔍 Actionlint Configuration for Reynard
# Comprehensive workflow validation settings

# Enable all checks
enable:
  - action
  - runner
  - job
  - step
  - expression

# Shellcheck configuration
shellcheck:
  # Enable shellcheck for shell scripts
  enabled: true
  # Ignore specific shellcheck warnings
  ignore:
    - SC1090  # Can't follow non-constant source
    - SC1091  # Not following sourced file
    - SC2034  # Variable appears unused
    - SC2086  # Double quote to prevent globbing
    - SC2129  # Consider using { cmd1; cmd2; } >> file
    - SC2001  # See if you can use ${variable//search/replace}
    - SC2103  # Use a ( subshell ) to avoid having to cd back
    - SC2155  # Declare and assign separately
    - SC2046  # Quote this to prevent word splitting
    - SC2064  # Use single quotes
    - SC2162  # read without -r will mangle backslashes
    - SC2164  # Use cd ... || exit
    - SC2181  # Check exit code directly
    - SC2250  # Prefer putting braces around variable references
    - SC2292  # Prefer [[ ]] over [ ]
    - SC2312  # Consider invoking this command separately

# Expression validation
expression:
  # Enable expression validation
  enabled: true
  # Allow specific contexts
  allow_contexts:
    - github
    - runner
    - secrets
    - vars
    - inputs
    - needs
    - strategy
    - matrix

# Job validation
job:
  # Enable job validation
  enabled: true
  # Check for required fields
  required_fields:
    - runs-on
    - steps

# Step validation
step:
  # Enable step validation
  enabled: true
  # Check for required fields
  required_fields:
    - name
    - uses  # or run

# Action validation
action:
  # Enable action validation
  enabled: true
  # Check for valid action versions
  check_versions: true
  # Allow specific action patterns
  allow_patterns:
    - "actions/*@*"
    - "pnpm/*@*"
    - "rhysd/*@*"
    - "matheusjardimb/*@*"
    - "alexkiro/*@*"
    - "redhat-plumbers-in-action/*@*"

# Runner validation
runner:
  # Enable runner validation
  enabled: true
  # Allowed runners
  allowed_runners:
    - ubuntu-latest
    - ubuntu-22.04
    - ubuntu-20.04
    - windows-latest
    - windows-2022
    - macos-latest
    - macos-12
    - macos-13

# File patterns to check
files:
  - ".github/workflows/*.yml"
  - ".github/workflows/*.yaml"

# Exclude patterns
exclude:
  - ".github/workflows/*.example.yml"
  - ".github/workflows/*.template.yml"

# Output format
format: "github"

# Verbose output
verbose: false

# Color output
color: true