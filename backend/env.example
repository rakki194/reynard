# Reynard Backend Environment Configuration Example
# Copy this file to .env and update with your actual values

# Security
SECRET_KEY=your_secret_key_here

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS settings
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Development settings
DEBUG=True
LOG_LEVEL=info

# RAG Configuration
RAG_ENABLED=true
PG_DSN=postgresql://reynard_rag:YOUR_SECURE_PASSWORD_HERE@localhost:5432/reynard_rag
OLLAMA_BASE_URL=http://localhost:11434

# RAG Models
RAG_TEXT_MODEL=embeddinggemma:latest
RAG_CODE_MODEL=bge-m3
RAG_CAPTION_MODEL=nomic-embed-text
RAG_CLIP_MODEL=ViT-L-14/openai

# RAG Performance
RAG_CHUNK_MAX_TOKENS=512
RAG_CHUNK_MIN_TOKENS=100
RAG_CHUNK_OVERLAP_RATIO=0.15
RAG_INGEST_BATCH_SIZE_TEXT=16
RAG_INGEST_CONCURRENCY=2

# Rate Limiting
RAG_QUERY_RATE_LIMIT_PER_MINUTE=60
RAG_INGEST_RATE_LIMIT_PER_MINUTE=10

# Continuous Indexing Configuration
RAG_CONTINUOUS_INDEXING_ENABLED=true
RAG_CONTINUOUS_INDEXING_WATCH_ROOT=/home/kade/runeset/reynard
RAG_CONTINUOUS_INDEXING_DEBOUNCE_SECONDS=2.0
RAG_CONTINUOUS_INDEXING_BATCH_SIZE=25
RAG_CONTINUOUS_INDEXING_MAX_QUEUE_SIZE=1000
RAG_CONTINUOUS_INDEXING_STATS_INTERVAL_MINUTES=5
RAG_CONTINUOUS_INDEXING_AUTO_START=true
RAG_CONTINUOUS_INDEXING_INCLUDE_PATTERNS=*.py,*.ts,*.tsx,*.js,*.jsx,*.vue,*.svelte,*.md,*.txt,*.json,*.yaml,*.yml,*.toml,*.css,*.scss,*.sass,*.less,*.html,*.xml
RAG_CONTINUOUS_INDEXING_EXCLUDE_DIRS=node_modules,__pycache__,.git,.vscode,.idea,dist,build,target,coverage,.nyc_output,venv,env,.env,logs,tmp,temp,.pytest_cache,.mypy_cache,.tox,htmlcov,reynard_backend.egg-info,alembic/versions,.cursor,third_party
RAG_CONTINUOUS_INDEXING_EXCLUDE_FILES=*.pyc,*.pyo,*.pyd,*.so,*.dll,*.exe,*.log,*.tmp,*.temp,*.cache,*.lock,package-lock.json,yarn.lock,pnpm-lock.yaml,*.min.js,*.min.css,*.bundle.js,*.tsbuildinfo

# Embedding Backend Configuration
# Global backend control
EMBEDDING_BACKENDS_ENABLED=true
EMBEDDING_MOCK_MODE=false
EMBEDDING_ALLOW_FALLBACK=true
EMBEDDING_DEFAULT_BACKEND=ollama

# Ollama Backend Configuration
EMBEDDING_OLLAMA_ENABLED=true
EMBEDDING_OLLAMA_TIMEOUT=30
EMBEDDING_OLLAMA_MAX_RETRIES=3
EMBEDDING_OLLAMA_RETRY_DELAY=1.0
EMBEDDING_OLLAMA_MAX_CONCURRENT=8
EMBEDDING_OLLAMA_BATCH_SIZE=16
EMBEDDING_OLLAMA_DEFAULT_MODEL=embeddinggemma:latest

# Sentence Transformers Backend Configuration
EMBEDDING_SENTENCE_TRANSFORMERS_ENABLED=true
EMBEDDING_SENTENCE_TRANSFORMERS_TIMEOUT=30
EMBEDDING_SENTENCE_TRANSFORMERS_MAX_RETRIES=3
EMBEDDING_SENTENCE_TRANSFORMERS_RETRY_DELAY=1.0
EMBEDDING_SENTENCE_TRANSFORMERS_MAX_CONCURRENT=4
EMBEDDING_SENTENCE_TRANSFORMERS_BATCH_SIZE=8
EMBEDDING_SENTENCE_TRANSFORMERS_DEFAULT_MODEL=sentence-transformers/all-MiniLM-L6-v2

# OpenAI Backend Configuration (Future)
EMBEDDING_OPENAI_ENABLED=false
OPENAI_API_KEY=your-openai-api-key-here
EMBEDDING_OPENAI_TIMEOUT=30
EMBEDDING_OPENAI_MAX_RETRIES=3
EMBEDDING_OPENAI_RETRY_DELAY=1.0
EMBEDDING_OPENAI_MAX_CONCURRENT=5
EMBEDDING_OPENAI_BATCH_SIZE=10
EMBEDDING_OPENAI_DEFAULT_MODEL=text-embedding-3-small

# Hugging Face Backend Configuration (Future)
EMBEDDING_HUGGINGFACE_ENABLED=false
HUGGINGFACE_API_KEY=your-huggingface-api-key-here
EMBEDDING_HUGGINGFACE_TIMEOUT=30
EMBEDDING_HUGGINGFACE_MAX_RETRIES=3
EMBEDDING_HUGGINGFACE_RETRY_DELAY=1.0
EMBEDDING_HUGGINGFACE_MAX_CONCURRENT=4
EMBEDDING_HUGGINGFACE_BATCH_SIZE=8
EMBEDDING_HUGGINGFACE_DEFAULT_MODEL=sentence-transformers/all-MiniLM-L6-v2

# Gatekeeper Configuration
GATEKEEPER_ACCESS_TOKEN_EXPIRE_MINUTES=30
GATEKEEPER_REFRESH_TOKEN_EXPIRE_DAYS=7
GATEKEEPER_ISSUER=reynard-backend
GATEKEEPER_AUDIENCE=reynard-users
GATEKEEPER_PASSWORD_SECURITY_LEVEL=MEDIUM
DATABASE_URL=postgresql://postgres:password@localhost:5432/reynard
GATEKEEPER_USE_MEMORY_BACKEND=false
GATEKEEPER_BACKEND_POOL_SIZE=5
GATEKEEPER_BACKEND_MAX_OVERFLOW=10
