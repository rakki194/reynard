<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bubble Chart - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Bubble Chart</h1>
      <div class="markdown-content"><h1>Bubble Chart</h1>
<pre><code class="hljs"><span class="hljs-comment">// &lt;block:setup:2&gt;</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DATA_COUNT</span> = <span class="hljs-number">16</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MIN_XY</span> = -<span class="hljs-number">150</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_XY</span> = <span class="hljs-number">100</span>;
Utils.<span class="hljs-title function_ invoke__">srand</span>(<span class="hljs-number">110</span>);

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">actions</span> = [
  {
    name: <span class="hljs-string">&#x27;Randomize&#x27;</span>,
    <span class="hljs-title function_ invoke__">handler</span>(chart) {
      chart.data.datasets.<span class="hljs-title function_ invoke__">forEach</span>(dataset =&gt; {
        dataset.data = <span class="hljs-title function_ invoke__">generateData</span>();
      });
      chart.<span class="hljs-title function_ invoke__">update</span>();
    }
  },
];
<span class="hljs-comment">// &lt;/block:setup&gt;</span>

<span class="hljs-comment">// &lt;block:data:1&gt;</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateData</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">data</span> = [];
  let i;

  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; DATA_COUNT; ++i) {
    data.<span class="hljs-title function_ invoke__">push</span>({
      <span class="hljs-attr">x</span>: Utils.<span class="hljs-title function_ invoke__">rand</span>(MIN_XY, MAX_XY),
      <span class="hljs-attr">y</span>: Utils.<span class="hljs-title function_ invoke__">rand</span>(MIN_XY, MAX_XY),
      <span class="hljs-attr">v</span>: Utils.<span class="hljs-title function_ invoke__">rand</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>)
    });
  }

  <span class="hljs-keyword">return</span> data;
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">data</span> = {
  datasets: [{
    data: <span class="hljs-title function_ invoke__">generateData</span>()
  }, {
    data: <span class="hljs-title function_ invoke__">generateData</span>()
  }]
};
<span class="hljs-comment">// &lt;/block:data&gt;</span>

<span class="hljs-comment">// &lt;block:options:0&gt;</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">channelValue</span>(<span class="hljs-params">x, y, values</span>) </span>{
  <span class="hljs-keyword">return</span> x &lt; <span class="hljs-number">0</span> &amp;&amp; y &lt; <span class="hljs-number">0</span> ? values[<span class="hljs-number">0</span>] : x &lt; <span class="hljs-number">0</span> ? values[<span class="hljs-number">1</span>] : y &lt; <span class="hljs-number">0</span> ? values[<span class="hljs-number">2</span>] : values[<span class="hljs-number">3</span>];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">colorize</span>(<span class="hljs-params">opaque, context</span>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">value</span> = context.raw;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">x</span> = value.x / <span class="hljs-number">100</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">y</span> = value.y / <span class="hljs-number">100</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">r</span> = <span class="hljs-title function_ invoke__">channelValue</span>(x, y, [<span class="hljs-number">250</span>, <span class="hljs-number">150</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>]);
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">g</span> = <span class="hljs-title function_ invoke__">channelValue</span>(x, y, [<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">150</span>, <span class="hljs-number">250</span>]);
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">b</span> = <span class="hljs-title function_ invoke__">channelValue</span>(x, y, [<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, <span class="hljs-number">150</span>, <span class="hljs-number">250</span>]);
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">a</span> = opaque ? <span class="hljs-number">1</span> : <span class="hljs-number">0.5</span> * value.v / <span class="hljs-number">1000</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgba(&#x27;</span> + r + <span class="hljs-string">&#x27;,&#x27;</span> + g + <span class="hljs-string">&#x27;,&#x27;</span> + b + <span class="hljs-string">&#x27;,&#x27;</span> + a + <span class="hljs-string">&#x27;)&#x27;</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">config</span> = {
  type: <span class="hljs-string">&#x27;bubble&#x27;</span>,
  data: data,
  options: {
    aspectRatio: <span class="hljs-number">1</span>,
    plugins: {
      legend: <span class="hljs-literal">false</span>,
      tooltip: <span class="hljs-literal">false</span>,
    },
    elements: {
      point: {
        backgroundColor: colorize.<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">false</span>),

        borderColor: colorize.<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>),

        borderWidth: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>{
          <span class="hljs-keyword">return</span> Math.<span class="hljs-title function_ invoke__">min</span>(Math.<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">1</span>, context.datasetIndex + <span class="hljs-number">1</span>), <span class="hljs-number">8</span>);
        },

        hoverBackgroundColor: <span class="hljs-string">&#x27;transparent&#x27;</span>,

        hoverBorderColor: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>{
          <span class="hljs-keyword">return</span> Utils.<span class="hljs-title function_ invoke__">color</span>(context.datasetIndex);
        },

        hoverBorderWidth: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>{
          <span class="hljs-keyword">return</span> Math.<span class="hljs-title function_ invoke__">round</span>(<span class="hljs-number">8</span> * context.raw.v / <span class="hljs-number">1000</span>);
        },

        radius: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>{
          <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">size</span> = context.chart.width;
          <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">base</span> = Math.<span class="hljs-title function_ invoke__">abs</span>(context.raw.v) / <span class="hljs-number">1000</span>;
          <span class="hljs-keyword">return</span> (size / <span class="hljs-number">24</span>) * base;
        }
      }
    }
  }
};
<span class="hljs-comment">// &lt;/block:options&gt;</span>

module.exports = {
  actions,
  config,
};</code></pre><h2>Docs</h2>
<ul>
<li><a href="../../charts/bubble.md">Bubble</a></li>
<li><a href="../../general/options.md">Options</a><ul>
<li><a href="../../general/options.md#scriptable-options">Scriptable Options</a></li>
</ul>
</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>