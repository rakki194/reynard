<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beacon - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Beacon</h1>
      <div class="markdown-content"><h1>Beacon</h1>
<p>A comprehensive logging framework for Python applications that provides structured logging, performance monitoring, and log aggregation capabilities.</p>
<h2>Features</h2>
<ul>
<li><strong>Structured Logging</strong>: JSON and structured log formats with context support</li>
<li><strong>Performance Monitoring</strong>: Built-in performance tracking and metrics collection</li>
<li><strong>Request Logging</strong>: Specialized HTTP request logging with middleware support</li>
<li><strong>Training Logging</strong>: ML training event logging with session tracking</li>
<li><strong>Log Rotation</strong>: Automatic log file rotation and management</li>
<li><strong>Multiple Handlers</strong>: Console, file, and specialized handlers (errors, performance, requests)</li>
<li><strong>Configuration</strong>: Flexible configuration system with environment variable support</li>
<li><strong>Type Safety</strong>: Full type hints and Pydantic validation</li>
</ul>
<h2>Installation</h2>
<pre><code class="hljs language-bash">pip install beacon</code></pre><p>For development dependencies:</p>
<pre><code class="hljs language-bash">pip install beacon[dev]</code></pre><p>For performance monitoring:</p>
<pre><code class="hljs language-bash">pip install beacon[performance]</code></pre><h2>Quick Start</h2>
<h3>Basic Usage</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_logger, get_logger

<span class="hljs-comment"># Setup a logger</span>
logger = setup_logger(<span class="hljs-string">&quot;my_app&quot;</span>)

<span class="hljs-comment"># Use the logger</span>
logger.info(<span class="hljs-string">&quot;Application started&quot;</span>)
logger.error(<span class="hljs-string">&quot;An error occurred&quot;</span>, extra={<span class="hljs-string">&quot;error_code&quot;</span>: <span class="hljs-number">500</span>})</code></pre><h3>Structured Logging</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_structured_logging, get_structured_logger

<span class="hljs-comment"># Setup structured logging</span>
setup_structured_logging()

<span class="hljs-comment"># Get a structured logger</span>
logger = get_structured_logger(<span class="hljs-string">&quot;my_app&quot;</span>)

<span class="hljs-comment"># Log with structured data</span>
logger.info(<span class="hljs-string">&quot;User action&quot;</span>, user_id=<span class="hljs-string">&quot;123&quot;</span>, action=<span class="hljs-string">&quot;login&quot;</span>, ip=<span class="hljs-string">&quot;192.168.1.1&quot;</span>)</code></pre><h3>Performance Monitoring</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> performance_tracker, log_performance

<span class="hljs-comment"># Track performance with context manager</span>
<span class="hljs-keyword">with</span> performance_tracker(<span class="hljs-string">&quot;database_query&quot;</span>, {<span class="hljs-string">&quot;table&quot;</span>: <span class="hljs-string">&quot;users&quot;</span>}):
    <span class="hljs-comment"># Your database operation here</span>
    result = db.query(<span class="hljs-string">&quot;SELECT * FROM users&quot;</span>)

<span class="hljs-comment"># Or log performance manually</span>
log_performance(<span class="hljs-string">&quot;api_call&quot;</span>, <span class="hljs-number">1.5</span>, {<span class="hljs-string">&quot;endpoint&quot;</span>: <span class="hljs-string">&quot;/api/users&quot;</span>})</code></pre><h3>Request Logging</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> RequestLogger

<span class="hljs-comment"># Create a request logger</span>
request_logger = RequestLogger()

<span class="hljs-comment"># Log HTTP requests</span>
request_logger.log_request(
    method=<span class="hljs-string">&quot;GET&quot;</span>,
    path=<span class="hljs-string">&quot;/api/users&quot;</span>,
    status_code=<span class="hljs-number">200</span>,
    duration=<span class="hljs-number">0.15</span>,
    user_agent=<span class="hljs-string">&quot;Mozilla/5.0...&quot;</span>,
    ip_address=<span class="hljs-string">&quot;192.168.1.1&quot;</span>,
    user_id=<span class="hljs-string">&quot;123&quot;</span>
)</code></pre><h3>Training Logging</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> TrainingLogger

<span class="hljs-comment"># Create a training logger</span>
training_logger = TrainingLogger()

<span class="hljs-comment"># Log training events</span>
training_logger.log_training_start(
    session_id=<span class="hljs-string">&quot;train_001&quot;</span>,
    model_name=<span class="hljs-string">&quot;bert-base&quot;</span>,
    hyperparameters={<span class="hljs-string">&quot;lr&quot;</span>: <span class="hljs-number">0.001</span>, <span class="hljs-string">&quot;batch_size&quot;</span>: <span class="hljs-number">32</span>}
)

training_logger.log_training_step(
    session_id=<span class="hljs-string">&quot;train_001&quot;</span>,
    step=<span class="hljs-number">100</span>,
    epoch=<span class="hljs-number">1</span>,
    loss=<span class="hljs-number">0.5</span>,
    metrics={<span class="hljs-string">&quot;accuracy&quot;</span>: <span class="hljs-number">0.85</span>}
)</code></pre><h2>Configuration</h2>
<h3>Basic Configuration</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> LogConfig, setup_logger

config = LogConfig(
    level=<span class="hljs-string">&quot;DEBUG&quot;</span>,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;json&quot;</span>,
    name=<span class="hljs-string">&quot;my_app&quot;</span>
)

logger = setup_logger(<span class="hljs-string">&quot;my_app&quot;</span>, config=config)</code></pre><h3>File Logging</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> LogConfig, FileHandlerConfig

config = LogConfig(
    file=FileHandlerConfig(
        directory=Path(<span class="hljs-string">&quot;/var/log/my_app&quot;</span>),
        max_bytes=<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,  <span class="hljs-comment"># 10MB</span>
        backup_count=<span class="hljs-number">5</span>
    )
)

logger = setup_logger(<span class="hljs-string">&quot;my_app&quot;</span>, config=config)</code></pre><h3>Environment Variables</h3>
<pre><code class="hljs language-bash"><span class="hljs-built_in">export</span> BEACON_LOG_LEVEL=DEBUG
<span class="hljs-built_in">export</span> BEACON_LOG_FORMAT=json
<span class="hljs-built_in">export</span> BEACON_LOG_DIR=/var/log/my_app</code></pre><p>Then use:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_logging_from_env

logger = setup_logging_from_env()</code></pre><h2>Advanced Usage</h2>
<h3>Custom Formatters</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> StructuredFormatter, setup_logger
<span class="hljs-keyword">import</span> logging

<span class="hljs-comment"># Create custom formatter</span>
formatter = StructuredFormatter(include_context=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Setup logger with custom formatter</span>
logger = setup_logger(<span class="hljs-string">&quot;my_app&quot;</span>)
<span class="hljs-keyword">for</span> handler <span class="hljs-keyword">in</span> logger.handlers:
    handler.setFormatter(formatter)</code></pre><h3>Log Aggregation</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_log_aggregation

<span class="hljs-comment"># Setup comprehensive log aggregation</span>
setup_log_aggregation(
    log_dir=Path(<span class="hljs-string">&quot;/var/log/my_app&quot;</span>),
    config=LogConfig(
        performance=PerformanceConfig(enabled=<span class="hljs-literal">True</span>),
        request=RequestLoggingConfig(enabled=<span class="hljs-literal">True</span>)
    )
)</code></pre><h3>Performance Monitoring</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_performance_monitoring, PerformanceConfig

<span class="hljs-comment"># Setup performance monitoring</span>
config = PerformanceConfig(
    track_memory=<span class="hljs-literal">True</span>,
    track_cpu=<span class="hljs-literal">True</span>,
    threshold_ms=<span class="hljs-number">1000</span>  <span class="hljs-comment"># Log operations slower than 1 second</span>
)

setup_performance_monitoring(config=config)</code></pre><h3>Request Middleware</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> create_request_middleware

<span class="hljs-comment"># Create middleware for your web framework</span>
middleware = create_request_middleware()

<span class="hljs-comment"># Use in your request processing</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_request</span>(<span class="hljs-params">request, response</span>):
    start_time = time.time()
    <span class="hljs-comment"># Process request</span>
    duration = time.time() - start_time
    middleware(request, response, duration)</code></pre><h2>API Reference</h2>
<h3>Core Functions</h3>
<ul>
<li><code>setup_logger(name, log_dir=None, debug=False, config=None)</code> - Setup a logger</li>
<li><code>get_logger(name=None)</code> - Get a logger instance</li>
<li><code>setup_structured_logging(config=None, log_level=None, log_format=None)</code> - Setup structured logging</li>
<li><code>get_structured_logger(name=None)</code> - Get a structured logger</li>
</ul>
<h3>Performance Functions</h3>
<ul>
<li><code>log_performance(operation, duration, context=None, **kwargs)</code> - Log performance metric</li>
<li><code>performance_tracker(operation, context=None, **kwargs)</code> - Context manager for performance tracking</li>
<li><code>get_performance_tracker()</code> - Get global performance tracker</li>
</ul>
<h3>Request Functions</h3>
<ul>
<li><code>log_request_info(logger, request_info)</code> - Log request information</li>
<li><code>setup_request_logging(logger=None, config=None)</code> - Setup request logging</li>
</ul>
<h3>Training Functions</h3>
<ul>
<li><code>log_training_event(logger, session_id, event_type, **kwargs)</code> - Log training event</li>
<li><code>log_model_event(logger, model_id, event_type, **kwargs)</code> - Log model event</li>
<li><code>setup_training_logging(logger=None, config=None)</code> - Setup training logging</li>
</ul>
<h3>Utility Functions</h3>
<ul>
<li><code>setup_log_rotation(log_dir, max_bytes, backup_count, when, interval)</code> - Setup log rotation</li>
<li><code>setup_log_aggregation(log_dir, config=None)</code> - Setup comprehensive log aggregation</li>
<li><code>setup_performance_monitoring(config=None, log_dir=None)</code> - Setup performance monitoring</li>
<li><code>setup_environment_logging()</code> - Setup logging from environment variables</li>
<li><code>setup_development_logging()</code> - Setup development-optimized logging</li>
<li><code>setup_production_logging(log_dir, log_level, log_format)</code> - Setup production logging</li>
</ul>
<h2>Configuration Classes</h2>
<h3>LogConfig</h3>
<p>Main configuration class with the following fields:</p>
<ul>
<li><code>level</code>: Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)</li>
<li><code>format</code>: Log format (text, json, structured)</li>
<li><code>name</code>: Logger name</li>
<li><code>console</code>: Console handler configuration</li>
<li><code>file</code>: File handler configuration</li>
<li><code>performance</code>: Performance monitoring configuration</li>
<li><code>request</code>: Request logging configuration</li>
<li><code>training</code>: Training logging configuration</li>
</ul>
<h3>HandlerConfig</h3>
<p>Base configuration for log handlers:</p>
<ul>
<li><code>enabled</code>: Whether the handler is enabled</li>
<li><code>level</code>: Handler log level</li>
<li><code>format</code>: Handler log format</li>
<li><code>max_bytes</code>: Maximum file size for rotation</li>
<li><code>backup_count</code>: Number of backup files to keep</li>
</ul>
<h3>PerformanceConfig</h3>
<p>Performance monitoring configuration:</p>
<ul>
<li><code>enabled</code>: Whether performance monitoring is enabled</li>
<li><code>track_memory</code>: Whether to track memory usage</li>
<li><code>track_cpu</code>: Whether to track CPU usage</li>
<li><code>threshold_ms</code>: Threshold for logging slow operations</li>
<li><code>interval_seconds</code>: Monitoring interval</li>
</ul>
<h3>RequestLoggingConfig</h3>
<p>Request logging configuration:</p>
<ul>
<li><code>enabled</code>: Whether request logging is enabled</li>
<li><code>log_headers</code>: Whether to log request headers</li>
<li><code>log_body</code>: Whether to log request body</li>
<li><code>log_query_params</code>: Whether to log query parameters</li>
<li><code>sensitive_headers</code>: List of sensitive headers to filter</li>
</ul>
<h3>TrainingLoggingConfig</h3>
<p>Training logging configuration:</p>
<ul>
<li><code>enabled</code>: Whether training logging is enabled</li>
<li><code>log_metrics</code>: Whether to log training metrics</li>
<li><code>log_checkpoints</code>: Whether to log checkpoints</li>
<li><code>log_validation</code>: Whether to log validation results</li>
<li><code>log_hyperparameters</code>: Whether to log hyperparameters</li>
</ul>
<h2>Examples</h2>
<h3>Web Application</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> setup_logger, RequestLogger, performance_tracker
<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, g
<span class="hljs-keyword">import</span> time

app = Flask(__name__)

<span class="hljs-comment"># Setup logging</span>
logger = setup_logger(<span class="hljs-string">&quot;web_app&quot;</span>)
request_logger = RequestLogger()

<span class="hljs-meta">@app.before_request</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">before_request</span>():
    g.start_time = time.time()

<span class="hljs-meta">@app.after_request</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">after_request</span>(<span class="hljs-params">response</span>):
    duration = time.time() - g.start_time

    request_logger.log_request(
        method=request.method,
        path=request.path,
        status_code=response.status_code,
        duration=duration,
        user_agent=request.headers.get(<span class="hljs-string">&quot;User-Agent&quot;</span>),
        ip_address=request.remote_addr
    )

    <span class="hljs-keyword">return</span> response

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/api/users&quot;</span></span>)</span>
<span class="hljs-meta">@performance_tracker(<span class="hljs-params"><span class="hljs-string">&quot;get_users&quot;</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users</span>():
    <span class="hljs-comment"># Your API logic here</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;users&quot;</span>: []}</code></pre><h3>Machine Learning Training</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> beacon <span class="hljs-keyword">import</span> TrainingLogger, performance_tracker
<span class="hljs-keyword">import</span> torch

<span class="hljs-comment"># Setup training logger</span>
training_logger = TrainingLogger()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_model</span>(<span class="hljs-params">model, dataloader, epochs</span>):
    session_id = <span class="hljs-string">&quot;train_001&quot;</span>

    training_logger.log_training_start(
        session_id=session_id,
        model_name=<span class="hljs-string">&quot;bert-base&quot;</span>,
        hyperparameters={<span class="hljs-string">&quot;lr&quot;</span>: <span class="hljs-number">0.001</span>, <span class="hljs-string">&quot;batch_size&quot;</span>: <span class="hljs-number">32</span>}
    )

    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
        <span class="hljs-keyword">for</span> batch_idx, (data, target) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(dataloader):
            <span class="hljs-keyword">with</span> performance_tracker(<span class="hljs-string">&quot;training_step&quot;</span>):
                <span class="hljs-comment"># Training step</span>
                loss = model(data, target)

                <span class="hljs-keyword">if</span> batch_idx % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>:
                    training_logger.log_training_step(
                        session_id=session_id,
                        step=batch_idx,
                        epoch=epoch,
                        loss=loss.item()
                    )

    training_logger.log_training_end(
        session_id=session_id,
        training_time=total_time
    )</code></pre><h2>Development</h2>
<h3>Running Tests</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Install development dependencies</span>
pip install -e .[dev]

<span class="hljs-comment"># Run tests</span>
pytest

<span class="hljs-comment"># Run tests with coverage</span>
pytest --cov=beacon</code></pre><h3>Code Formatting</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Format code</span>
black src/beacon tests/

<span class="hljs-comment"># Sort imports</span>
isort src/beacon tests/</code></pre><h3>Type Checking</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Run type checker</span>
mypy src/beacon</code></pre><h2>Contributing</h2>
<ol>
<li>Fork the repository</li>
<li>Create a feature branch</li>
<li>Make your changes</li>
<li>Add tests for new functionality</li>
<li>Run the test suite</li>
<li>Submit a pull request</li>
</ol>
<h2>License</h2>
<p>MIT License - see LICENSE file for details.</p>
<h2>Changelog</h2>
<h3>0.1.0</h3>
<ul>
<li>Initial release</li>
<li>Core logging functionality</li>
<li>Structured logging support</li>
<li>Performance monitoring</li>
<li>Request logging</li>
<li>Training logging</li>
<li>Log rotation and aggregation</li>
<li>Configuration system</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>