<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ü¶ä> Reynard Modular Implementation Plan - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>ü¶ä> Reynard Modular Implementation Plan</h1>
      <div class="markdown-content"><h1>ü¶ä&gt; Reynard Modular Implementation Plan</h1>
<p><em>Clean modular implementation of Yipyap features into Reynard&#39;s existing architecture</em></p>
<h2><strong>üéØ Current State Analysis</strong></h2>
<h3><strong>‚úÖ What Reynard Already Has (Sophisticated &amp; Complete)</strong></h3>
<p><strong>Backend System</strong> (Fully Implemented):</p>
<ul>
<li>‚úÖ Complete caption generation system (JTP2, Florence2, WDv3, JoyCaption)</li>
<li>‚úÖ Plugin architecture with proper interfaces</li>
<li>‚úÖ Model management (ModelCoordinator, BatchProcessor, CaptionService)</li>
<li>‚úÖ Complete FastAPI endpoints</li>
<li>‚úÖ Production features (retry logic, health monitoring, usage tracking)</li>
</ul>
<p><strong>Frontend Architecture</strong> (Well Designed):</p>
<ul>
<li>‚úÖ BackendAnnotationManager with HTTP client</li>
<li>‚úÖ Complete TypeScript definitions</li>
<li>‚úÖ Modular package structure</li>
<li>‚úÖ Configuration system for each generator</li>
</ul>
<p><strong>UI Components</strong> (Basic but Functional):</p>
<ul>
<li>‚úÖ CaptionInput with basic tag support</li>
<li>‚úÖ TagBubble with editing capabilities</li>
<li>‚úÖ Gallery system with multi-modal support</li>
<li>‚úÖ Tag color generation system</li>
</ul>
<h3><strong>‚ùå What&#39;s Missing (The Real Gaps)</strong></h3>
<p><strong>Specialized Editors</strong> (Critical Missing):</p>
<ul>
<li>‚ùå E621 JSON editor with syntax highlighting</li>
<li>‚ùå TOML editor with validation</li>
<li>‚ùå Advanced tag management system</li>
<li>‚ùå Tag autocomplete with backend integration</li>
</ul>
<p><strong>Advanced UI Components</strong> (High Priority):</p>
<ul>
<li>‚ùå Advanced TagBubble with OKLCH colors</li>
<li>‚ùå Interactive caption generation interface</li>
<li>‚ùå Model management dashboard</li>
<li>‚ùå Batch processing UI</li>
<li>‚ùå Comprehensive image modal</li>
</ul>
<p><strong>Multi-Modal Features</strong> (Medium Priority):</p>
<ul>
<li>‚ùå Audio processing components</li>
<li>‚ùå Video processing components</li>
<li>‚ùå Text processing components</li>
<li>‚ùå Semantic search interface</li>
</ul>
<p><strong>Advanced Features</strong> (Low Priority):</p>
<ul>
<li>‚ùå Caption tools integration (AI enhancement)</li>
<li>‚ùå Dataset cleaning tools</li>
<li>‚ùå Performance monitoring dashboard</li>
<li>‚ùå Advanced analytics</li>
</ul>
<hr>
<h2><strong>üöÄ Clean Modular Implementation Plan</strong></h2>
<h3><strong>Phase 1: Specialized Editors</strong> (Weeks 1-2)</h3>
<p><strong>Target</strong>: Create the missing specialized caption editors</p>
<h4><strong>1.1 E621 JSON Editor</strong> (50 points)</h4>
<p><strong>Location</strong>: <code>packages/caption/src/components/E621Editor.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">E621Editor</span>: <span class="hljs-title class_">Component</span>&lt;E621EditorProps&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title function_">createSignal</span>(props.<span class="hljs-property">content</span>);
  <span class="hljs-keyword">const</span> [isValid, setIsValid] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [currentLine, setCurrentLine] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-number">1</span>);
  
  <span class="hljs-comment">// JSON syntax highlighting</span>
  <span class="hljs-keyword">const</span> highlightedContent = <span class="hljs-title function_">createMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">highlightJSON</span>(<span class="hljs-title function_">content</span>());
  });
  
  <span class="hljs-comment">// Real-time validation</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateJSON</span> = (<span class="hljs-params"><span class="hljs-attr">jsonString</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonString);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;e621-editor&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;editor-header&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line-counter&quot;</span>&gt;</span>Line {currentLine()}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;validation-status&quot;</span> <span class="hljs-attr">classList</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">valid:</span> <span class="hljs-attr">isValid</span>() }}&gt;</span>
          {isValid() ? &quot;Valid JSON&quot; : &quot;Invalid JSON&quot;}
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;editor-content&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;syntax-highlight&quot;</span>&gt;</span>{highlightedContent()}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{content()}</span>
          <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            setContent(e.target.value);
            setIsValid(validateJSON(e.target.value));
          }}
          class=&quot;editor-input&quot;
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>1.2 TOML Editor</strong> (50 points)</h4>
<p><strong>Location</strong>: <code>packages/caption/src/components/TOMLEditor.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">TOMLEditor</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">TOMLEditorProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title function_">createSignal</span>(props.<span class="hljs-property">content</span>);
  <span class="hljs-keyword">const</span> [isValid, setIsValid] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-comment">// TOML syntax highlighting</span>
  <span class="hljs-keyword">const</span> highlightedContent = <span class="hljs-title function_">createMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">highlightTOML</span>(<span class="hljs-title function_">content</span>());
  });
  
  <span class="hljs-comment">// Real-time validation</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateTOML</span> = (<span class="hljs-params"><span class="hljs-attr">tomlString</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable constant_">TOML</span>.<span class="hljs-title function_">parse</span>(tomlString);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;toml-editor&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;editor-content&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;syntax-highlight&quot;</span>&gt;</span>{highlightedContent()}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{content()}</span>
          <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            setContent(e.target.value);
            setIsValid(validateTOML(e.target.value));
          }}
          class=&quot;editor-input&quot;
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>1.3 Advanced Tag Management</strong> (50 points)</h4>
<p><strong>Location</strong>: <code>packages/caption/src/components/TagManagement.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">TagManagement</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">TagManagementProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [tags, setTags] = <span class="hljs-title function_">createSignal</span>(props.<span class="hljs-property">tags</span>);
  <span class="hljs-keyword">const</span> [selectedIndex, setSelectedIndex] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// Keyboard navigation</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleKeyDown</span> = (<span class="hljs-params"><span class="hljs-attr">e</span>: <span class="hljs-title class_">KeyboardEvent</span></span>) =&gt; {
    <span class="hljs-keyword">switch</span> (e.<span class="hljs-property">key</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ArrowLeft&quot;</span>:
        <span class="hljs-title function_">setSelectedIndex</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title function_">selectedIndex</span>() - <span class="hljs-number">1</span>));
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ArrowRight&quot;</span>:
        <span class="hljs-title function_">setSelectedIndex</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title function_">tags</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>, <span class="hljs-title function_">selectedIndex</span>() + <span class="hljs-number">1</span>));
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Delete&quot;</span>:
        <span class="hljs-title function_">removeTag</span>(<span class="hljs-title function_">selectedIndex</span>());
        <span class="hljs-keyword">break</span>;
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tag-management&quot;</span> <span class="hljs-attr">onKeyDown</span>=<span class="hljs-string">{handleKeyDown}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{tags()}</span>&gt;</span>
        {(tag, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">TagBubble</span>
            <span class="hljs-attr">tag</span>=<span class="hljs-string">{tag}</span>
            <span class="hljs-attr">index</span>=<span class="hljs-string">{index()}</span>
            <span class="hljs-attr">isSelected</span>=<span class="hljs-string">{index()</span> === <span class="hljs-string">selectedIndex()}</span>
            <span class="hljs-attr">onEdit</span>=<span class="hljs-string">{(newTag)</span> =&gt;</span> editTag(index(), newTag)}
            onRemove={() =&gt; removeTag(index())}
          /&gt;
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>1.4 Tag Autocomplete</strong> (50 points)</h4>
<p><strong>Location</strong>: <code>packages/caption/src/components/TagAutocomplete.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">TagAutocomplete</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">TagAutocompleteProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-string">&quot;&quot;</span>);
  <span class="hljs-keyword">const</span> [suggestions, setSuggestions] = createSignal&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [selectedIndex, setSelectedIndex] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-comment">// Backend integration</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchSuggestions</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">searchQuery</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">if</span> (searchQuery.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/tags/search?q=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(searchQuery)}</span>`</span>);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      <span class="hljs-title function_">setSuggestions</span>(data.<span class="hljs-property">suggestions</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;Failed to fetch tag suggestions:&quot;</span>, error);
    }
  };
  
  <span class="hljs-comment">// Debounced search</span>
  <span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">debounce</span>(fetchSuggestions, <span class="hljs-number">300</span>);
  
  <span class="hljs-title function_">createEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">debouncedSearch</span>(<span class="hljs-title function_">query</span>());
  });
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tag-autocomplete&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{query()}</span>
        <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setQuery(e.target.value)}
        onKeyDown={handleKeyDown}
        class=&quot;autocomplete-input&quot;
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span> <span class="hljs-attr">when</span>=<span class="hljs-string">{suggestions().length</span> &gt;</span> 0}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;suggestions-list&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{suggestions()}</span>&gt;</span>
            {(suggestion, index) =&gt; (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;suggestion-item&quot;</span>
                <span class="hljs-attr">classList</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">selected:</span> <span class="hljs-attr">index</span>() === <span class="hljs-string">selectedIndex()</span> }}
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectSuggestion(suggestion)}
              &gt;
                {suggestion}
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
          <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h3><strong>Phase 2: Advanced UI Components</strong> (Weeks 3-4)</h3>
<h4><strong>2.1 Advanced TagBubble with OKLCH</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/caption/src/components/AdvancedTagBubble.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AdvancedTagBubble</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">AdvancedTagBubbleProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [isEditing, setIsEditing] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isHovered, setIsHovered] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// OKLCH color generation</span>
  <span class="hljs-keyword">const</span> tagColor = <span class="hljs-title function_">createMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">generateOKLCHColor</span>(props.<span class="hljs-property">tag</span>, props.<span class="hljs-property">theme</span>);
  });
  
  <span class="hljs-comment">// Interactive editing with autocomplete</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEdit</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setIsEditing</span>(<span class="hljs-literal">true</span>);
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;advanced-tag-bubble&quot;</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        &quot;<span class="hljs-attr">--tag-color</span>&quot;<span class="hljs-attr">:</span> <span class="hljs-attr">tagColor</span>()<span class="hljs-attr">.background</span>,
        &quot;<span class="hljs-attr">--tag-text</span>&quot;<span class="hljs-attr">:</span> <span class="hljs-attr">tagColor</span>()<span class="hljs-attr">.text</span>,
        &quot;<span class="hljs-attr">--tag-border</span>&quot;<span class="hljs-attr">:</span> <span class="hljs-attr">tagColor</span>()<span class="hljs-attr">.border</span>,
      }}
      <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsHovered(true)}
      onMouseLeave={() =&gt; setIsHovered(false)}
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span>
        <span class="hljs-attr">when</span>=<span class="hljs-string">{!isEditing()}</span>
        <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>
          &lt;<span class="hljs-attr">TagAutocomplete</span>
            <span class="hljs-attr">initialValue</span>=<span class="hljs-string">{props.tag}</span>
            <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{(newTag)</span> =&gt;</span> {
              props.onEdit(newTag);
              setIsEditing(false);
            }}
            onCancel={() =&gt; setIsEditing(false)}
          /&gt;
        }
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tag-text&quot;</span>&gt;</span>{props.tag}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>2.2 Interactive Caption Generation Interface</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/caption-ui/src/components/CaptionGenerator.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CaptionGenerator</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">CaptionGeneratorProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [selectedModel, setSelectedModel] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-string">&quot;jtp2&quot;</span>);
  <span class="hljs-keyword">const</span> [imageFile, setImageFile] = createSignal&lt;<span class="hljs-title class_">File</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isGenerating, setIsGenerating] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [result, setResult] = createSignal&lt;<span class="hljs-title class_">CaptionResult</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  
  <span class="hljs-keyword">const</span> manager = <span class="hljs-title function_">useBackendAnnotationManager</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateCaption</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">imageFile</span>()) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-title function_">setIsGenerating</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">task</span>: <span class="hljs-title class_">CaptionTask</span> = {
        <span class="hljs-attr">imagePath</span>: <span class="hljs-title function_">imageFile</span>()!.<span class="hljs-property">name</span>,
        <span class="hljs-attr">generatorName</span>: <span class="hljs-title function_">selectedModel</span>(),
        <span class="hljs-attr">config</span>: { <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.2</span> },
        <span class="hljs-attr">postProcess</span>: <span class="hljs-literal">true</span>
      };
      
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> manager.<span class="hljs-title function_">generateCaption</span>(task);
      <span class="hljs-title function_">setResult</span>(result);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsGenerating</span>(<span class="hljs-literal">false</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;caption-generator&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ModelSelector</span> 
        <span class="hljs-attr">selected</span>=<span class="hljs-string">{selectedModel()}</span> 
        <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{setSelectedModel}</span>
        <span class="hljs-attr">available</span>=<span class="hljs-string">{manager.getAvailableGenerators()}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ImageUpload</span> 
        <span class="hljs-attr">file</span>=<span class="hljs-string">{imageFile()}</span> 
        <span class="hljs-attr">onFileChange</span>=<span class="hljs-string">{setImageFile}</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">GenerateButton</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{generateCaption}</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!imageFile()</span> || <span class="hljs-attr">isGenerating</span>()}
        <span class="hljs-attr">loading</span>=<span class="hljs-string">{isGenerating()}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span> <span class="hljs-attr">when</span>=<span class="hljs-string">{result()}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">CaptionResult</span> <span class="hljs-attr">result</span>=<span class="hljs-string">{result()!}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>2.3 Model Management Dashboard</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/caption-ui/src/components/ModelManager.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ModelManager</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">ModelManagerProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [models, setModels] = createSignal&lt;<span class="hljs-title class_">GeneratorInfo</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [loadedModels, setLoadedModels] = createSignal&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
  <span class="hljs-keyword">const</span> [healthStatus, setHealthStatus] = createSignal&lt;<span class="hljs-title class_">HealthStatus</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  
  <span class="hljs-keyword">const</span> manager = <span class="hljs-title function_">useBackendAnnotationManager</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadModel</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">modelName</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> manager.<span class="hljs-title function_">loadModel</span>(modelName);
      <span class="hljs-title function_">setLoadedModels</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...prev, modelName]));
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;Failed to load model:&quot;</span>, error);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;model-manager&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;models-grid&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{models()}</span>&gt;</span>
          {(model) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">ModelCard</span> 
              <span class="hljs-attr">model</span>=<span class="hljs-string">{model}</span>
              <span class="hljs-attr">isLoaded</span>=<span class="hljs-string">{loadedModels().has(model.name)}</span>
              <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span> loadModel(model.name)}
              onUnload={() =&gt; unloadModel(model.name)}
            /&gt;
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">HealthStatus</span> <span class="hljs-attr">health</span>=<span class="hljs-string">{healthStatus()}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h3><strong>Phase 3: Multi-Modal Features</strong> (Weeks 5-6)</h3>
<h4><strong>3.1 Audio Processing Components</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/audio-ui/src/components/AudioGrid.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AudioGrid</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">AudioGridProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [audioFiles, setAudioFiles] = createSignal&lt;<span class="hljs-title class_">AudioFile</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [selectedFile, setSelectedFile] = createSignal&lt;<span class="hljs-title class_">AudioFile</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isPlaying, setIsPlaying] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;audio-grid&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;files-grid&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{audioFiles()}</span>&gt;</span>
          {(file) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">AudioFileCard</span> 
              <span class="hljs-attr">file</span>=<span class="hljs-string">{file}</span>
              <span class="hljs-attr">isSelected</span>=<span class="hljs-string">{selectedFile()?.id</span> === <span class="hljs-string">file.id}</span>
              <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedFile(file)}
              onPlay={() =&gt; {
                setSelectedFile(file);
                setIsPlaying(true);
              }}
            /&gt;
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span> <span class="hljs-attr">when</span>=<span class="hljs-string">{selectedFile()}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">AudioPlayer</span> 
          <span class="hljs-attr">file</span>=<span class="hljs-string">{selectedFile()!}</span>
          <span class="hljs-attr">isPlaying</span>=<span class="hljs-string">{isPlaying()}</span>
          <span class="hljs-attr">onPlay</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsPlaying(true)}
          onPause={() =&gt; setIsPlaying(false)}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>3.2 Video Processing Components</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/video-ui/src/components/VideoGrid.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">VideoGrid</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">VideoGridProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [videoFiles, setVideoFiles] = createSignal&lt;<span class="hljs-title class_">VideoFile</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [selectedFile, setSelectedFile] = createSignal&lt;<span class="hljs-title class_">VideoFile</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-grid&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;files-grid&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{videoFiles()}</span>&gt;</span>
          {(file) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">VideoFileCard</span> 
              <span class="hljs-attr">file</span>=<span class="hljs-string">{file}</span>
              <span class="hljs-attr">isSelected</span>=<span class="hljs-string">{selectedFile()?.id</span> === <span class="hljs-string">file.id}</span>
              <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedFile(file)}
            /&gt;
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span> <span class="hljs-attr">when</span>=<span class="hljs-string">{selectedFile()}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">VideoPlayer</span> 
          <span class="hljs-attr">file</span>=<span class="hljs-string">{selectedFile()!}</span>
          <span class="hljs-attr">onClose</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedFile(null)}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>3.3 Text Processing Components</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/text-ui/src/components/TextGrid.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">TextGrid</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">TextGridProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [textFiles, setTextFiles] = createSignal&lt;<span class="hljs-title class_">TextFile</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [selectedFile, setSelectedFile] = createSignal&lt;<span class="hljs-title class_">TextFile</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-grid&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;files-grid&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{textFiles()}</span>&gt;</span>
          {(file) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">TextFileCard</span> 
              <span class="hljs-attr">file</span>=<span class="hljs-string">{file}</span>
              <span class="hljs-attr">isSelected</span>=<span class="hljs-string">{selectedFile()?.id</span> === <span class="hljs-string">file.id}</span>
              <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedFile(file)}
            /&gt;
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Show</span> <span class="hljs-attr">when</span>=<span class="hljs-string">{selectedFile()}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextEditor</span> 
          <span class="hljs-attr">file</span>=<span class="hljs-string">{selectedFile()!}</span>
          <span class="hljs-attr">onClose</span>=<span class="hljs-string">{()</span> =&gt;</span> setSelectedFile(null)}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Show</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h3><strong>Phase 4: Advanced Features</strong> (Weeks 7-8)</h3>
<h4><strong>4.1 Caption Tools Integration</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/caption-ui/src/components/CaptionTools.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CaptionTools</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">CaptionToolsProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [isEnhancing, setIsEnhancing] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isGenerating, setIsGenerating] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">enhanceCaption</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setIsEnhancing</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> enhanced = <span class="hljs-keyword">await</span> props.<span class="hljs-title function_">onEnhance</span>(props.<span class="hljs-property">caption</span>);
      props.<span class="hljs-title function_">onCaptionChange</span>(enhanced);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsEnhancing</span>(<span class="hljs-literal">false</span>);
    }
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateImage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setIsGenerating</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> props.<span class="hljs-title function_">onGenerateImage</span>(props.<span class="hljs-property">caption</span>);
      props.<span class="hljs-title function_">onImageGenerated</span>(result);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsGenerating</span>(<span class="hljs-literal">false</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;caption-tools&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{enhanceCaption}</span>
        <span class="hljs-attr">loading</span>=<span class="hljs-string">{isEnhancing()}</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!props.caption}</span>
      &gt;</span>
        Enhance with AI
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{generateImage}</span>
        <span class="hljs-attr">loading</span>=<span class="hljs-string">{isGenerating()}</span>
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!props.caption}</span>
      &gt;</span>
        Generate Image
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><h4><strong>4.2 Dataset Cleaning Tools</strong> (100 points)</h4>
<p><strong>Location</strong>: <code>packages/gallery/src/components/DatasetCleaningModal.tsx</code></p>
<p><strong>Implementation</strong>:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">DatasetCleaningModal</span>: <span class="hljs-title class_">Component</span>&lt;<span class="hljs-title class_">DatasetCleaningProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [duplicates, setDuplicates] = createSignal&lt;<span class="hljs-title class_">DuplicateGroup</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [selectedDuplicates, setSelectedDuplicates] = createSignal&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
  <span class="hljs-keyword">const</span> [isScanning, setIsScanning] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">scanForDuplicates</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setIsScanning</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> duplicates = <span class="hljs-keyword">await</span> props.<span class="hljs-title function_">onScanDuplicates</span>();
      <span class="hljs-title function_">setDuplicates</span>(duplicates);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsScanning</span>(<span class="hljs-literal">false</span>);
    }
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dataset-cleaning-modal&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;scan-section&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{scanForDuplicates}</span>
          <span class="hljs-attr">loading</span>=<span class="hljs-string">{isScanning()}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isScanning()}</span>
        &gt;</span>
          Scan for Duplicates
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;duplicates-section&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">For</span> <span class="hljs-attr">each</span>=<span class="hljs-string">{duplicates()}</span>&gt;</span>
          {(group) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">DuplicateGroup</span> 
              <span class="hljs-attr">group</span>=<span class="hljs-string">{group}</span>
              <span class="hljs-attr">selected</span>=<span class="hljs-string">{selectedDuplicates()}</span>
              <span class="hljs-attr">onSelectionChange</span>=<span class="hljs-string">{setSelectedDuplicates}</span>
            /&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">For</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};</code></pre><hr>
<h2><strong>üì¶ Package Structure</strong></h2>
<h3><strong>New Packages to Create</strong></h3>
<ol>
<li><strong><code>packages/caption-ui/</code></strong> - Interactive caption generation interface</li>
<li><strong><code>packages/audio-ui/</code></strong> - Audio processing components</li>
<li><strong><code>packages/video-ui/</code></strong> - Video processing components</li>
<li><strong><code>packages/text-ui/</code></strong> - Text processing components</li>
</ol>
<h3><strong>Enhanced Existing Packages</strong></h3>
<ol>
<li><strong><code>packages/caption/</code></strong> - Add specialized editors (E621, TOML)</li>
<li><strong><code>packages/gallery/</code></strong> - Add multi-modal support and cleaning tools</li>
<li><strong><code>packages/annotating/</code></strong> - Add UI components for backend integration</li>
</ol>
<hr>
<h2><strong>üéØ Success Criteria</strong></h2>
<h3><strong>Phase 1 Success</strong></h3>
<ul>
<li>‚úÖ E621 JSON editor with syntax highlighting</li>
<li>‚úÖ TOML editor with validation</li>
<li>‚úÖ Advanced tag management with keyboard navigation</li>
<li>‚úÖ Tag autocomplete with backend integration</li>
</ul>
<h3><strong>Phase 2 Success</strong></h3>
<ul>
<li>‚úÖ Advanced TagBubble with OKLCH colors</li>
<li>‚úÖ Interactive caption generation interface</li>
<li>‚úÖ Model management dashboard</li>
<li>‚úÖ Batch processing UI</li>
</ul>
<h3><strong>Phase 3 Success</strong></h3>
<ul>
<li>‚úÖ Audio processing components</li>
<li>‚úÖ Video processing components</li>
<li>‚úÖ Text processing components</li>
<li>‚úÖ Multi-modal gallery support</li>
</ul>
<h3><strong>Phase 4 Success</strong></h3>
<ul>
<li>‚úÖ Caption tools integration</li>
<li>‚úÖ Dataset cleaning tools</li>
<li>‚úÖ Performance monitoring</li>
<li>‚úÖ Complete feature parity with Yipyap</li>
</ul>
<hr>
<h2><strong>üöÄ Getting Started</strong></h2>
<h3><strong>Immediate Priority</strong></h3>
<ol>
<li><strong>Start with Phase 1</strong> - Specialized editors are the foundation</li>
<li><strong>Enhance existing packages</strong> - Build on what&#39;s already there</li>
<li><strong>Create new packages</strong> - Only for truly new functionality</li>
<li><strong>Maintain modularity</strong> - Keep the clean architecture</li>
</ol>
<h3><strong>Key Principles</strong></h3>
<ul>
<li><strong>Build on existing architecture</strong> - Don&#39;t rewrite what works</li>
<li><strong>Maintain type safety</strong> - Keep the excellent TypeScript support</li>
<li><strong>Preserve modularity</strong> - Each package should be independent</li>
<li><strong>Use existing backend</strong> - Leverage the sophisticated backend system</li>
</ul>
<p>This plan transforms Reynard into a complete modular fox while preserving the excellent architecture you&#39;ve already built! ü¶ä</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ‚ù§Ô∏è using SolidJS.</p></footer>
</body>
</html>