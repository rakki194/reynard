<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tooltip System: Troubleshooting and Best Practices - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Tooltip System: Troubleshooting and Best Practices</h1>
      <div class="markdown-content"><h1>Tooltip System: Troubleshooting and Best Practices</h1>
<p>This document covers common issues, solutions, and best practices for working with the Tooltip system in yipyap.</p>
<h2>Table of Contents</h2>
<hr>
<ul>
<li><a href="#tooltip-system-troubleshooting-and-best-practices">Tooltip System: Troubleshooting and Best Practices</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#common-issues-and-solutions">Common Issues and Solutions</a><ul>
<li><a href="#timing-issues">Timing Issues</a><ul>
<li><a href="#problem-tooltip-appears-too-quicklyslowly">Problem: Tooltip appears too quickly/slowly</a></li>
<li><a href="#problem-animation-feels-abrupt">Problem: Animation feels abrupt</a></li>
</ul>
</li>
<li><a href="#visibility-issues">Visibility Issues</a><ul>
<li><a href="#problem-tooltip-doesnt-fade-smoothly">Problem: Tooltip doesn&#39;t fade smoothly</a></li>
<li><a href="#problem-blur-effect-not-working">Problem: Blur effect not working</a></li>
</ul>
</li>
<li><a href="#accessibility-issues">Accessibility Issues</a><ul>
<li><a href="#problem-screen-reader-announces-tooltip-too-early">Problem: Screen reader announces tooltip too early</a></li>
</ul>
</li>
<li><a href="#performance-issues">Performance Issues</a><ul>
<li><a href="#problem-janky-animations">Problem: Janky animations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#best-practices">Best Practices</a><ul>
<li><a href="#content-guidelines">Content Guidelines</a></li>
<li><a href="#interaction-guidelines">Interaction Guidelines</a></li>
<li><a href="#performance-guidelines">Performance Guidelines</a></li>
<li><a href="#accessibility-guidelines">Accessibility Guidelines</a></li>
</ul>
</li>
<li><a href="#testing-guidelines">Testing Guidelines</a><ul>
<li><a href="#unit-tests">Unit Tests</a></li>
<li><a href="#visual-tests">Visual Tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Common Issues and Solutions</h2>
<hr>
<h3>Timing Issues</h3>
<h4>Problem: Tooltip appears too quickly/slowly</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Default behavior is 0.5s delay</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showTooltip</span> = (<span class="hljs-params"></span>) =&gt; {
  timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsVisible</span>(<span class="hljs-literal">true</span>), <span class="hljs-number">500</span>);
};</code></pre><p><strong>Solution:</strong><br>The 0.5 second delay is intentionally designed to provide an optimal user experience. When implementing tooltips, it&#39;s important to ensure there are no conflicting timeouts that could interfere with this delay. Additionally, proper cleanup of timeouts should be performed when components unmount to prevent memory leaks and unexpected behavior.</p>
<h4>Problem: Animation feels abrupt</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.tooltip-content</span> {
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.2s</span> ease-out; <span class="hljs-comment">/* Too short */</span>
}</code></pre><p><strong>Solution:</strong><br>For optimal tooltip animations, use a 0.4 second duration for the fade-in transition to ensure a smooth appearance that doesn&#39;t feel rushed. The fade-out transition should be slightly faster at 0.2 seconds to provide quick visual feedback when the tooltip is dismissed. Always include transform properties in the transition to enable hardware acceleration and smoother animations. The ease-out timing function should be used to create natural-feeling motion that starts quickly and gently decelerates.</p>
<h3>Visibility Issues</h3>
<h4>Problem: Tooltip doesn&#39;t fade smoothly</h4>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Incorrect: Using Show component</span>
&lt;<span class="hljs-title class_">Show</span> when={<span class="hljs-title function_">isVisible</span>()}&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tooltip-content&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Show</span>&gt;</code></pre><p><strong>Solution:</strong><br>To properly handle tooltip visibility, use CSS visibility and opacity properties together. The tooltip element should remain mounted in the DOM rather than being conditionally rendered. This allows for smooth transitions and animations. Additionally, use the aria-hidden attribute to ensure proper accessibility by hiding the tooltip from screen readers when it is not visible.</p>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Correct approach</span>
&lt;div
  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;tooltip-content&quot;</span>
  aria-hidden={!<span class="hljs-title function_">isVisible</span>()}
&gt;
  ...
&lt;/div&gt;</code></pre><h4>Problem: Blur effect not working</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.tooltip-content</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>); <span class="hljs-comment">/* Missing blur */</span>
}</code></pre><p><strong>Solution:</strong><br>To implement proper blur effects, add a backdrop-filter property to create a frosted glass effect behind the tooltip content. For browsers that don&#39;t support backdrop-filter, provide a fallback by using a darker background color with higher opacity to maintain readability.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.tooltip-content</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
  <span class="hljs-attribute">backdrop-filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">4px</span>);
  <span class="hljs-comment">/* Fallback for browsers without backdrop-filter */</span>
  <span class="hljs-keyword">@supports</span> <span class="hljs-keyword">not</span> (<span class="hljs-attribute">backdrop-filter</span>: blur(<span class="hljs-number">4px</span>)) {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>);
  }
}</code></pre><h3>Accessibility Issues</h3>
<h4>Problem: Screen reader announces tooltip too early</h4>
<pre><code class="hljs language-typescript">&lt;div role=<span class="hljs-string">&quot;tooltip&quot;</span>&gt;  <span class="hljs-comment">/* Missing aria-hidden */</span>
  {content}
&lt;/div&gt;</code></pre><p><strong>Solution:</strong><br>Proper accessibility requires setting the aria-hidden attribute to control when screen readers announce the tooltip content. The tooltip element should have role=&quot;tooltip&quot; to indicate its purpose to assistive technologies. Focus management is also critical - the tooltip should only be announced when the triggering element receives focus, and focus should return to the trigger when the tooltip is dismissed.</p>
<h3>Performance Issues</h3>
<h4>Problem: Janky animations</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.tooltip-content</span> {
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>; <span class="hljs-comment">/* Too generic */</span>
}</code></pre><p><strong>Solution:</strong><br>For optimal animation performance, it&#39;s important to be specific about which properties are being animated. Rather than using a catch-all transition, explicitly target transform and opacity properties which are optimized for smooth animations.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.tooltip-content</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>:
    transform <span class="hljs-number">0.2s</span> ease-out,
    opacity <span class="hljs-number">0.2s</span> ease-out;
  <span class="hljs-attribute">will-change</span>: transform, opacity;
}</code></pre><h2>Best Practices</h2>
<hr>
<h3>Content Guidelines</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Good</span>
&lt;<span class="hljs-title class_">Tooltip</span> content=<span class="hljs-string">&quot;Brief, helpful description&quot;</span>&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Tooltip</span>&gt;

<span class="hljs-comment">// Bad</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Very long explanation that doesn&#x27;t fit the fixed-position style&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span></code></pre><ul>
<li>Keep content concise</li>
<li>Consider fixed positioning constraints</li>
<li>Use clear, actionable text</li>
<li>Support internationalization</li>
</ul>
<h3>Interaction Guidelines</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Good: Clear hover target</span>
&lt;<span class="hljs-title class_">Tooltip</span> content=<span class="hljs-string">&quot;Help text&quot;</span>&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;interactive-element&quot;</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Tooltip</span>&gt;

<span class="hljs-comment">// Bad: Unclear hover target</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Help text&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Non-interactive content<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span></code></pre><ul>
<li>Use on interactive elements</li>
<li>Consider the 1.5s delay in UX design</li>
<li>Test with keyboard navigation</li>
<li>Ensure proper focus states</li>
</ul>
<h3>Performance Guidelines</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Good: Static content</span>
&lt;<span class="hljs-title class_">Tooltip</span> content={staticText}&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Tooltip</span>&gt;

<span class="hljs-comment">// Avoid: Dynamic content that changes frequently</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{computeExpensiveValue()}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span></code></pre><ul>
<li>Use static content when possible</li>
<li>Clean up timeouts properly</li>
<li>Minimize DOM updates</li>
<li>Use hardware acceleration</li>
</ul>
<h3>Accessibility Guidelines</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Good</span>
&lt;<span class="hljs-title class_">Tooltip</span> content=<span class="hljs-string">&quot;Additional information&quot;</span>&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Primary action&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;visually-hidden&quot;</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>→<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Tooltip</span>&gt;</code></pre><ul>
<li>Maintain proper ARIA attributes</li>
<li>Test with screen readers</li>
<li>Ensure keyboard accessibility</li>
<li>Consider focus indicators</li>
</ul>
<h2>Testing Guidelines</h2>
<hr>
<h3>Unit Tests</h3>
<pre><code class="hljs language-typescript"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Tooltip&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">&quot;should show after delay&quot;</span>, <span class="hljs-title function_">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="hljs-function">() =&gt;</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Test&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Hover<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span>
    ));

    <span class="hljs-keyword">const</span> trigger = <span class="hljs-title function_">getByText</span>(<span class="hljs-string">&quot;Hover&quot;</span>);
    fireEvent.<span class="hljs-title function_">mouseEnter</span>(trigger);

    <span class="hljs-comment">// Wait for the 1.5s delay</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">1500</span>));

    <span class="hljs-title function_">expect</span>(screen.<span class="hljs-title function_">getByRole</span>(<span class="hljs-string">&quot;tooltip&quot;</span>)).<span class="hljs-property">not</span>.<span class="hljs-title function_">toHaveAttribute</span>(<span class="hljs-string">&quot;aria-hidden&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);
  });
});</code></pre><h3>Visual Tests</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// Test transition timing</span>
<span class="hljs-title function_">test</span>(<span class="hljs-string">&quot;tooltip transitions properly&quot;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> { getByText } = <span class="hljs-title function_">render</span>(<span class="hljs-function">() =&gt;</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Test&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Hover<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span>
  ));

  <span class="hljs-keyword">const</span> trigger = <span class="hljs-title function_">getByText</span>(<span class="hljs-string">&quot;Hover&quot;</span>);
  fireEvent.<span class="hljs-title function_">mouseEnter</span>(trigger);

  <span class="hljs-comment">// Check initial state</span>
  <span class="hljs-keyword">let</span> tooltip = screen.<span class="hljs-title function_">getByRole</span>(<span class="hljs-string">&quot;tooltip&quot;</span>);
  <span class="hljs-title function_">expect</span>(tooltip).<span class="hljs-title function_">toHaveStyle</span>({ <span class="hljs-attr">opacity</span>: <span class="hljs-string">&quot;0&quot;</span> });

  <span class="hljs-comment">// Wait for delay and transition</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">1900</span>)); <span class="hljs-comment">// 1.5s delay + 0.4s transition</span>
  <span class="hljs-title function_">expect</span>(tooltip).<span class="hljs-title function_">toHaveStyle</span>({ <span class="hljs-attr">opacity</span>: <span class="hljs-string">&quot;1&quot;</span> });
});</code></pre></div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>