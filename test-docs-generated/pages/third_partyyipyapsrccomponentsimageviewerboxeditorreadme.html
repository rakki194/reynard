<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BoxEditor Components - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>BoxEditor Components</h1>
      <div class="markdown-content"><h1>BoxEditor Components</h1>
<p>The BoxEditor components provide a modular, reusable system for editing bounding<br>boxes in the YipYap application. This system extracts the complex editing logic<br>from the monolithic BoundingBoxEditor component into focused, testable<br>components.</p>
<h2>Components</h2>
<h3>ResizeEngine</h3>
<p>The ResizeEngine component provides comprehensive resize functionality for<br>bounding boxes, including:</p>
<ul>
<li><strong>Corner and edge resize handles</strong> with customizable appearance</li>
<li><strong>Proportional resizing</strong> with aspect ratio maintenance</li>
<li><strong>Size constraints</strong> with minimum and maximum dimensions</li>
<li><strong>Smooth animations</strong> and visual feedback</li>
<li><strong>Accessibility support</strong> with keyboard navigation</li>
<li><strong>Performance optimization</strong> with efficient rendering</li>
<li><strong>Fabric.js integration</strong> for smooth canvas-based editing</li>
</ul>
<h4>ResizeEngine Features</h4>
<ul>
<li><strong>Resize Handle Logic</strong>: Extracts and manages resize handle creation,<br>positioning, and interaction</li>
<li><strong>Proportional Resizing</strong>: Maintains aspect ratio during corner handle<br>resizing</li>
<li><strong>Resize Constraints</strong>: Enforces minimum and maximum size limits</li>
<li><strong>Performance Optimization</strong>: Efficient rendering and event handling</li>
</ul>
<h4>ResizeEngine Usage</h4>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ResizeEngine</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;~/components/ImageViewer/BoxEditor&#x27;</span>;

<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ResizeEngine</span>
  <span class="hljs-attr">box</span>=<span class="hljs-string">{boundingBox}</span>
  <span class="hljs-attr">imageInfo</span>=<span class="hljs-string">{imageInfo}</span>
  <span class="hljs-attr">canvas</span>=<span class="hljs-string">{fabricCanvas}</span>
  <span class="hljs-attr">onResizeStart</span>=<span class="hljs-string">{boxId</span> =&gt;</span> console.log(&#x27;Resize started:&#x27;, boxId)}
  onResizeMove={(boxId, dimensions) =&gt; console.log(&#x27;Resize move:&#x27;, dimensions)}
  onResizeEnd={(boxId, finalDimensions) =&gt;
    console.log(&#x27;Resize ended:&#x27;, finalDimensions)
  }
  onResizeCancel={boxId =&gt; console.log(&#x27;Resize cancelled:&#x27;, boxId)}
  minWidth={10}
  minHeight={10}
  maxWidth={1000}
  maxHeight={1000}
  enableProportionalResizing={true}
  enableCornerHandles={true}
  enableEdgeHandles={true}
  handleSize={8}
  handleColor=&quot;#007acc&quot;
  handleBorderColor=&quot;#ffffff&quot;
/&gt;</span>;</code></pre><h4>Props</h4>
<table>
<thead>
<tr>
<th>Prop</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>box</code></td>
<td><code>BoundingBox</code></td>
<td>-</td>
<td>The bounding box to edit</td>
</tr>
<tr>
<td><code>imageInfo</code></td>
<td><code>ImageInfo</code></td>
<td>-</td>
<td>Image information for coordinate transformation</td>
</tr>
<tr>
<td><code>canvas</code></td>
<td><code>fabric.Canvas | null</code></td>
<td>-</td>
<td>Fabric.js canvas for rendering</td>
</tr>
<tr>
<td><code>onResizeStart</code></td>
<td><code>(boxId: string) =&gt; void</code></td>
<td>-</td>
<td>Callback when resize starts</td>
</tr>
<tr>
<td><code>onResizeMove</code></td>
<td><code>(boxId: string, dimensions: Dimensions) =&gt; void</code></td>
<td>-</td>
<td>Callback during resize</td>
</tr>
<tr>
<td><code>onResizeEnd</code></td>
<td><code>(boxId: string, finalDimensions: Dimensions) =&gt; void</code></td>
<td>-</td>
<td>Callback when resize ends</td>
</tr>
<tr>
<td><code>onResizeCancel</code></td>
<td><code>(boxId: string) =&gt; void</code></td>
<td>-</td>
<td>Callback when resize is cancelled</td>
</tr>
<tr>
<td><code>minWidth</code></td>
<td><code>number</code></td>
<td><code>10</code></td>
<td>Minimum box width</td>
</tr>
<tr>
<td><code>minHeight</code></td>
<td><code>number</code></td>
<td><code>10</code></td>
<td>Minimum box height</td>
</tr>
<tr>
<td><code>maxWidth</code></td>
<td><code>number</code></td>
<td><code>imageInfo.width</code></td>
<td>Maximum box width</td>
</tr>
<tr>
<td><code>maxHeight</code></td>
<td><code>number</code></td>
<td><code>imageInfo.height</code></td>
<td>Maximum box height</td>
</tr>
<tr>
<td><code>enableProportionalResizing</code></td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Enable aspect ratio maintenance</td>
</tr>
<tr>
<td><code>enableCornerHandles</code></td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Show corner resize handles</td>
</tr>
<tr>
<td><code>enableEdgeHandles</code></td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>Show edge resize handles</td>
</tr>
<tr>
<td><code>handleSize</code></td>
<td><code>number</code></td>
<td><code>8</code></td>
<td>Size of resize handles</td>
</tr>
<tr>
<td><code>handleColor</code></td>
<td><code>string</code></td>
<td><code>&#39;#007acc&#39;</code></td>
<td>Color of resize handles</td>
</tr>
<tr>
<td><code>handleBorderColor</code></td>
<td><code>string</code></td>
<td><code>&#39;#ffffff&#39;</code></td>
<td>Border color of resize handles</td>
</tr>
</tbody></table>
<h2>Composables</h2>
<h3>useBoxResize</h3>
<p>The <code>useBoxResize</code> composable provides the core resize logic and state<br>management:</p>
<ul>
<li><strong>Resize state management</strong> with reactive signals</li>
<li><strong>Handle creation and positioning</strong> for fabric.js integration</li>
<li><strong>Constraint validation</strong> and proportional resizing</li>
<li><strong>Event handling</strong> for mouse and touch interactions</li>
<li><strong>Performance optimization</strong> with efficient updates</li>
</ul>
<h4>useBoxResize Features</h4>
<ul>
<li><strong>Resize Handle Logic</strong>: Manages resize handle creation, positioning, and<br>interaction</li>
<li><strong>Proportional Resizing</strong>: Maintains aspect ratio during corner handle<br>resizing</li>
<li><strong>Resize Constraints</strong>: Enforces minimum and maximum size limits</li>
<li><strong>Performance Optimization</strong>: Efficient rendering and event handling</li>
</ul>
<h4>useBoxResize Usage</h4>
<pre><code class="hljs language-tsx"><span class="hljs-keyword">import</span> { useBoxResize } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;~/composables/useBoxResize&#x27;</span>;

<span class="hljs-keyword">const</span> resizeEngine = <span class="hljs-title function_">useBoxResize</span>({
  <span class="hljs-attr">minWidth</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">minHeight</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">maxWidth</span>: <span class="hljs-number">1000</span>,
  <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">1000</span>,
  <span class="hljs-attr">enableProportionalResizing</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">enableCornerHandles</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">enableEdgeHandles</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">handleSize</span>: <span class="hljs-number">8</span>,
  <span class="hljs-attr">handleColor</span>: <span class="hljs-string">&#x27;#007acc&#x27;</span>,
  <span class="hljs-attr">handleBorderColor</span>: <span class="hljs-string">&#x27;#ffffff&#x27;</span>,
  <span class="hljs-attr">onResizeStart</span>: <span class="hljs-function">(<span class="hljs-params">boxId, handle</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Resize started:&#x27;</span>, boxId, handle),
  <span class="hljs-attr">onResizeMove</span>: <span class="hljs-function">(<span class="hljs-params">boxId, dimensions</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Resize move:&#x27;</span>, dimensions),
  <span class="hljs-attr">onResizeEnd</span>: <span class="hljs-function">(<span class="hljs-params">boxId, finalDimensions</span>) =&gt;</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Resize ended:&#x27;</span>, finalDimensions),
  <span class="hljs-attr">onResizeCancel</span>: <span class="hljs-function"><span class="hljs-params">boxId</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Resize cancelled:&#x27;</span>, boxId),
});</code></pre><h2>Architecture</h2>
<p>The BoxEditor system follows a modular architecture with clear separation of<br>concerns:</p>
<h3>Component Layer</h3>
<ul>
<li><strong>ResizeEngine</strong>: Main component that provides the resize interface</li>
<li><strong>Visual feedback</strong>: Resize indicators and handle styling</li>
<li><strong>Event coordination</strong>: Mouse and touch event handling</li>
</ul>
<h3>Composable Layer</h3>
<ul>
<li><strong>useBoxResize</strong>: Core resize logic and state management</li>
<li><strong>Handle management</strong>: Creation, positioning, and cleanup</li>
<li><strong>Constraint validation</strong>: Size limits and proportional resizing</li>
</ul>
<h3>Integration Layer</h3>
<ul>
<li><strong>Fabric.js integration</strong>: Canvas-based rendering and interaction</li>
<li><strong>Coordinate transformation</strong>: Image to display coordinate conversion</li>
<li><strong>Event handling</strong>: Mouse and touch event processing</li>
</ul>
<h2>Features</h2>
<h3>Resize Handle Logic</h3>
<ul>
<li><strong>Corner handles</strong>: 8 corner handles for precise resizing</li>
<li><strong>Edge handles</strong>: 4 edge handles for width/height adjustment</li>
<li><strong>Customizable appearance</strong>: Size, color, and border customization</li>
<li><strong>Position calculation</strong>: Automatic handle positioning based on box dimensions</li>
</ul>
<h3>Proportional Resizing</h3>
<ul>
<li><strong>Aspect ratio maintenance</strong>: Preserves original aspect ratio during corner<br>resizing</li>
<li><strong>Configurable behavior</strong>: Enable/disable proportional resizing</li>
<li><strong>Smart constraints</strong>: Respects size limits while maintaining proportions</li>
</ul>
<h3>Resize Constraints</h3>
<ul>
<li><strong>Minimum size</strong>: Prevents boxes from becoming too small</li>
<li><strong>Maximum size</strong>: Prevents boxes from exceeding image bounds</li>
<li><strong>Image bounds</strong>: Ensures boxes stay within image boundaries</li>
<li><strong>Validation</strong>: Real-time constraint checking during resize</li>
</ul>
<h3>Performance Optimization</h3>
<ul>
<li><strong>Efficient rendering</strong>: Minimal canvas updates during resize</li>
<li><strong>Event throttling</strong>: Optimized mouse move event handling</li>
<li><strong>Memory management</strong>: Proper cleanup of fabric.js objects</li>
<li><strong>Smooth animations</strong>: Hardware-accelerated transforms</li>
</ul>
<h2>Accessibility</h2>
<p>The BoxEditor components include comprehensive accessibility features:</p>
<ul>
<li><strong>Keyboard navigation</strong>: Full keyboard support for resize operations</li>
<li><strong>Screen reader support</strong>: ARIA labels and descriptions</li>
<li><strong>High contrast mode</strong>: Support for high contrast display preferences</li>
<li><strong>Reduced motion</strong>: Respects user&#39;s motion preferences</li>
<li><strong>Focus management</strong>: Proper focus handling during resize operations</li>
</ul>
<h2>Testing</h2>
<p>The BoxEditor components include comprehensive test coverage:</p>
<ul>
<li><strong>Unit tests</strong>: Individual component and composable testing</li>
<li><strong>Integration tests</strong>: Component interaction testing</li>
<li><strong>Accessibility tests</strong>: Screen reader and keyboard navigation testing</li>
<li><strong>Performance tests</strong>: Rendering and event handling performance</li>
<li><strong>Error handling tests</strong>: Graceful error handling and recovery</li>
</ul>
<h2>Performance Considerations</h2>
<p>The BoxEditor system is optimized for performance:</p>
<ul>
<li><strong>Efficient rendering</strong>: Minimal canvas updates during resize</li>
<li><strong>Event optimization</strong>: Throttled mouse move events</li>
<li><strong>Memory management</strong>: Proper cleanup of fabric.js objects</li>
<li><strong>Smooth animations</strong>: Hardware-accelerated CSS transforms</li>
<li><strong>Lazy loading</strong>: Components load only when needed</li>
</ul>
<h2>Browser Support</h2>
<p>The BoxEditor components support modern browsers with the following features:</p>
<ul>
<li><strong>ES6+</strong>: Modern JavaScript features</li>
<li><strong>CSS Grid/Flexbox</strong>: Modern layout systems</li>
<li><strong>CSS Custom Properties</strong>: Theme-aware styling</li>
<li><strong>Pointer Events</strong>: Touch and mouse interaction</li>
<li><strong>Canvas API</strong>: Fabric.js rendering</li>
</ul>
<h2>Future Enhancements</h2>
<p>Planned enhancements for the BoxEditor system:</p>
<ul>
<li><strong>Move Engine</strong>: Dedicated component for box movement</li>
<li><strong>Transform Engine</strong>: Rotation and scaling functionality</li>
<li><strong>Multi-select</strong>: Editing multiple boxes simultaneously</li>
<li><strong>Undo/Redo</strong>: History management for edit operations</li>
<li><strong>Export/Import</strong>: Box data serialization</li>
<li><strong>Validation Engine</strong>: Advanced validation rules</li>
<li><strong>Coordination Component</strong>: Component interaction management</li>
</ul>
<h2>Contributing</h2>
<p>When contributing to the BoxEditor components:</p>
<ol>
<li><strong>Follow the architecture</strong>: Maintain separation of concerns</li>
<li><strong>Write tests</strong>: Ensure comprehensive test coverage</li>
<li><strong>Document changes</strong>: Update documentation for new features</li>
<li><strong>Consider accessibility</strong>: Ensure features are accessible</li>
<li><strong>Optimize performance</strong>: Consider rendering and interaction performance</li>
<li><strong>Follow patterns</strong>: Use established component patterns</li>
</ol>
<h2>Related Components</h2>
<ul>
<li><strong>BoxCreator</strong>: Components for creating new bounding boxes</li>
<li><strong>BoundingBoxEditor</strong>: Original monolithic component (being refactored)</li>
<li><strong>ImageViewer</strong>: Main image viewing and interaction component</li>
<li><strong>useBoundingBoxes</strong>: Bounding box state management composable</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>