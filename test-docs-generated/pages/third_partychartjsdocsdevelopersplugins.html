<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plugins - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Plugins</h1>
      <div class="markdown-content"><h1>Plugins</h1>
<p>Plugins are the most efficient way to customize or change the default behavior of a chart. They have been introduced at <a href="https://github.com/chartjs/Chart.js/releases/tag/2.1.0">version 2.1.0</a> (global plugins only) and extended at <a href="https://github.com/chartjs/Chart.js/releases/tag/v2.5.0">version 2.5.0</a> (per chart plugins and options).</p>
<h2>Using plugins</h2>
<p>Plugins can be shared between chart instances:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> plugin = { <span class="hljs-comment">/* plugin implementation */</span> };

<span class="hljs-comment">// chart1 and chart2 use &quot;plugin&quot;</span>
<span class="hljs-keyword">const</span> chart1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">plugins</span>: [plugin]
});

<span class="hljs-keyword">const</span> chart2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">plugins</span>: [plugin]
});

<span class="hljs-comment">// chart3 doesn&#x27;t use &quot;plugin&quot;</span>
<span class="hljs-keyword">const</span> chart3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {});</code></pre><p>Plugins can also be defined directly in the chart <code>plugins</code> config (a.k.a. <em>inline plugins</em>):</p>
<p>:::warning<br><em>inline</em> plugins are not registered. Some plugins require registering, i.e. can&#39;t be used <em>inline</em>.<br>:::</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">plugins</span>: [{
        <span class="hljs-attr">beforeInit</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">chart, args, options</span>) {
            <span class="hljs-comment">//..</span>
        }
    }]
});</code></pre><p>However, this approach is not ideal when the customization needs to apply to many charts.</p>
<h2>Global plugins</h2>
<p>Plugins can be registered globally to be applied on all charts (a.k.a. <em>global plugins</em>):</p>
<pre><code class="hljs language-javascript"><span class="hljs-title class_">Chart</span>.<span class="hljs-title function_">register</span>({
    <span class="hljs-comment">// plugin implementation</span>
});</code></pre><p>:::warning<br><em>inline</em> plugins can&#39;t be registered globally.<br>:::</p>
<h2>Configuration</h2>
<h3>Plugin ID</h3>
<p>Plugins must define a unique id in order to be configurable.</p>
<p>This id should follow the <a href="https://docs.npmjs.com/files/package.json#name">npm package name convention</a>:</p>
<ul>
<li>can&#39;t start with a dot or an underscore</li>
<li>can&#39;t contain any non-URL-safe characters</li>
<li>can&#39;t contain uppercase letters</li>
<li>should be something short, but also reasonably descriptive</li>
</ul>
<p>If a plugin is intended to be released publicly, you may want to check the <a href="https://www.npmjs.com/search?q=chartjs-plugin-">registry</a> to see if there&#39;s something by that name already. Note that in this case, the package name should be prefixed by <code>chartjs-plugin-</code> to appear in Chart.js plugin registry.</p>
<h3>Plugin options</h3>
<p>Plugin options are located under the <code>options.plugins</code> config and are scoped by the plugin ID: <code>options.plugins.{plugin-id}</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">foo</span>: { ... },           <span class="hljs-comment">// chart &#x27;foo&#x27; option</span>
        <span class="hljs-attr">plugins</span>: {
            <span class="hljs-attr">p1</span>: {
                <span class="hljs-attr">foo</span>: { ... },   <span class="hljs-comment">// p1 plugin &#x27;foo&#x27; option</span>
                <span class="hljs-attr">bar</span>: { ... }
            },
            <span class="hljs-attr">p2</span>: {
                <span class="hljs-attr">foo</span>: { ... },   <span class="hljs-comment">// p2 plugin &#x27;foo&#x27; option</span>
                <span class="hljs-attr">bla</span>: { ... }
            }
        }
    }
});</code></pre><h4>Disable plugins</h4>
<p>To disable a global plugin for a specific chart instance, the plugin options must be set to <code>false</code>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-title class_">Chart</span>.<span class="hljs-title function_">register</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;p1&#x27;</span>,
    <span class="hljs-comment">// ...</span>
});

<span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">plugins</span>: {
            <span class="hljs-attr">p1</span>: <span class="hljs-literal">false</span>   <span class="hljs-comment">// disable plugin &#x27;p1&#x27; for this instance</span>
        }
    }
});</code></pre><p>To disable all plugins for a specific chart instance, set <code>options.plugins</code> to <code>false</code>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">plugins</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// all plugins are disabled for this instance</span>
    }
});</code></pre><h4>Plugin defaults</h4>
<p>You can set default values for your plugin options in the <code>defaults</code> entry of your plugin object. In the example below the canvas will always have a lightgreen backgroundColor unless the user overrides this option in <code>options.plugins.custom_canvas_background_color.color</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> plugin = {
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;custom_canvas_background_color&#x27;</span>,
    <span class="hljs-attr">beforeDraw</span>: <span class="hljs-function">(<span class="hljs-params">chart, args, options</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> {ctx} = chart;
        ctx.<span class="hljs-title function_">save</span>();
        ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">&#x27;destination-over&#x27;</span>;
        ctx.<span class="hljs-property">fillStyle</span> = options.<span class="hljs-property">color</span>;
        ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, chart.<span class="hljs-property">width</span>, chart.<span class="hljs-property">height</span>);
        ctx.<span class="hljs-title function_">restore</span>();
    },
    <span class="hljs-attr">defaults</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;lightGreen&#x27;</span>
    }
}</code></pre><h2>Plugin Core API</h2>
<p>Read more about the <a href="../api/interfaces/Plugin">existing plugin extension hooks</a>.</p>
<h3>Chart Initialization</h3>
<p>Plugins are notified during the initialization process. These hooks can be used to set up data needed for the plugin to operate.</p>
<p><img src="./init_flowchart.png" alt="Chart.js init flowchart"></p>
<h3>Chart Update</h3>
<p>Plugins are notified throughout the update process.</p>
<p><img src="./update_flowchart.png" alt="Chart.js update flowchart"></p>
<h3>Scale Update</h3>
<p>Plugins are notified throughout the scale update process.</p>
<p><img src="./scale_flowchart.png" alt="Chart.js scale update flowchart"></p>
<h3>Rendering</h3>
<p>Plugins can interact with the chart throughout the render process. The rendering process is documented in the flowchart below. Each of the green processes is a plugin notification. The red lines indicate how cancelling part of the render process can occur when a plugin returns <code>false</code> from a hook. Not all hooks are cancelable, however, in general most <code>before*</code> hooks can be cancelled.</p>
<p><img src="./render_flowchart.png" alt="Chart.js render pipeline flowchart"></p>
<h3>Event Handling</h3>
<p>Plugins can interact with the chart during the event handling process. The event handling flow is documented in the flowchart below. Each of the green processes is a plugin notification. If a plugin makes changes that require a re-render, the plugin can set <code>args.changed</code> to <code>true</code> to indicate that a render is needed. The built-in tooltip plugin uses this method to indicate when the tooltip has changed.</p>
<p><img src="./event_flowchart.png" alt="Chart.js event handling flowchart"></p>
<h3>Chart destroy</h3>
<p>Plugins are notified during the destroy process. These hooks can be used to destroy things that the plugin made and used during its life.<br>The <code>destroy</code> hook has been deprecated since Chart.js version 3.7.0, use the <code>afterDestroy</code> hook instead.</p>
<p><img src="./destroy_flowchart.png" alt="Chart.js destroy flowchart"></p>
<h2>TypeScript Typings</h2>
<p>If you want your plugin to be statically typed, you must provide a <code>.d.ts</code> TypeScript declaration file. Chart.js provides a way to augment built-in types with user-defined ones, by using the concept of &quot;declaration merging&quot;.</p>
<p>When adding a plugin, <code>PluginOptionsByType</code> must contain the declarations for the plugin.</p>
<p>For example, to provide typings for the <a href="../configuration/canvas-background.md"><code>canvas backgroundColor plugin</code></a>, you would add a <code>.d.ts</code> containing:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChartType</span>, <span class="hljs-title class_">Plugin</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;chart.js&#x27;</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;chart.js&#x27;</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PluginOptionsByType</span>&lt;<span class="hljs-title class_">TType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ChartType</span>&gt; {
    <span class="hljs-attr">customCanvasBackgroundColor</span>?: {
      <span class="hljs-attr">color</span>?: <span class="hljs-built_in">string</span>
    }
  }
}</code></pre></div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>