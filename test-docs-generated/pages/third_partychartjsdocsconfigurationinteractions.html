<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactions - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Interactions</h1>
      <div class="markdown-content"><h1>Interactions</h1>
<p>Namespace: <code>options.interaction</code>, the global interaction configuration is at <code>Chart.defaults.interaction</code>. To configure which events trigger chart interactions, see <a href="#events">events</a>.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>mode</code></td>
<td><code>string</code></td>
<td><code>&#39;nearest&#39;</code></td>
<td>Sets which elements appear in the interaction. See <a href="#modes">Interaction Modes</a> for details.</td>
</tr>
<tr>
<td><code>intersect</code></td>
<td><code>boolean</code></td>
<td><code>true</code></td>
<td>if true, the interaction mode only applies when the mouse position intersects an item on the chart.</td>
</tr>
<tr>
<td><code>axis</code></td>
<td><code>string</code></td>
<td><code>&#39;x&#39;</code></td>
<td>Can be set to <code>&#39;x&#39;</code>, <code>&#39;y&#39;</code>, <code>&#39;xy&#39;</code> or <code>&#39;r&#39;</code> to define which directions are used in calculating distances. Defaults to <code>&#39;x&#39;</code> for <code>&#39;index&#39;</code> mode and <code>&#39;xy&#39;</code> in <code>dataset</code> and <code>&#39;nearest&#39;</code> modes.</td>
</tr>
<tr>
<td><code>includeInvisible</code></td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>if true, the invisible points that are outside of the chart area will also be included when evaluating interactions.</td>
</tr>
</tbody></table>
<p>By default, these options apply to both the hover and tooltip interactions. The same options can be set in the <code>options.hover</code> namespace, in which case they will only affect the hover interaction. Similarly, the options can be set in the <code>options.plugins.tooltip</code> namespace to independently configure the tooltip interactions.</p>
<h2>Events</h2>
<p>The following properties define how the chart interacts with events.<br>Namespace: <code>options</code></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>events</code></td>
<td><code>string[]</code></td>
<td><code>[&#39;mousemove&#39;, &#39;mouseout&#39;, &#39;click&#39;, &#39;touchstart&#39;, &#39;touchmove&#39;]</code></td>
<td>The <code>events</code> option defines the browser events that the chart should listen to for. Each of these events trigger hover and are passed to plugins. <a href="#event-option">more...</a></td>
</tr>
<tr>
<td><code>onHover</code></td>
<td><code>function</code></td>
<td><code>null</code></td>
<td>Called when any of the events fire over chartArea. Passed the event, an array of active elements (bars, points, etc), and the chart.</td>
</tr>
<tr>
<td><code>onClick</code></td>
<td><code>function</code></td>
<td><code>null</code></td>
<td>Called if the event is of type <code>&#39;mouseup&#39;</code>, <code>&#39;click&#39;</code> or &#39;<code>&#39;contextmenu&#39;</code> over chartArea. Passed the event, an array of active elements, and the chart.</td>
</tr>
</tbody></table>
<h3>Event Option</h3>
<p>For example, to have the chart only respond to click events, you could do:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
  <span class="hljs-attr">data</span>: data,
  <span class="hljs-attr">options</span>: {
    <span class="hljs-comment">// This chart will not respond to mousemove, etc</span>
    <span class="hljs-attr">events</span>: [<span class="hljs-string">&#x27;click&#x27;</span>]
  }
});</code></pre><p>Events for each plugin can be further limited by defining (allowed) events array in plugin options:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
  <span class="hljs-attr">data</span>: data,
  <span class="hljs-attr">options</span>: {
    <span class="hljs-comment">// All of these (default) events trigger a hover and are passed to all plugins,</span>
    <span class="hljs-comment">// unless limited at plugin options</span>
    <span class="hljs-attr">events</span>: [<span class="hljs-string">&#x27;mousemove&#x27;</span>, <span class="hljs-string">&#x27;mouseout&#x27;</span>, <span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;touchstart&#x27;</span>, <span class="hljs-string">&#x27;touchmove&#x27;</span>],
    <span class="hljs-attr">plugins</span>: {
      <span class="hljs-attr">tooltip</span>: {
        <span class="hljs-comment">// Tooltip will only receive click events</span>
        <span class="hljs-attr">events</span>: [<span class="hljs-string">&#x27;click&#x27;</span>]
      }
    }
  }
});</code></pre><p>Events that do not fire over chartArea, like <code>mouseout</code>, can be captured using a simple plugin:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
  <span class="hljs-attr">data</span>: data,
  <span class="hljs-attr">options</span>: {
    <span class="hljs-comment">// these are the default events:</span>
    <span class="hljs-comment">// events: [&#x27;mousemove&#x27;, &#x27;mouseout&#x27;, &#x27;click&#x27;, &#x27;touchstart&#x27;, &#x27;touchmove&#x27;],</span>
  },
  <span class="hljs-attr">plugins</span>: [{
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;myEventCatcher&#x27;</span>,
    <span class="hljs-title function_">beforeEvent</span>(<span class="hljs-params">chart, args, pluginOptions</span>) {
      <span class="hljs-keyword">const</span> event = args.<span class="hljs-property">event</span>;
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;mouseout&#x27;</span>) {
        <span class="hljs-comment">// process the event</span>
      }
    }
  }]
});</code></pre><p>For more information about plugins, see <a href="../developers/plugins.md">Plugins</a></p>
<h3>Converting Events to Data Values</h3>
<p>A common occurrence is taking an event, such as a click, and finding the data coordinates on the chart where the event occurred. Chart.js provides helpers that make this a straightforward process.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">onClick</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> canvasPosition = <span class="hljs-title class_">Chart</span>.<span class="hljs-property">helpers</span>.<span class="hljs-title function_">getRelativePosition</span>(e, chart);

            <span class="hljs-comment">// Substitute the appropriate scale IDs</span>
            <span class="hljs-keyword">const</span> dataX = chart.<span class="hljs-property">scales</span>.<span class="hljs-property">x</span>.<span class="hljs-title function_">getValueForPixel</span>(canvasPosition.<span class="hljs-property">x</span>);
            <span class="hljs-keyword">const</span> dataY = chart.<span class="hljs-property">scales</span>.<span class="hljs-property">y</span>.<span class="hljs-title function_">getValueForPixel</span>(canvasPosition.<span class="hljs-property">y</span>);
        }
    }
});</code></pre><p>When using a bundler, the helper functions have to be imported separately, for a full explanation of this please head over to the <a href="../getting-started/integration.md#helper-functions">integration</a> page</p>
<h2>Modes</h2>
<p>When configuring the interaction with the graph via <code>interaction</code>, <code>hover</code> or <code>tooltips</code>, a number of different modes are available.</p>
<p><code>options.hover</code> and <code>options.plugins.tooltip</code> extend from <code>options.interaction</code>. So if <code>mode</code>, <code>intersect</code> or any other common settings are configured only in <code>options.interaction</code>, both hover and tooltips obey that.</p>
<p>The modes are detailed below and how they behave in conjunction with the <code>intersect</code> setting.</p>
<p>See how different modes work with the tooltip in <a href="../samples/tooltip/interactions.md">tooltip interactions sample</a></p>
<h3>point</h3>
<p>Finds all of the items that intersect the point.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;point&#x27;</span>
        }
    }
});</code></pre><h3>nearest</h3>
<p>Gets the items that are at the nearest distance to the point. The nearest item is determined based on the distance to the center of the chart item (point, bar). You can use the <code>axis</code> setting to define which coordinates are considered in distance calculation. If <code>intersect</code> is true, this is only triggered when the mouse position intersects an item in the graph. This is very useful for combo charts where points are hidden behind bars.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;nearest&#x27;</span>
        }
    }
});</code></pre><h3>index</h3>
<p>Finds item at the same index. If the <code>intersect</code> setting is true, the first intersecting item is used to determine the index in the data. If <code>intersect</code> false the nearest item, in the x direction, is used to determine the index.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;index&#x27;</span>
        }
    }
});</code></pre><p>To use index mode in a chart like the horizontal bar chart, where we search along the y direction, you can use the <code>axis</code> setting introduced in v2.7.0. By setting this value to <code>&#39;y&#39;</code> on the y direction is used.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;bar&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;index&#x27;</span>,
            <span class="hljs-attr">axis</span>: <span class="hljs-string">&#x27;y&#x27;</span>
        }
    }
});</code></pre><h3>dataset</h3>
<p>Finds items in the same dataset. If the <code>intersect</code> setting is true, the first intersecting item is used to determine the index in the data. If <code>intersect</code> false the nearest item is used to determine the index.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;dataset&#x27;</span>
        }
    }
});</code></pre><h3>x</h3>
<p>Returns all items that would intersect based on the <code>X</code> coordinate of the position only. Would be useful for a vertical cursor implementation. Note that this only applies to cartesian charts.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;x&#x27;</span>
        }
    }
});</code></pre><h3>y</h3>
<p>Returns all items that would intersect based on the <code>Y</code> coordinate of the position. This would be useful for a horizontal cursor implementation. Note that this only applies to cartesian charts.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;y&#x27;</span>
        }
    }
});</code></pre><h2>Custom Interaction Modes</h2>
<p>New modes can be defined by adding functions to the <code>Chart.Interaction.modes</code> map.  You can use the <code>Chart.Interaction.evaluateInteractionItems</code> function to help implement these.</p>
<p>Example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Interaction</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;chart.js&#x27;</span>;
<span class="hljs-keyword">import</span> { getRelativePosition } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;chart.js/helpers&#x27;</span>;

<span class="hljs-comment">/**
 * Custom interaction mode
 * <span class="hljs-doctag">@function</span> Interaction.modes.myCustomMode
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Chart</span>} <span class="hljs-variable">chart</span> - the chart we are returning items from
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Event</span>} <span class="hljs-variable">e</span> - the event we are find things at
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">InteractionOptions</span>} <span class="hljs-variable">options</span> - options to use
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} [useFinalPosition] - use final element position (animation target)
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">InteractionItem[]</span>} - items that are found
 */</span>
<span class="hljs-title class_">Interaction</span>.<span class="hljs-property">modes</span>.<span class="hljs-property">myCustomMode</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">chart, e, options, useFinalPosition</span>) {
  <span class="hljs-keyword">const</span> position = <span class="hljs-title function_">getRelativePosition</span>(e, chart);

  <span class="hljs-keyword">const</span> items = [];
  <span class="hljs-title class_">Interaction</span>.<span class="hljs-title function_">evaluateInteractionItems</span>(chart, <span class="hljs-string">&#x27;x&#x27;</span>, position, <span class="hljs-function">(<span class="hljs-params">element, datasetIndex, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (element.<span class="hljs-title function_">inXRange</span>(position.<span class="hljs-property">x</span>, useFinalPosition) &amp;&amp; <span class="hljs-title function_">myCustomLogic</span>(element)) {
      items.<span class="hljs-title function_">push</span>({element, datasetIndex, index});
    }
  });
  <span class="hljs-keyword">return</span> items;
};

<span class="hljs-comment">// Then, to use it...</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>.<span class="hljs-title function_">js</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">interaction</span>: {
            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;myCustomMode&#x27;</span>
        }
    }
})</code></pre><p>If you&#39;re using TypeScript, you&#39;ll also need to register the new mode:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;chart.js&#x27;</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InteractionModeMap</span> {
    <span class="hljs-attr">myCustomMode</span>: <span class="hljs-title class_">InteractionModeFunction</span>;
  }
}</code></pre></div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>