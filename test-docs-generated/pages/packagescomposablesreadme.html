<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>reynard-composables - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>reynard-composables</h1>
      <div class="markdown-content"><h1>reynard-composables</h1>
<p>Reusable SolidJS composables extracted and refined from the yipyap codebase. This package provides a collection of high-quality, modular composables for common application patterns.</p>
<h2>Features</h2>
<ul>
<li><strong>State Management</strong>: Authentication, service management, and reactive state</li>
<li><strong>UI Interactions</strong>: Drag and drop, file uploads, and user interactions</li>
<li><strong>Performance Monitoring</strong>: Comprehensive performance tracking and debugging</li>
<li><strong>AI/RAG Integration</strong>: Retrieval-Augmented Generation client and utilities</li>
<li><strong>File Handling</strong>: Upload management with progress tracking</li>
<li><strong>Storage</strong>: Local and session storage with cross-tab synchronization</li>
</ul>
<h2>Installation</h2>
<pre><code class="hljs language-bash">npm install reynard-composables</code></pre><h2>Usage</h2>
<h3>Authentication</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useAuthFetch, createAuthFetch } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-comment">// With SolidJS context</span>
<span class="hljs-keyword">const</span> authFetch = <span class="hljs-title function_">useAuthFetch</span>({
  <span class="hljs-attr">logout</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Logged out&quot;</span>),
  <span class="hljs-attr">notify</span>: <span class="hljs-function">(<span class="hljs-params">message, <span class="hljs-keyword">type</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message, <span class="hljs-keyword">type</span>),
  <span class="hljs-attr">navigate</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = path),
});

<span class="hljs-comment">// Standalone usage</span>
<span class="hljs-keyword">const</span> { authFetch } = <span class="hljs-title function_">createAuthFetch</span>({
  <span class="hljs-attr">logout</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Logged out&quot;</span>),
  <span class="hljs-attr">notify</span>: <span class="hljs-function">(<span class="hljs-params">message, <span class="hljs-keyword">type</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message, <span class="hljs-keyword">type</span>),
});

<span class="hljs-comment">// Use authenticated fetch</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">authFetch</span>(<span class="hljs-string">&quot;/api/protected-endpoint&quot;</span>);</code></pre><h3>Service Management</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useServiceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-keyword">const</span> serviceManager = <span class="hljs-title function_">useServiceManager</span>({
  <span class="hljs-attr">authFetch</span>: myAuthFetch,
  <span class="hljs-attr">notify</span>: <span class="hljs-function">(<span class="hljs-params">message, <span class="hljs-keyword">type</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message, <span class="hljs-keyword">type</span>),
  <span class="hljs-attr">websocketUrl</span>: <span class="hljs-string">&quot;ws://localhost:8080/services&quot;</span>,
  <span class="hljs-attr">refreshInterval</span>: <span class="hljs-number">30000</span>,
});

<span class="hljs-comment">// Access service state</span>
<span class="hljs-keyword">const</span> services = serviceManager.<span class="hljs-title function_">services</span>();
<span class="hljs-keyword">const</span> summary = serviceManager.<span class="hljs-title function_">summary</span>();

<span class="hljs-comment">// Manage services</span>
<span class="hljs-keyword">await</span> serviceManager.<span class="hljs-title function_">restartService</span>(<span class="hljs-string">&quot;my-service&quot;</span>);
<span class="hljs-keyword">await</span> serviceManager.<span class="hljs-title function_">refreshStatus</span>();</code></pre><h3>Drag and Drop</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useDragAndDrop } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-keyword">const</span> { isMoving } = <span class="hljs-title function_">useDragAndDrop</span>({
  <span class="hljs-attr">onDragStateChange</span>: <span class="hljs-function">(<span class="hljs-params">isDragging</span>) =&gt;</span> {
    <span class="hljs-title function_">setShowDropOverlay</span>(isDragging);
  },
  <span class="hljs-attr">onFilesDropped</span>: <span class="hljs-title function_">async</span> (files) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Files dropped:&quot;</span>, files);
  },
  <span class="hljs-attr">onItemsDropped</span>: <span class="hljs-title function_">async</span> (items, targetPath) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Items moved to:&quot;</span>, targetPath);
  },
  <span class="hljs-attr">maxFileSize</span>: <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// 50MB</span>
  <span class="hljs-attr">allowedFileTypes</span>: [<span class="hljs-string">&quot;jpg&quot;</span>, <span class="hljs-string">&quot;png&quot;</span>, <span class="hljs-string">&quot;pdf&quot;</span>],
  <span class="hljs-attr">uploadFiles</span>: <span class="hljs-title function_">async</span> (files) =&gt; {
    <span class="hljs-comment">// Handle file upload</span>
  },
  <span class="hljs-attr">moveItems</span>: <span class="hljs-title function_">async</span> (items, sourcePath, targetPath) =&gt; {
    <span class="hljs-comment">// Handle item movement</span>
  },
});</code></pre><h3>Performance Monitoring</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { usePerformanceMonitor } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-keyword">const</span> monitor = <span class="hljs-title function_">usePerformanceMonitor</span>({
  <span class="hljs-attr">thresholds</span>: {
    <span class="hljs-attr">criticalOperationTime</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-attr">highOperationTime</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">criticalMemoryUsage</span>: <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,
  },
});

<span class="hljs-comment">// Start profiling</span>
monitor.<span class="hljs-title function_">startProfiling</span>(<span class="hljs-string">&quot;data-processing&quot;</span>, <span class="hljs-number">10000</span>);

<span class="hljs-comment">// Record operations</span>
monitor.<span class="hljs-title function_">recordDOMUpdate</span>(<span class="hljs-string">&quot;list-render&quot;</span>, <span class="hljs-number">45</span>);
monitor.<span class="hljs-title function_">recordStyleApplication</span>(<span class="hljs-number">100</span>, <span class="hljs-number">12</span>);

<span class="hljs-comment">// End profiling and get results</span>
<span class="hljs-keyword">const</span> metrics = monitor.<span class="hljs-title function_">endProfiling</span>();
monitor.<span class="hljs-title function_">logPerformanceReport</span>();</code></pre><h3>RAG (Retrieval-Augmented Generation)</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useRAG, createRAGClient } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-comment">// With SolidJS reactivity</span>
<span class="hljs-keyword">const</span> rag = <span class="hljs-title function_">useRAG</span>({
  <span class="hljs-attr">authFetch</span>: myAuthFetch,
  <span class="hljs-attr">configUrl</span>: <span class="hljs-string">&quot;/api/config&quot;</span>,
  <span class="hljs-attr">queryUrl</span>: <span class="hljs-string">&quot;/api/rag/query&quot;</span>,
});

<span class="hljs-comment">// Create search resource</span>
<span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> searchResults = rag.<span class="hljs-title function_">createRAGSearchResource</span>(searchParams);

<span class="hljs-comment">// Query RAG</span>
<span class="hljs-title function_">setSearchParams</span>({ <span class="hljs-attr">q</span>: <span class="hljs-string">&quot;search query&quot;</span>, <span class="hljs-attr">modality</span>: <span class="hljs-string">&quot;docs&quot;</span>, <span class="hljs-attr">topK</span>: <span class="hljs-number">10</span> });

<span class="hljs-comment">// Ingest documents</span>
<span class="hljs-keyword">await</span> rag.<span class="hljs-title function_">ingestDocuments</span>(
  [{ <span class="hljs-attr">source</span>: <span class="hljs-string">&quot;document.pdf&quot;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;Document content...&quot;</span> }],
  <span class="hljs-string">&quot;text-model&quot;</span>,
  <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ingest progress:&quot;</span>, event);
  },
);</code></pre><h3>File Upload</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useFileUpload } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-keyword">const</span> { uploadFiles, uploadProgress, isUploading, validateFile } =
  <span class="hljs-title function_">useFileUpload</span>({
    <span class="hljs-attr">maxFileSize</span>: <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// 100MB</span>
    <span class="hljs-attr">allowedFileTypes</span>: [<span class="hljs-string">&quot;jpg&quot;</span>, <span class="hljs-string">&quot;png&quot;</span>, <span class="hljs-string">&quot;pdf&quot;</span>, <span class="hljs-string">&quot;docx&quot;</span>],
    <span class="hljs-attr">maxFiles</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">uploadUrl</span>: <span class="hljs-string">&quot;/api/upload&quot;</span>,
    <span class="hljs-attr">authFetch</span>: myAuthFetch,
    <span class="hljs-attr">onProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Upload progress:&quot;</span>, progress),
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Upload successful:&quot;</span>, response),
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;Upload failed:&quot;</span>, error),
  });

<span class="hljs-comment">// Upload files</span>
<span class="hljs-keyword">const</span> files = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input[type=&quot;file&quot;]&#x27;</span>).<span class="hljs-property">files</span>;
<span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadFiles</span>(files);

<span class="hljs-comment">// Check upload progress</span>
<span class="hljs-keyword">const</span> progress = <span class="hljs-title function_">uploadProgress</span>();</code></pre><h3>Storage</h3>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { useLocalStorage, useSessionStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;reynard-composables&quot;</span>;

<span class="hljs-comment">// Local storage with cross-tab sync</span>
<span class="hljs-keyword">const</span> [user, setUser, removeUser] = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">&quot;user&quot;</span>, {
  <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">syncAcrossTabs</span>: <span class="hljs-literal">true</span>,
});

<span class="hljs-comment">// Session storage</span>
<span class="hljs-keyword">const</span> [tempData, setTempData, removeTempData] = <span class="hljs-title function_">useSessionStorage</span>(<span class="hljs-string">&quot;temp&quot;</span>, {
  <span class="hljs-attr">defaultValue</span>: {},
});

<span class="hljs-comment">// Use the storage</span>
<span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;John&quot;</span> });
<span class="hljs-title function_">setTempData</span>({ <span class="hljs-attr">formData</span>: <span class="hljs-string">&quot;draft content&quot;</span> });</code></pre><h2>API Reference</h2>
<h3>State Management</h3>
<ul>
<li><code>useAuthFetch(options, isLoggedIn?)</code> - Authenticated fetch with token refresh</li>
<li><code>createAuthFetch(options)</code> - Standalone auth fetch factory</li>
<li><code>useServiceManager(options)</code> - Service monitoring and management</li>
</ul>
<h3>UI</h3>
<ul>
<li><code>useDragAndDrop(options)</code> - Drag and drop file upload and item movement</li>
</ul>
<h3>Performance</h3>
<ul>
<li><code>usePerformanceMonitor(options?)</code> - Performance monitoring and debugging</li>
</ul>
<h3>AI/RAG</h3>
<ul>
<li><code>useRAG(options)</code> - RAG client with reactive resources</li>
<li><code>createRAGClient(options)</code> - Standalone RAG client factory</li>
</ul>
<h3>File Handling</h3>
<ul>
<li><code>useFileUpload(options?)</code> - File upload with progress tracking</li>
</ul>
<h3>Storage</h3>
<ul>
<li><code>useLocalStorage(key, options?)</code> - Reactive local storage</li>
<li><code>useSessionStorage(key, options?)</code> - Reactive session storage</li>
</ul>
<h2>TypeScript Support</h2>
<p>This package is written in TypeScript and provides full type definitions for all composables and their options.</p>
<h2>Contributing</h2>
<p>This package is part of the Reynard framework. When contributing:</p>
<ol>
<li>Ensure composables are truly reusable and not tied to specific applications</li>
<li>Provide comprehensive TypeScript types</li>
<li>Include proper error handling and validation</li>
<li>Add JSDoc comments for better developer experience</li>
<li>Test composables in isolation</li>
</ol>
<h2>License</h2>
<p>MIT</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>