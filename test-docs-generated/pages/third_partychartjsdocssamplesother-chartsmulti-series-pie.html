<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi Series Pie - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Multi Series Pie</h1>
      <div class="markdown-content"><h1>Multi Series Pie</h1>
<pre><code class="hljs"><span class="hljs-comment">// &lt;block:setup:1&gt;</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DATA_COUNT</span> = <span class="hljs-number">5</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NUMBER_CFG</span> = {<span class="hljs-attr">count</span>: <span class="hljs-variable constant_">DATA_COUNT</span>, <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">100</span>};

<span class="hljs-keyword">const</span> labels = <span class="hljs-title class_">Utils</span>.<span class="hljs-title function_">months</span>({<span class="hljs-attr">count</span>: <span class="hljs-number">7</span>});
<span class="hljs-keyword">const</span> data = {
  <span class="hljs-attr">labels</span>: [<span class="hljs-string">&#x27;Overall Yay&#x27;</span>, <span class="hljs-string">&#x27;Overall Nay&#x27;</span>, <span class="hljs-string">&#x27;Group A Yay&#x27;</span>, <span class="hljs-string">&#x27;Group A Nay&#x27;</span>, <span class="hljs-string">&#x27;Group B Yay&#x27;</span>, <span class="hljs-string">&#x27;Group B Nay&#x27;</span>, <span class="hljs-string">&#x27;Group C Yay&#x27;</span>, <span class="hljs-string">&#x27;Group C Nay&#x27;</span>],
  <span class="hljs-attr">datasets</span>: [
    {
      <span class="hljs-attr">backgroundColor</span>: [<span class="hljs-string">&#x27;#AAA&#x27;</span>, <span class="hljs-string">&#x27;#777&#x27;</span>],
      <span class="hljs-attr">data</span>: [<span class="hljs-number">21</span>, <span class="hljs-number">79</span>]
    },
    {
      <span class="hljs-attr">backgroundColor</span>: [<span class="hljs-string">&#x27;hsl(0, 100%, 60%)&#x27;</span>, <span class="hljs-string">&#x27;hsl(0, 100%, 35%)&#x27;</span>],
      <span class="hljs-attr">data</span>: [<span class="hljs-number">33</span>, <span class="hljs-number">67</span>]
    },
    {
      <span class="hljs-attr">backgroundColor</span>: [<span class="hljs-string">&#x27;hsl(100, 100%, 60%)&#x27;</span>, <span class="hljs-string">&#x27;hsl(100, 100%, 35%)&#x27;</span>],
      <span class="hljs-attr">data</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">80</span>]
    },
    {
      <span class="hljs-attr">backgroundColor</span>: [<span class="hljs-string">&#x27;hsl(180, 100%, 60%)&#x27;</span>, <span class="hljs-string">&#x27;hsl(180, 100%, 35%)&#x27;</span>],
      <span class="hljs-attr">data</span>: [<span class="hljs-number">10</span>, <span class="hljs-number">90</span>]
    }
  ]
};
<span class="hljs-comment">// &lt;/block:setup&gt;</span>

<span class="hljs-comment">// &lt;block:config:0&gt;</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;pie&#x27;</span>,
  <span class="hljs-attr">data</span>: data,
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">responsive</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">plugins</span>: {
      <span class="hljs-attr">legend</span>: {
        <span class="hljs-attr">labels</span>: {
          <span class="hljs-attr">generateLabels</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">chart</span>) {
            <span class="hljs-comment">// Get the default label list</span>
            <span class="hljs-keyword">const</span> original = <span class="hljs-title class_">Chart</span>.<span class="hljs-property">overrides</span>.<span class="hljs-property">pie</span>.<span class="hljs-property">plugins</span>.<span class="hljs-property">legend</span>.<span class="hljs-property">labels</span>.<span class="hljs-property">generateLabels</span>;
            <span class="hljs-keyword">const</span> labelsOriginal = original.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, chart);

            <span class="hljs-comment">// Build an array of colors used in the datasets of the chart</span>
            <span class="hljs-keyword">let</span> datasetColors = chart.<span class="hljs-property">data</span>.<span class="hljs-property">datasets</span>.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
              <span class="hljs-keyword">return</span> e.<span class="hljs-property">backgroundColor</span>;
            });
            datasetColors = datasetColors.<span class="hljs-title function_">flat</span>();

            <span class="hljs-comment">// Modify the color and hide state of each label</span>
            labelsOriginal.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">label</span> =&gt;</span> {
              <span class="hljs-comment">// There are twice as many labels as there are datasets. This converts the label index into the corresponding dataset index</span>
              label.<span class="hljs-property">datasetIndex</span> = (label.<span class="hljs-property">index</span> - label.<span class="hljs-property">index</span> % <span class="hljs-number">2</span>) / <span class="hljs-number">2</span>;

              <span class="hljs-comment">// The hidden state must match the dataset&#x27;s hidden state</span>
              label.<span class="hljs-property">hidden</span> = !chart.<span class="hljs-title function_">isDatasetVisible</span>(label.<span class="hljs-property">datasetIndex</span>);

              <span class="hljs-comment">// Change the color to match the dataset</span>
              label.<span class="hljs-property">fillStyle</span> = datasetColors[label.<span class="hljs-property">index</span>];
            });

            <span class="hljs-keyword">return</span> labelsOriginal;
          }
        },
        <span class="hljs-attr">onClick</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">mouseEvent, legendItem, legend</span>) {
          <span class="hljs-comment">// toggle the visibility of the dataset from what it currently is</span>
          legend.<span class="hljs-property">chart</span>.<span class="hljs-title function_">getDatasetMeta</span>(
            legendItem.<span class="hljs-property">datasetIndex</span>
          ).<span class="hljs-property">hidden</span> = legend.<span class="hljs-property">chart</span>.<span class="hljs-title function_">isDatasetVisible</span>(legendItem.<span class="hljs-property">datasetIndex</span>);
          legend.<span class="hljs-property">chart</span>.<span class="hljs-title function_">update</span>();
        }
      },
      <span class="hljs-attr">tooltip</span>: {
        <span class="hljs-attr">callbacks</span>: {
          <span class="hljs-attr">title</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) {
            <span class="hljs-keyword">const</span> labelIndex = (context[<span class="hljs-number">0</span>].<span class="hljs-property">datasetIndex</span> * <span class="hljs-number">2</span>) + context[<span class="hljs-number">0</span>].<span class="hljs-property">dataIndex</span>;
            <span class="hljs-keyword">return</span> context[<span class="hljs-number">0</span>].<span class="hljs-property">chart</span>.<span class="hljs-property">data</span>.<span class="hljs-property">labels</span>[labelIndex] + <span class="hljs-string">&#x27;: &#x27;</span> + context[<span class="hljs-number">0</span>].<span class="hljs-property">formattedValue</span>;
          }
        }
      }
    }
  },
};
<span class="hljs-comment">// &lt;/block:config&gt;</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">config</span>: config,
};</code></pre><h2>Docs</h2>
<ul>
<li><a href="../../charts/doughnut.md">Doughnut and Pie Charts</a></li>
<li><a href="../../general/options.md">Options</a><ul>
<li><a href="../../general/options.md#scriptable-options">Scriptable Options</a></li>
</ul>
</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>