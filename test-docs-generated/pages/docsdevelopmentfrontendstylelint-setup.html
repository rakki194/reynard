<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stylelint Setup for CSS Cleanup Quest - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Stylelint Setup for CSS Cleanup Quest</h1>
      <div class="markdown-content"><h1>Stylelint Setup for CSS Cleanup Quest</h1>
<p>This document describes the Stylelint configuration and tooling setup for the CSS cleanup quest in YipYap.</p>
<h2>Overview</h2>
<p>The Stylelint configuration enforces CSS best practices and helps maintain consistency across the codebase. It focuses on the core requirements from the CSS cleanup quest while being practical for the existing codebase.</p>
<h2>Configuration Files</h2>
<h3>Main Configuration: <code>src/.stylelintrc</code></h3>
<p>The main Stylelint configuration file extends <code>stylelint-config-standard</code> and adds custom rules for the CSS cleanup quest.</p>
<h4>Key Rules</h4>
<p><strong>Core Requirements (from CSS_TODO.md):</strong></p>
<ul>
<li><strong><code>declaration-no-important</code></strong>: Warns against <code>!important</code> usage, encouraging proper layering and specificity</li>
<li><strong><code>color-no-hex</code></strong>: Warns against hex colors, encouraging CSS custom properties</li>
<li><strong><code>color-named</code></strong>: Warns against named colors, encouraging CSS custom properties</li>
<li><strong><code>declaration-property-value-no-unknown</code></strong>: Enforces z-index tokens instead of raw numbers</li>
</ul>
<p><strong>Code Quality:</strong></p>
<ul>
<li><strong><code>max-nesting-depth</code></strong>: Limits nesting to 4 levels</li>
<li><strong><code>selector-max-compound-selectors</code></strong>: Limits compound selectors to 6</li>
<li><strong><code>selector-no-qualifying-type</code></strong>: Warns against qualifying type selectors</li>
<li><strong><code>at-rule-no-unknown</code></strong>: Allows modern CSS at-rules (<code>layer</code>, <code>supports</code>, <code>container</code>)</li>
</ul>
<p><strong>Formatting and Standards:</strong></p>
<ul>
<li><strong><code>color-function-notation</code></strong>: Uses modern color function notation</li>
<li><strong><code>color-hex-length</code></strong>: Prefers short hex colors</li>
<li><strong><code>font-weight-notation</code></strong>: Uses numeric font weights</li>
<li><strong><code>function-calc-no-unspaced-operator</code></strong>: Enforces spacing in calc functions</li>
<li><strong><code>length-zero-no-unit</code></strong>: Removes units from zero values</li>
<li><strong><code>time-min-milliseconds</code></strong>: Enforces minimum animation durations</li>
</ul>
<p><strong>Disabled Rules:</strong></p>
<p>Some rules are disabled to avoid conflicts with existing code patterns:</p>
<ul>
<li><code>selector-max-specificity</code>: Too strict for existing codebase</li>
<li><code>selector-class-pattern</code>: Allows existing class naming patterns</li>
<li><code>no-descending-specificity</code>: Allows existing selector ordering</li>
<li><code>keyframes-name-pattern</code>: Allows existing animation names</li>
<li><code>no-duplicate-selectors</code>: Allows existing duplicate selectors</li>
</ul>
<h3>Z-Index Tokens</h3>
<p>The configuration enforces the use of z-index tokens instead of raw numbers:</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ✅ Allowed */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-base); <span class="hljs-comment">/* 0 */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-dropdown); <span class="hljs-comment">/* 10 */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-sticky); <span class="hljs-comment">/* 20 */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-tooltip); <span class="hljs-comment">/* 30 */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-modal); <span class="hljs-comment">/* 40 */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-toast); <span class="hljs-comment">/* 50 */</span>

<span class="hljs-comment">/* ❌ Not allowed */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
<span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;</code></pre><h2>CI/CD Integration</h2>
<h3>GitHub Actions: <code>.github/workflows/css-lint.yml</code></h3>
<p>The CI workflow runs Stylelint on changed CSS files:</p>
<ul>
<li><strong>Triggers</strong>: Push to <code>main</code>/<code>develop</code> branches and pull requests</li>
<li><strong>Scope</strong>: Only runs on changes to <code>src/**/*.css</code>, <code>src/**/*.module.css</code>, and <code>src/.stylelintrc</code></li>
<li><strong>Strategy</strong>:<ul>
<li>For pushes: Runs on changed files only</li>
<li>For PRs: Runs full Stylelint check</li>
</ul>
</li>
</ul>
<h3>Pre-commit Hook: <code>scripts/pre-commit-stylelint.sh</code></h3>
<p>A pre-commit hook script that runs Stylelint on staged CSS files:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Make executable</span>
<span class="hljs-built_in">chmod</span> +x scripts/pre-commit-stylelint.sh

<span class="hljs-comment"># Run manually</span>
./scripts/pre-commit-stylelint.sh</code></pre><h2>Usage</h2>
<h3>Running Stylelint</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Lint all CSS files</span>
npm run styles

<span class="hljs-comment"># Lint specific files</span>
npx stylelint src/styles.css
npx stylelint src/components/Gallery/Gallery.css

<span class="hljs-comment"># Lint with auto-fix</span>
npx stylelint src/styles.css --fix

<span class="hljs-comment"># Lint with specific formatter</span>
npx stylelint src/styles.css --formatter verbose</code></pre><h3>Available Scripts</h3>
<ul>
<li><code>npm run styles</code>: Runs Stylelint on all CSS files in <code>src/</code></li>
</ul>
<h3>IDE Integration</h3>
<p>Most modern IDEs support Stylelint integration:</p>
<p><strong>VS Code:</strong></p>
<ul>
<li><p>Install the &quot;Stylelint&quot; extension</p>
</li>
<li><p>Add to <code>settings.json</code>:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;stylelint.validate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;css&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;scss&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;css.validate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;scss.validate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span></code></pre></li>
</ul>
<p><strong>Other IDEs:</strong></p>
<ul>
<li>Install the appropriate Stylelint plugin</li>
<li>Configure to use the project&#39;s <code>.stylelintrc</code> file</li>
</ul>
<h2>Migration Strategy</h2>
<h3>Phase 1: Warnings Only</h3>
<p>The current configuration uses warnings for most rules to avoid breaking existing code:</p>
<ul>
<li><code>!important</code> usage → Warning</li>
<li>Hex colors → Warning</li>
<li>Named colors → Warning</li>
<li>Raw z-index values → Warning</li>
</ul>
<h3>Phase 2: Gradual Enforcement</h3>
<p>As the CSS cleanup quest progresses:</p>
<ol>
<li><strong>Convert hex colors to CSS custom properties</strong></li>
<li><strong>Replace <code>!important</code> with proper layering</strong></li>
<li><strong>Replace raw z-index values with tokens</strong></li>
<li><strong>Convert qualifying type selectors to classes</strong></li>
</ol>
<h3>Phase 3: Strict Enforcement</h3>
<p>Once migration is complete, rules can be changed from warnings to errors:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;declaration-no-important&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;color-no-hex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;color-named&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;never&quot;</span>
<span class="hljs-punctuation">}</span></code></pre><h2>Common Issues and Solutions</h2>
<h3>High Specificity Selectors</h3>
<p><strong>Problem</strong>: Complex selectors with high specificity</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ❌ High specificity */</span>
<span class="hljs-selector-id">#gallery</span> <span class="hljs-selector-class">.responsive-grid</span> <span class="hljs-selector-class">.item</span> <span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:hover</span></code></pre><p><strong>Solution</strong>: Use CSS Modules or data attributes</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ✅ Lower specificity */</span>
<span class="hljs-selector-class">.gallery-item</span><span class="hljs-selector-attr">[data-selected]</span> <span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:hover</span></code></pre><h3>Hex Color Usage</h3>
<p><strong>Problem</strong>: Hard-coded hex colors</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ❌ Hex colors */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-number">#8839ef</span>;
<span class="hljs-attribute">background</span>: <span class="hljs-number">#eff1f5</span>;</code></pre><p><strong>Solution</strong>: Use CSS custom properties</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ✅ CSS custom properties */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--accent);
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--bg-color);</code></pre><h3>Z-Index Magic Numbers</h3>
<p><strong>Problem</strong>: Raw z-index values</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ❌ Magic numbers */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
<span class="hljs-attribute">z-index</span>: <span class="hljs-number">9999</span>;</code></pre><p><strong>Solution</strong>: Use z-index tokens</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ✅ Tokens */</span>
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-modal);
<span class="hljs-attribute">z-index</span>: <span class="hljs-built_in">var</span>(--z-toast);</code></pre><h2>Best Practices</h2>
<h3>CSS Custom Properties</h3>
<p>Define colors in <code>src/themes.css</code>:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">#8839ef</span>;
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#eff1f5</span>;
  <span class="hljs-attr">--text-primary</span>: <span class="hljs-number">#1a1b24</span>;
}</code></pre><h3>Z-Index Scale</h3>
<p>Use the defined z-index scale:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--z-base</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* base content */</span>
  <span class="hljs-attr">--z-dropdown</span>: <span class="hljs-number">10</span>; <span class="hljs-comment">/* menus, dropdowns */</span>
  <span class="hljs-attr">--z-sticky</span>: <span class="hljs-number">20</span>; <span class="hljs-comment">/* sticky headers/footers */</span>
  <span class="hljs-attr">--z-tooltip</span>: <span class="hljs-number">30</span>; <span class="hljs-comment">/* tooltips */</span>
  <span class="hljs-attr">--z-modal</span>: <span class="hljs-number">40</span>; <span class="hljs-comment">/* modals/dialogs */</span>
  <span class="hljs-attr">--z-toast</span>: <span class="hljs-number">50</span>; <span class="hljs-comment">/* toasts/notifications */</span>
}</code></pre><h3>Avoiding !important</h3>
<p>Instead of <code>!important</code>, use:</p>
<ol>
<li><strong>Proper layering</strong> with <code>@layer</code></li>
<li><strong>Higher specificity</strong> selectors</li>
<li><strong>CSS custom properties</strong> for dynamic values</li>
</ol>
<pre><code class="hljs language-css"><span class="hljs-comment">/* ❌ Avoid */</span>
<span class="hljs-attribute">color</span>: red <span class="hljs-meta">!important</span>;

<span class="hljs-comment">/* ✅ Better */</span>
<span class="hljs-keyword">@layer</span> overrides {
  <span class="hljs-selector-class">.specific-selector</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--error-color);
  }
}</code></pre><h2>Troubleshooting</h2>
<h3>Rule Conflicts</h3>
<p>If a rule conflicts with existing code:</p>
<ol>
<li><strong>Check if the rule is necessary</strong> for the cleanup quest</li>
<li><strong>Consider disabling the rule</strong> temporarily</li>
<li><strong>Plan migration</strong> to comply with the rule</li>
</ol>
<h3>Performance Issues</h3>
<p>For large CSS files:</p>
<ol>
<li><strong>Run Stylelint on specific files</strong> instead of the entire project</li>
<li><strong>Use the <code>--cache</code> option</strong> for faster subsequent runs</li>
<li><strong>Consider running in CI only</strong> for large codebases</li>
</ol>
<h3>False Positives</h3>
<p>If Stylelint reports false positives:</p>
<ol>
<li><strong>Check the rule documentation</strong></li>
<li><strong>Add exceptions</strong> to the configuration</li>
<li><strong>Use <code>/* stylelint-disable */</code></strong> comments sparingly</li>
</ol>
<h2>Future Enhancements</h2>
<h3>Additional Rules</h3>
<p>Consider adding these rules as the codebase matures:</p>
<ul>
<li><strong><code>declaration-block-sorted-properties</code></strong>: Enforce property ordering</li>
<li><strong><code>selector-max-id</code></strong>: Limit ID selector usage</li>
<li><strong><code>selector-no-id</code></strong>: Prevent ID selectors entirely</li>
<li><strong><code>selector-no-vendor-prefix</code></strong>: Remove vendor prefixes</li>
</ul>
<h3>Custom Plugins</h3>
<p>For project-specific needs:</p>
<ul>
<li><strong>Custom z-index token validation</strong></li>
<li><strong>Theme variable usage enforcement</strong></li>
<li><strong>Component-specific naming conventions</strong></li>
</ul>
<h3>Integration with Other Tools</h3>
<ul>
<li><strong>Prettier integration</strong> for consistent formatting</li>
<li><strong>PostCSS plugins</strong> for advanced transformations</li>
<li><strong>CSS-in-JS linting</strong> for styled-components or similar</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>