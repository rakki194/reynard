<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>kokoro - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>kokoro</h1>
      <div class="markdown-content"><h1>kokoro</h1>
<p>An inference library for <a href="https://huggingface.co/hexgrad/Kokoro-82M">Kokoro-82M</a>. You can <a href="https://pypi.org/project/kokoro/"><code>pip install kokoro</code></a>.</p>
<blockquote>
<p><strong>Kokoro</strong> is an open-weight TTS model with 82 million parameters. Despite its lightweight architecture, it delivers comparable quality to larger models while being significantly faster and more cost-efficient. With Apache-licensed weights, Kokoro can be deployed anywhere from production environments to personal projects.</p>
</blockquote>
<h3>Usage</h3>
<p>You can run this basic cell on <a href="https://colab.research.google.com/">Google Colab</a>. <a href="https://huggingface.co/hexgrad/Kokoro-82M/blob/main/SAMPLES.md">Listen to samples</a>.</p>
<pre><code class="hljs language-py">!pip install -q kokoro&gt;=<span class="hljs-number">0.9</span><span class="hljs-number">.4</span> soundfile
!apt-get -qq -y install espeak-ng &gt; /dev/null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span>
<span class="hljs-keyword">from</span> kokoro <span class="hljs-keyword">import</span> KPipeline
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display, Audio
<span class="hljs-keyword">import</span> soundfile <span class="hljs-keyword">as</span> sf
<span class="hljs-keyword">import</span> torch
pipeline = KPipeline(lang_code=<span class="hljs-string">&#x27;a&#x27;</span>)
text = <span class="hljs-string">&#x27;&#x27;&#x27;
[Kokoro](/kËˆOkÉ™É¹O/) is an open-weight TTS model with 82 million parameters. Despite its lightweight architecture, it delivers comparable quality to larger models while being significantly faster and more cost-efficient. With Apache-licensed weights, [Kokoro](/kËˆOkÉ™É¹O/) can be deployed anywhere from production environments to personal projects.
&#x27;&#x27;&#x27;</span>
generator = pipeline(text, voice=<span class="hljs-string">&#x27;af_heart&#x27;</span>)
<span class="hljs-keyword">for</span> i, (gs, ps, audio) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(generator):
    <span class="hljs-built_in">print</span>(i, gs, ps)
    display(Audio(data=audio, rate=<span class="hljs-number">24000</span>, autoplay=i==<span class="hljs-number">0</span>))
    sf.write(<span class="hljs-string">f&#x27;<span class="hljs-subst">{i}</span>.wav&#x27;</span>, audio, <span class="hljs-number">24000</span>)</code></pre><p>Under the hood, <code>kokoro</code> uses <a href="https://pypi.org/project/misaki/"><code>misaki</code></a>, a G2P library at <a href="https://github.com/hexgrad/misaki">https://github.com/hexgrad/misaki</a></p>
<h3>Advanced Usage</h3>
<p>You can run this advanced cell on <a href="https://colab.research.google.com/">Google Colab</a>.</p>
<pre><code class="hljs language-py"><span class="hljs-comment"># 1ï¸âƒ£ Install kokoro</span>
!pip install -q kokoro&gt;=<span class="hljs-number">0.9</span><span class="hljs-number">.4</span> soundfile
<span class="hljs-comment"># 2ï¸âƒ£ Install espeak, used for English OOD fallback and some non-English languages</span>
!apt-get -qq -y install espeak-ng &gt; /dev/null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span>

<span class="hljs-comment"># 3ï¸âƒ£ Initalize a pipeline</span>
<span class="hljs-keyword">from</span> kokoro <span class="hljs-keyword">import</span> KPipeline
<span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> display, Audio
<span class="hljs-keyword">import</span> soundfile <span class="hljs-keyword">as</span> sf
<span class="hljs-keyword">import</span> torch
<span class="hljs-comment"># ğŸ‡ºğŸ‡¸ &#x27;a&#x27; =&gt; American English, ğŸ‡¬ğŸ‡§ &#x27;b&#x27; =&gt; British English</span>
<span class="hljs-comment"># ğŸ‡ªğŸ‡¸ &#x27;e&#x27; =&gt; Spanish es</span>
<span class="hljs-comment"># ğŸ‡«ğŸ‡· &#x27;f&#x27; =&gt; French fr-fr</span>
<span class="hljs-comment"># ğŸ‡®ğŸ‡³ &#x27;h&#x27; =&gt; Hindi hi</span>
<span class="hljs-comment"># ğŸ‡®ğŸ‡¹ &#x27;i&#x27; =&gt; Italian it</span>
<span class="hljs-comment"># ğŸ‡¯ğŸ‡µ &#x27;j&#x27; =&gt; Japanese: pip install misaki[ja]</span>
<span class="hljs-comment"># ğŸ‡§ğŸ‡· &#x27;p&#x27; =&gt; Brazilian Portuguese pt-br</span>
<span class="hljs-comment"># ğŸ‡¨ğŸ‡³ &#x27;z&#x27; =&gt; Mandarin Chinese: pip install misaki[zh]</span>
pipeline = KPipeline(lang_code=<span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-comment"># &lt;= make sure lang_code matches voice, reference above.</span>

<span class="hljs-comment"># This text is for demonstration purposes only, unseen during training</span>
text = <span class="hljs-string">&#x27;&#x27;&#x27;
The sky above the port was the color of television, tuned to a dead channel.
&quot;It&#x27;s not like I&#x27;m using,&quot; Case heard someone say, as he shouldered his way through the crowd around the door of the Chat. &quot;It&#x27;s like my body&#x27;s developed this massive drug deficiency.&quot;
It was a Sprawl voice and a Sprawl joke. The Chatsubo was a bar for professional expatriates; you could drink there for a week and never hear two words in Japanese.

These were to have an enormous impact, not only because they were associated with Constantine, but also because, as in so many other areas, the decisions taken by Constantine (or in his name) were to have great significance for centuries to come. One of the main issues was the shape that Christian churches were to take, since there was not, apparently, a tradition of monumental church buildings when Constantine decided to help the Christian church build a series of truly spectacular structures. The main form that these churches took was that of the basilica, a multipurpose rectangular structure, based ultimately on the earlier Greek stoa, which could be found in most of the great cities of the empire. Christianity, unlike classical polytheism, needed a large interior space for the celebration of its religious services, and the basilica aptly filled that need. We naturally do not know the degree to which the emperor was involved in the design of new churches, but it is tempting to connect this with the secular basilica that Constantine completed in the Roman forum (the so-called Basilica of Maxentius) and the one he probably built in Trier, in connection with his residence in the city at a time when he was still caesar.

[Kokoro](/kËˆOkÉ™É¹O/) is an open-weight TTS model with 82 million parameters. Despite its lightweight architecture, it delivers comparable quality to larger models while being significantly faster and more cost-efficient. With Apache-licensed weights, [Kokoro](/kËˆOkÉ™É¹O/) can be deployed anywhere from production environments to personal projects.
&#x27;&#x27;&#x27;</span>
<span class="hljs-comment"># text = &#x27;ã€Œã‚‚ã—ãŠã‚ŒãŒãŸã å¶ç„¶ã€ãã—ã¦ã“ã†ã—ã‚ˆã†ã¨ã„ã†ã¤ã‚‚ã‚Šã§ãªãã“ã“ã«ç«‹ã£ã¦ã„ã‚‹ã®ãªã‚‰ã€ã¡ã‚‡ã£ã¨ã°ã‹ã‚Šçµ¶æœ›ã™ã‚‹ã¨ã“ã‚ã ãªã€ã¨ã€ãã‚“ãªã“ã¨ãŒå½¼ã®é ­ã«æ€ã„æµ®ã‹ã‚“ã ã€‚&#x27;</span>
<span class="hljs-comment"># text = &#x27;ä¸­åœ‹äººæ°‘ä¸ä¿¡é‚ªä¹Ÿä¸æ€•é‚ªï¼Œä¸æƒ¹äº‹ä¹Ÿä¸æ€•äº‹ï¼Œä»»ä½•å¤–åœ‹ä¸è¦æŒ‡æœ›æˆ‘å€‘æœƒæ‹¿è‡ªå·±çš„æ ¸å¿ƒåˆ©ç›Šåšäº¤æ˜“ï¼Œä¸è¦æŒ‡æœ›æˆ‘å€‘æœƒåä¸‹æå®³æˆ‘åœ‹ä¸»æ¬Šã€å®‰å…¨ã€ç™¼å±•åˆ©ç›Šçš„è‹¦æœï¼&#x27;</span>
<span class="hljs-comment"># text = &#x27;Los partidos polÃ­ticos tradicionales compiten con los populismos y los movimientos asamblearios.&#x27;</span>
<span class="hljs-comment"># text = &#x27;Le dromadaire resplendissant dÃ©ambulait tranquillement dans les mÃ©andres en mastiquant de petites feuilles vernissÃ©es.&#x27;</span>
<span class="hljs-comment"># text = &#x27;à¤Ÿà¥à¤°à¤¾à¤‚à¤¸à¤ªà¥‹à¤°à¥à¤Ÿà¤°à¥‹à¤‚ à¤•à¥€ à¤¹à¤¡à¤¼à¤¤à¤¾à¤² à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤ªà¤¾à¤‚à¤šà¤µà¥‡à¤‚ à¤¦à¤¿à¤¨ à¤œà¤¾à¤°à¥€, à¤¦à¤¿à¤¸à¤‚à¤¬à¤° à¤¸à¥‡ à¤‡à¤²à¥‡à¤•à¥à¤Ÿà¥à¤°à¥‰à¤¨à¤¿à¤• à¤Ÿà¥‹à¤² à¤•à¤²à¥‡à¤•à¥à¤¶à¤¨à¤² à¤¸à¤¿à¤¸à¥à¤Ÿà¤®&#x27;</span>
<span class="hljs-comment"># text = &quot;Allora cominciava l&#x27;insonnia, o un dormiveglia peggiore dell&#x27;insonnia, che talvolta assumeva i caratteri dell&#x27;incubo.&quot;</span>
<span class="hljs-comment"># text = &#x27;Elabora relatÃ³rios de acompanhamento cronolÃ³gico para as diferentes unidades do Departamento que propÃµem contratos.&#x27;</span>

<span class="hljs-comment"># 4ï¸âƒ£ Generate, display, and save audio files in a loop.</span>
generator = pipeline(
    text, voice=<span class="hljs-string">&#x27;af_heart&#x27;</span>, <span class="hljs-comment"># &lt;= change voice here</span>
    speed=<span class="hljs-number">1</span>, split_pattern=<span class="hljs-string">r&#x27;\n+&#x27;</span>
)
<span class="hljs-comment"># Alternatively, load voice tensor directly:</span>
<span class="hljs-comment"># voice_tensor = torch.load(&#x27;path/to/voice.pt&#x27;, weights_only=True)</span>
<span class="hljs-comment"># generator = pipeline(</span>
<span class="hljs-comment">#     text, voice=voice_tensor,</span>
<span class="hljs-comment">#     speed=1, split_pattern=r&#x27;\n+&#x27;</span>
<span class="hljs-comment"># )</span>

<span class="hljs-keyword">for</span> i, (gs, ps, audio) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(generator):
    <span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># i =&gt; index</span>
    <span class="hljs-built_in">print</span>(gs) <span class="hljs-comment"># gs =&gt; graphemes/text</span>
    <span class="hljs-built_in">print</span>(ps) <span class="hljs-comment"># ps =&gt; phonemes</span>
    display(Audio(data=audio, rate=<span class="hljs-number">24000</span>, autoplay=i==<span class="hljs-number">0</span>))
    sf.write(<span class="hljs-string">f&#x27;<span class="hljs-subst">{i}</span>.wav&#x27;</span>, audio, <span class="hljs-number">24000</span>) <span class="hljs-comment"># save each audio file</span></code></pre><h3>Windows Installation</h3>
<p>To install espeak-ng on Windows:</p>
<ol>
<li>Go to <a href="https://github.com/espeak-ng/espeak-ng/releases">espeak-ng releases</a></li>
<li>Click on <strong>Latest release</strong> </li>
<li>Download the appropriate <code>*.msi</code> file (e.g. <strong>espeak-ng-20191129-b702b03-x64.msi</strong>)</li>
<li>Run the downloaded installer</li>
</ol>
<p>For advanced configuration and usage on Windows, see the <a href="https://github.com/espeak-ng/espeak-ng/blob/master/docs/guide.md">official espeak-ng Windows guide</a></p>
<h3>MacOS Apple Silicon GPU Acceleration</h3>
<p>On Mac M1/M2/M3/M4 devices, you can explicitly specify the environment variable <code>PYTORCH_ENABLE_MPS_FALLBACK=1</code> to enable GPU acceleration.</p>
<pre><code class="hljs language-bash">PYTORCH_ENABLE_MPS_FALLBACK=1 python run-your-kokoro-script.py</code></pre><h3>Conda Environment</h3>
<p>Use the following conda <code>environment.yml</code> if you&#39;re facing any dependency issues.</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">kokoro</span>
<span class="hljs-attr">channels:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">defaults</span>
<span class="hljs-attr">dependencies:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">python==3.9</span>       
  <span class="hljs-bullet">-</span> <span class="hljs-string">libstdcxx~=12.4.0</span> <span class="hljs-comment"># Needed to load espeak correctly. Try removing this if you&#x27;re facing issues with Espeak fallback. </span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">pip:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">kokoro&gt;=0.3.1</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">soundfile</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">misaki[en]</span></code></pre><h3>Acknowledgements</h3>
<ul>
<li>ğŸ› ï¸ <a href="https://huggingface.co/yl4579">@yl4579</a> for architecting StyleTTS 2.</li>
<li>ğŸ† <a href="https://huggingface.co/Pendrokar">@Pendrokar</a> for adding Kokoro as a contender in the TTS Spaces Arena.</li>
<li>ğŸ“Š Thank you to everyone who contributed synthetic training data.</li>
<li>â¤ï¸ Special thanks to all compute sponsors.</li>
<li>ğŸ‘¾ Discord server: <a href="https://discord.gg/QuGxSWBfQy">https://discord.gg/QuGxSWBfQy</a></li>
<li>ğŸª½ Kokoro is a Japanese word that translates to &quot;heart&quot; or &quot;spirit&quot;. Kokoro is also a <a href="https://terminator.fandom.com/wiki/Kokoro">character in the Terminator franchise</a> along with <a href="https://github.com/hexgrad/misaki?tab=readme-ov-file#acknowledgements">Misaki</a>.</li>
</ul>
<img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2024/08/terminator-zero-41-1.jpg" width="400" alt="kokoro" />
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with â¤ï¸ using SolidJS.</p></footer>
</body>
</html>