<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Embedding Log Truncation - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Embedding Log Truncation</h1>
      <div class="markdown-content"><h1>Embedding Log Truncation</h1>
<p>This feature allows you to control how embedding vectors are logged in the<br>application to reduce log verbosity while maintaining useful debugging<br>information.</p>
<h2>Configuration Options</h2>
<h3><code>embedding_log_truncate_enabled</code></h3>
<ul>
<li><strong>Type</strong>: <code>boolean</code></li>
<li><strong>Default</strong>: <code>true</code></li>
<li><strong>Description</strong>: Whether to truncate embedding vectors in debug logs</li>
<li><strong>Environment Variable</strong>: <code>EMBEDDING_LOG_TRUNCATE_ENABLED</code></li>
</ul>
<h3><code>embedding_log_truncate_vectors</code></h3>
<ul>
<li><strong>Type</strong>: <code>integer</code></li>
<li><strong>Default</strong>: <code>8</code></li>
<li><strong>Description</strong>: Number of embedding vectors to show before truncating</li>
<li><strong>Environment Variable</strong>: <code>EMBEDDING_LOG_TRUNCATE_VECTORS</code></li>
</ul>
<h2>Usage</h2>
<h3>Configuration File</h3>
<p>Add these settings to your <code>config.json</code>:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;embedding_log_truncate_enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;embedding_log_truncate_vectors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span>
<span class="hljs-punctuation">}</span></code></pre><h3>Environment Variables</h3>
<p>You can also configure via environment variables:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Enable/disable truncation</span>
<span class="hljs-built_in">export</span> EMBEDDING_LOG_TRUNCATE_ENABLED=<span class="hljs-literal">true</span>

<span class="hljs-comment"># Set number of vectors to show</span>
<span class="hljs-built_in">export</span> EMBEDDING_LOG_TRUNCATE_VECTORS=8</code></pre><h3>API Configuration</h3>
<p>Update via the API endpoint:</p>
<pre><code class="hljs language-bash">curl -X PUT <span class="hljs-string">&quot;http://localhost:7000/api/config&quot;</span> \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;embedding_log_truncate_enabled&quot;: true,
    &quot;embedding_log_truncate_vectors&quot;: 8
  }&#x27;</span></code></pre><h2>Behavior</h2>
<p>When enabled, the application will:</p>
<ol>
<li>Show only the first N vectors (where N is <code>embedding_log_truncate_vectors</code>)</li>
<li>Add a truncation message indicating how many vectors were hidden</li>
<li>Keep the original response data unchanged for actual processing</li>
</ol>
<h3>Example Log Output</h3>
<p><strong>Before truncation:</strong></p>
<pre><code class="hljs language-plaintext">Received embedding response from Ollama: {&#x27;embedding&#x27;: [0.1, 0.2, 0.3, ..., 0.999], &#x27;model&#x27;: &#x27;test-model&#x27;}</code></pre><p><strong>After truncation (showing 8 vectors):</strong></p>
<pre><code class="hljs language-plaintext">Received embedding response from Ollama: {&#x27;embedding&#x27;: [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, &#x27;... (truncated, showing 8/1000 vectors)&#x27;], &#x27;model&#x27;: &#x27;test-model&#x27;}</code></pre><h2>Benefits</h2>
<ul>
<li><strong>Reduced log verbosity</strong>: Prevents embedding vectors from overwhelming log<br>files</li>
<li><strong>Maintained debugging</strong>: Still shows enough vectors to verify the response<br>structure</li>
<li><strong>Performance</strong>: Faster log processing and reduced storage requirements</li>
<li><strong>Configurable</strong>: Can be adjusted based on your debugging needs</li>
</ul>
<h2>Disabling</h2>
<p>To disable truncation and see full embedding vectors:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;embedding_log_truncate_enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span></code></pre><p>Or via environment variable:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">export</span> EMBEDDING_LOG_TRUNCATE_ENABLED=<span class="hljs-literal">false</span></code></pre></div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>