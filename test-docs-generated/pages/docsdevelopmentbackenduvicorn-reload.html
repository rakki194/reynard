<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Uvicorn Development with Auto-Reload ü¶ä - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Uvicorn Development with Auto-Reload ü¶ä</h1>
      <div class="markdown-content"><h1>Uvicorn Development with Auto-Reload ü¶ä</h1>
<p>This guide covers using uvicorn&#39;s auto-reload feature for efficient FastAPI development in the Reynard ecosystem. Learn how to configure, optimize, and troubleshoot uvicorn reloading for smooth development workflows.</p>
<h2>Overview</h2>
<p>Uvicorn&#39;s auto-reload feature automatically restarts your FastAPI server when it detects changes in your Python files. This is essential for rapid development cycles and maintaining productivity.</p>
<h2>Quick Start</h2>
<h3>Basic Reload Configuration</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># main.py</span>
<span class="hljs-keyword">import</span> uvicorn
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI(title=<span class="hljs-string">&quot;Reynard API&quot;</span>)

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Hello from Reynard!&quot;</span>}

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:
    uvicorn.run(
        <span class="hljs-string">&quot;main:app&quot;</span>,
        host=<span class="hljs-string">&quot;0.0.0.0&quot;</span>,
        port=<span class="hljs-number">8000</span>,
        reload=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># Enable auto-reload</span>
        log_level=<span class="hljs-string">&quot;info&quot;</span>
    )</code></pre><h3>Command Line Usage</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Basic reload</span>
uvicorn main:app --reload

<span class="hljs-comment"># With custom host and port</span>
uvicorn main:app --reload --host 0.0.0.0 --port 8000

<span class="hljs-comment"># With specific reload directory</span>
uvicorn main:app --reload --reload-dir ./app</code></pre><h2>Configuration Options</h2>
<h3>Development Settings</h3>
<pre><code class="hljs language-python">uvicorn.run(
    <span class="hljs-string">&quot;main:app&quot;</span>,
    host=<span class="hljs-string">&quot;0.0.0.0&quot;</span>,
    port=<span class="hljs-number">8000</span>,
    reload=<span class="hljs-literal">True</span>,
    reload_dirs=[<span class="hljs-string">&quot;app&quot;</span>, <span class="hljs-string">&quot;lib&quot;</span>],  <span class="hljs-comment"># Watch specific directories</span>
    reload_delay=<span class="hljs-number">0.25</span>,  <span class="hljs-comment"># Delay between file checks (seconds)</span>
    reload_includes=[<span class="hljs-string">&quot;*.py&quot;</span>],  <span class="hljs-comment"># File patterns to watch</span>
    reload_excludes=[<span class="hljs-string">&quot;*.pyc&quot;</span>, <span class="hljs-string">&quot;*.pyo&quot;</span>, <span class="hljs-string">&quot;__pycache__&quot;</span>],  <span class="hljs-comment"># Patterns to ignore</span>
    log_level=<span class="hljs-string">&quot;debug&quot;</span>,  <span class="hljs-comment"># More verbose logging</span>
    access_log=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># Enable access logs</span>
    use_colors=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># Colored output</span>
)</code></pre><h3>Production vs Development</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> os

<span class="hljs-comment"># Development configuration</span>
<span class="hljs-keyword">if</span> os.getenv(<span class="hljs-string">&quot;ENVIRONMENT&quot;</span>) == <span class="hljs-string">&quot;development&quot;</span>:
    uvicorn.run(
        <span class="hljs-string">&quot;main:app&quot;</span>,
        host=<span class="hljs-string">&quot;0.0.0.0&quot;</span>,
        port=<span class="hljs-number">8000</span>,
        reload=<span class="hljs-literal">True</span>,
        reload_dirs=[<span class="hljs-string">&quot;app&quot;</span>],
        log_level=<span class="hljs-string">&quot;debug&quot;</span>,
        access_log=<span class="hljs-literal">True</span>
    )
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># Production configuration (no reload)</span>
    uvicorn.run(
        <span class="hljs-string">&quot;main:app&quot;</span>,
        host=<span class="hljs-string">&quot;0.0.0.0&quot;</span>,
        port=<span class="hljs-number">8000</span>,
        workers=<span class="hljs-number">4</span>,  <span class="hljs-comment"># Multiple workers</span>
        log_level=<span class="hljs-string">&quot;info&quot;</span>,
        access_log=<span class="hljs-literal">False</span>
    )</code></pre><h2>Advanced Reload Configuration</h2>
<h3>Environment-Based Configuration</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># config.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UvicornConfig</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-variable language_">self</span>.host = os.getenv(<span class="hljs-string">&quot;UVICORN_HOST&quot;</span>, <span class="hljs-string">&quot;0.0.0.0&quot;</span>)
        <span class="hljs-variable language_">self</span>.port = <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">&quot;UVICORN_PORT&quot;</span>, <span class="hljs-string">&quot;8000&quot;</span>))
        <span class="hljs-variable language_">self</span>.reload = os.getenv(<span class="hljs-string">&quot;UVICORN_RELOAD&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>).lower() == <span class="hljs-string">&quot;true&quot;</span>
        <span class="hljs-variable language_">self</span>.reload_dirs = <span class="hljs-variable language_">self</span>._parse_reload_dirs()
        <span class="hljs-variable language_">self</span>.log_level = os.getenv(<span class="hljs-string">&quot;UVICORN_LOG_LEVEL&quot;</span>, <span class="hljs-string">&quot;info&quot;</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_parse_reload_dirs</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
        dirs = os.getenv(<span class="hljs-string">&quot;UVICORN_RELOAD_DIRS&quot;</span>, <span class="hljs-string">&quot;app&quot;</span>)
        <span class="hljs-keyword">return</span> [d.strip() <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> dirs.split(<span class="hljs-string">&quot;,&quot;</span>)]

<span class="hljs-comment"># main.py</span>
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> UvicornConfig

config = UvicornConfig()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:
    uvicorn.run(
        <span class="hljs-string">&quot;main:app&quot;</span>,
        host=config.host,
        port=config.port,
        reload=config.reload,
        reload_dirs=config.reload_dirs,
        log_level=config.log_level
    )</code></pre><h3>Watchfiles Integration</h3>
<p>For more advanced file watching capabilities, install uvicorn with watchfiles:</p>
<pre><code class="hljs language-bash">pip install uvicorn[standard]</code></pre><p>This enables additional options:</p>
<pre><code class="hljs language-python">uvicorn.run(
    <span class="hljs-string">&quot;main:app&quot;</span>,
    reload=<span class="hljs-literal">True</span>,
    reload_includes=[<span class="hljs-string">&quot;*.py&quot;</span>, <span class="hljs-string">&quot;*.yaml&quot;</span>, <span class="hljs-string">&quot;*.json&quot;</span>],  <span class="hljs-comment"># Watch multiple file types</span>
    reload_excludes=[<span class="hljs-string">&quot;*.pyc&quot;</span>, <span class="hljs-string">&quot;*.pyo&quot;</span>, <span class="hljs-string">&quot;__pycache__&quot;</span>, <span class="hljs-string">&quot;*.log&quot;</span>],
    reload_delay=<span class="hljs-number">0.5</span>  <span class="hljs-comment"># Longer delay for stability</span>
)</code></pre><h2>Reload Mode Detection</h2>
<p>Detect when your application is running under uvicorn reload to optimize behavior:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> os

<span class="hljs-comment"># Detect reload mode</span>
IS_RELOAD_MODE = os.environ.get(<span class="hljs-string">&quot;UVICORN_RELOAD_PROCESS&quot;</span>) == <span class="hljs-string">&quot;1&quot;</span>

<span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    <span class="hljs-string">&quot;&quot;&quot;Application lifespan manager&quot;&quot;&quot;</span>
    <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üîÑ Running in uvicorn reload mode&quot;</span>)
        <span class="hljs-comment"># Skip heavy initialization during reload</span>
        <span class="hljs-keyword">yield</span>
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># Full initialization for normal startup</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üöÄ Full application startup&quot;</span>)
    <span class="hljs-keyword">await</span> initialize_services()

    <span class="hljs-keyword">yield</span>

    <span class="hljs-comment"># Cleanup</span>
    <span class="hljs-keyword">await</span> cleanup_services()</code></pre><h2>Best Practices</h2>
<h3>1. Optimize Startup Time</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> asynccontextmanager

<span class="hljs-comment"># Global services</span>
database_pool = <span class="hljs-literal">None</span>
cache_client = <span class="hljs-literal">None</span>

<span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    <span class="hljs-keyword">global</span> database_pool, cache_client

    <span class="hljs-comment"># Skip heavy initialization during reload</span>
    <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üîÑ Skipping heavy initialization during reload&quot;</span>)
        <span class="hljs-keyword">yield</span>
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># Initialize services only on full startup</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üîß Initializing services...&quot;</span>)
    database_pool = <span class="hljs-keyword">await</span> create_database_pool()
    cache_client = <span class="hljs-keyword">await</span> create_cache_client()

    <span class="hljs-keyword">yield</span>

    <span class="hljs-comment"># Cleanup</span>
    <span class="hljs-keyword">if</span> database_pool:
        <span class="hljs-keyword">await</span> database_pool.close()
    <span class="hljs-keyword">if</span> cache_client:
        <span class="hljs-keyword">await</span> cache_client.close()

app = FastAPI(lifespan=lifespan)</code></pre><h3>2. Handle Background Tasks</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Set</span>

<span class="hljs-comment"># Track background tasks</span>
background_tasks: <span class="hljs-type">Set</span>[asyncio.Task] = <span class="hljs-built_in">set</span>()

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_background_service</span>():
    <span class="hljs-string">&quot;&quot;&quot;Start a background service&quot;&quot;&quot;</span>
    <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üîÑ Skipping background service during reload&quot;</span>)
        <span class="hljs-keyword">return</span>

    task = asyncio.create_task(background_worker())
    background_tasks.add(task)

    <span class="hljs-comment"># Clean up completed tasks</span>
    task.add_done_callback(background_tasks.discard)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">background_worker</span>():
    <span class="hljs-string">&quot;&quot;&quot;Background worker function&quot;&quot;&quot;</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># Do background work</span>
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">except</span> asyncio.CancelledError:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üõë Background worker cancelled&quot;</span>)
            <span class="hljs-keyword">break</span></code></pre><h3>3. Signal Handling</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> signal
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">def</span> <span class="hljs-title function_">signal_handler</span>(<span class="hljs-params">signum, frame</span>):
    <span class="hljs-string">&quot;&quot;&quot;Handle shutdown signals gracefully&quot;&quot;&quot;</span>
    <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;üîÑ Received signal <span class="hljs-subst">{signum}</span> during reload, letting uvicorn handle it&quot;</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;üõë Received signal <span class="hljs-subst">{signum}</span>, shutting down gracefully&quot;</span>)
    <span class="hljs-comment"># Custom shutdown logic here</span>
    sys.exit(<span class="hljs-number">0</span>)

<span class="hljs-comment"># Register signal handlers only in non-reload mode</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> IS_RELOAD_MODE:
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)</code></pre><h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<h4>1. Reload Not Working</h4>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Check if watchfiles is installed</span>
pip install uvicorn[standard]

<span class="hljs-comment"># Verify file permissions</span>
<span class="hljs-built_in">ls</span> -la your_python_files.py

<span class="hljs-comment"># Check for syntax errors</span>
python -m py_compile your_file.py</code></pre><h4>2. Slow Reloads</h4>
<pre><code class="hljs language-python"><span class="hljs-comment"># Optimize reload configuration</span>
uvicorn.run(
    <span class="hljs-string">&quot;main:app&quot;</span>,
    reload=<span class="hljs-literal">True</span>,
    reload_dirs=[<span class="hljs-string">&quot;app&quot;</span>],  <span class="hljs-comment"># Limit to specific directories</span>
    reload_delay=<span class="hljs-number">0.5</span>,  <span class="hljs-comment"># Increase delay for stability</span>
    reload_excludes=[<span class="hljs-string">&quot;*.pyc&quot;</span>, <span class="hljs-string">&quot;__pycache__&quot;</span>, <span class="hljs-string">&quot;*.log&quot;</span>, <span class="hljs-string">&quot;*.tmp&quot;</span>]
)</code></pre><h4>3. Hanging Processes</h4>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Find hanging uvicorn processes</span>
ps aux | grep uvicorn

<span class="hljs-comment"># Kill hanging processes</span>
pkill -f uvicorn

<span class="hljs-comment"># Or more specific</span>
pkill -f <span class="hljs-string">&quot;uvicorn.*reload&quot;</span></code></pre><h4>4. Memory Issues</h4>
<pre><code class="hljs language-python"><span class="hljs-comment"># Add memory cleanup during reload</span>
<span class="hljs-keyword">import</span> gc

<span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    <span class="hljs-keyword">yield</span>

    <span class="hljs-comment"># Force garbage collection during reload</span>
    <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
        gc.collect()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;üßπ Memory cleanup completed&quot;</span>)</code></pre><h3>Debugging Reload Issues</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># Enable debug logging</span>
<span class="hljs-keyword">import</span> logging

logging.basicConfig(level=logging.DEBUG)

uvicorn.run(
    <span class="hljs-string">&quot;main:app&quot;</span>,
    reload=<span class="hljs-literal">True</span>,
    log_level=<span class="hljs-string">&quot;debug&quot;</span>,
    reload_dirs=[<span class="hljs-string">&quot;app&quot;</span>]
)</code></pre><h2>Performance Optimization</h2>
<h3>1. Selective File Watching</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># Only watch essential directories</span>
uvicorn.run(
    <span class="hljs-string">&quot;main:app&quot;</span>,
    reload=<span class="hljs-literal">True</span>,
    reload_dirs=[<span class="hljs-string">&quot;app/routes&quot;</span>, <span class="hljs-string">&quot;app/models&quot;</span>],  <span class="hljs-comment"># Specific directories only</span>
    reload_includes=[<span class="hljs-string">&quot;*.py&quot;</span>],  <span class="hljs-comment"># Only Python files</span>
    reload_excludes=[<span class="hljs-string">&quot;*_test.py&quot;</span>, <span class="hljs-string">&quot;*.pyc&quot;</span>, <span class="hljs-string">&quot;__pycache__&quot;</span>]
)</code></pre><h3>2. Optimized Startup</h3>
<pre><code class="hljs language-python"><span class="hljs-comment"># Lazy loading for development</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_database</span>():
    <span class="hljs-string">&quot;&quot;&quot;Lazy database connection&quot;&quot;&quot;</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(get_database, <span class="hljs-string">&#x27;_db&#x27;</span>):
        get_database._db = create_database_connection()
    <span class="hljs-keyword">return</span> get_database._db

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">&quot;/data&quot;</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data</span>():
    db = get_database()  <span class="hljs-comment"># Only connect when needed</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.fetch_data()</code></pre><h2>Integration with Development Tools</h2>
<h3>1. VS Code Integration</h3>
<pre><code class="hljs language-json"><span class="hljs-comment">// .vscode/launch.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.2.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;FastAPI Debug&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;python&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;${workspaceFolder}/main.py&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;console&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integratedTerminal&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;UVICORN_RELOAD&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;true&quot;</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre><h3>2. Docker Development</h3>
<pre><code class="hljs language-dockerfile"><span class="hljs-comment"># Dockerfile.dev</span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.11</span>-slim

<span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span>
<span class="hljs-keyword">COPY</span><span class="language-bash"> requirements.txt .</span>
<span class="hljs-keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt</span>

<span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span>

<span class="hljs-comment"># Use uvicorn with reload for development</span>
<span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;uvicorn&quot;</span>, <span class="hljs-string">&quot;main:app&quot;</span>, <span class="hljs-string">&quot;--host&quot;</span>, <span class="hljs-string">&quot;0.0.0.0&quot;</span>, <span class="hljs-string">&quot;--port&quot;</span>, <span class="hljs-string">&quot;8000&quot;</span>, <span class="hljs-string">&quot;--reload&quot;</span>]</span></code></pre><h3>3. Docker Compose</h3>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># docker-compose.dev.yml</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.8&quot;</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">api:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile.dev</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8000:8000&quot;</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">.:/app</span> <span class="hljs-comment"># Mount source code for reload</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">UVICORN_RELOAD=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">UVICORN_LOG_LEVEL=debug</span></code></pre><h2>Monitoring and Logging</h2>
<h3>1. Reload Event Logging</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> uvicorn.config <span class="hljs-keyword">import</span> LOGGING_CONFIG

<span class="hljs-comment"># Custom logging configuration</span>
LOGGING_CONFIG[<span class="hljs-string">&quot;formatters&quot;</span>][<span class="hljs-string">&quot;default&quot;</span>][<span class="hljs-string">&quot;format&quot;</span>] = (
    <span class="hljs-string">&quot;%(asctime)s [%(levelname)s] %(name)s: %(message)s&quot;</span>
)

<span class="hljs-comment"># Add reload-specific logging</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReloadLogger</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-variable language_">self</span>.logger = logging.getLogger(<span class="hljs-string">&quot;reload&quot;</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">log_reload_event</span>(<span class="hljs-params">self, event_type: <span class="hljs-built_in">str</span>, file_path: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;Reload event: <span class="hljs-subst">{event_type}</span> - <span class="hljs-subst">{file_path}</span>&quot;</span>)

reload_logger = ReloadLogger()</code></pre><h3>2. Performance Monitoring</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">monitor_reload_time</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">&quot;&quot;&quot;Decorator to monitor reload performance&quot;&quot;&quot;</span>
<span class="hljs-meta">    @wraps(<span class="hljs-params">func</span>)</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        start_time = time.time()
        result = <span class="hljs-keyword">await</span> func(*args, **kwargs)
        reload_time = time.time() - start_time

        <span class="hljs-keyword">if</span> IS_RELOAD_MODE:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;üîÑ Reload completed in <span class="hljs-subst">{reload_time:<span class="hljs-number">.2</span>f}</span>s&quot;</span>)

        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">return</span> wrapper</code></pre><h2>Example: Complete Development Setup</h2>
<p>See the <code>examples/basic-backend</code> directory for a complete example of a modular FastAPI backend with optimized uvicorn reload configuration.</p>
<h2>Environment Variables</h2>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>UVICORN_HOST</code></td>
<td><code>127.0.0.1</code></td>
<td>Host to bind to</td>
</tr>
<tr>
<td><code>UVICORN_PORT</code></td>
<td><code>8000</code></td>
<td>Port to bind to</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD</code></td>
<td><code>false</code></td>
<td>Enable auto-reload</td>
</tr>
<tr>
<td><code>UVICORN_LOG_LEVEL</code></td>
<td><code>info</code></td>
<td>Logging level</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD_DIRS</code></td>
<td><code>.</code></td>
<td>Comma-separated directories to watch</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD_DELAY</code></td>
<td><code>0.25</code></td>
<td>Delay between file checks</td>
</tr>
</tbody></table>
<h2>Summary</h2>
<p>Uvicorn&#39;s auto-reload feature is essential for productive FastAPI development. By following these patterns and best practices, you can create a smooth development experience that automatically restarts your server when you make changes, while avoiding common pitfalls and performance issues.</p>
<p>Remember: ü¶ä The fox&#39;s cunning lies in knowing when to reload quickly and when to take time for proper initialization!</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ‚ù§Ô∏è using SolidJS.</p></footer>
</body>
</html>