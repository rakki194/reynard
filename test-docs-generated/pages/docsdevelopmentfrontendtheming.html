<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theming System - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Theming System</h1>
      <div class="markdown-content"><h1>Theming System</h1>
<p>The application implements a robust theming system with multiple built-in themes<br>(light, dark, gray, banana, strawberry, peanut, high-contrast-black,<br>high-contrast-inverse) that affect not just colors but also animations, visual<br>effects, and component-specific behaviors. Each theme provides custom scrollbar<br>styling, keyboard shortcut visual indicators, and consistent contrast ratios for<br>accessibility. Theme changes are persisted across sessions and can be toggled<br>via keyboard shortcuts or the theme switcher in the settings panel.</p>
<h2>Table of Contents</h2>
<hr>
<ul>
<li><a href="#theming-system">Theming System</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#project-structure">Project Structure</a><ul>
<li><a href="#core-files">Core Files</a></li>
<li><a href="#directory-organization">Directory Organization</a></li>
</ul>
</li>
<li><a href="#state-management">State Management</a></li>
<li><a href="#theme-implementation">Theme Implementation</a></li>
<li><a href="#making-style-changes">Making Style Changes</a></li>
<li><a href="#theme-variables">Theme Variables</a><ul>
<li><a href="#core-colors">Core Colors</a></li>
<li><a href="#component-specific-variables">Component-Specific Variables</a></li>
<li><a href="#animation-variables">Animation Variables</a></li>
</ul>
</li>
<li><a href="#example-usage">Example Usage</a><ul>
<li><a href="#basic-theme-aware-styling">Basic Theme-Aware Styling</a></li>
<li><a href="#advanced-color-mixing">Advanced Color Mixing</a></li>
</ul>
</li>
<li><a href="#theme-integration">Theme Integration</a><ul>
<li><a href="#component-level">Component Level</a></li>
<li><a href="#global-level">Global Level</a></li>
</ul>
</li>
<li><a href="#special-theme-variants">Special Theme Variants</a><ul>
<li><a href="#colorful-themes">Colorful Themes</a></li>
<li><a href="#high-contrast-themes">High Contrast Themes</a></li>
</ul>
</li>
<li><a href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>
<h2>Project Structure</h2>
<hr>
<p>The frontend of yipyap is built with SolidJS and follows this structure:</p>
<h3>Core Files</h3>
<ul>
<li><code>/src/main.tsx</code>: Application entry point, sets up routing and error boundaries</li>
<li><code>/src/contexts/app.tsx</code>: Global state management for app settings and<br>preferences</li>
<li><code>/src/router.ts</code>: Route definitions and navigation logic</li>
<li><code>/src/styles.css</code>: Global styles and CSS reset</li>
<li><code>/src/themes.css</code>: Theme-specific styles and variables</li>
</ul>
<h3>Directory Organization</h3>
<ul>
<li><code>/src/components/</code>: Feature-based components<ul>
<li><code>Gallery/</code>: Image gallery and related components</li>
<li><code>ImageViewer/</code>: Image viewing and manipulation</li>
<li><code>UI/</code>: Toast notifications, buttons, sliders, etc.</li>
<li><code>Settings/</code>: Application settings UI</li>
<li>Shared components: <code>FadeIn</code>, <code>reactive-utils</code></li>
</ul>
</li>
<li><code>/src/contexts/</code>: State management and context providers</li>
<li><code>/src/composables/</code>: Reusable SolidJS composables (do not call them hooks)</li>
<li><code>/src/i18n/</code>: Internationalization support</li>
<li><code>/src/icons/</code>: SVG icons and related components</li>
<li><code>/src/pages/</code>: Route-specific page components</li>
<li><code>/src/resources/</code>: Static resources and assets</li>
<li><code>/src/theme/</code>: Theme-related utilities</li>
<li><code>/src/utils/</code>: Shared utility functions</li>
</ul>
<h2>State Management</h2>
<hr>
<p>The application implements state management through multiple complementary<br>approaches. At the global level, the App Context defined in<br><code>/src/contexts/app.tsx</code> handles application-wide settings and user preferences.<br>For more focused functionality, components maintain their own local state using<br>SolidJS primitives to manage feature-specific data and UI states. Additionally,<br>certain application states are preserved in the URL through route parameters and<br>query strings, enabling shareable and bookmarkable states across sessions.</p>
<h2>Theme Implementation</h2>
<hr>
<p>Theme management is centralized through the app context defined in<br><code>/src/contexts/app.tsx</code>. This context provides comprehensive theme handling by<br>persisting the user&#39;s theme selection in localStorage to maintain preferences<br>across sessions. When themes change, it automatically updates the document&#39;s<br>data-theme attribute to apply the new styles. The context also provides built-in<br>support for RTL (right-to-left) layouts when using locales that require it,<br>ensuring proper text and layout direction. Beyond basic theme switching, it<br>manages animation preferences to respect user settings for reduced motion and<br>other accessibility considerations.</p>
<h2>Making Style Changes</h2>
<hr>
<p>To make style changes to the application, follow these steps:</p>
<ol>
<li><p><strong>Identify the Component and CSS File</strong>:</p>
<ul>
<li>Components are in <code>/src/components/</code></li>
<li>Each component has its own CSS file (e.g.,<br><code>/src/components/Gallery/Gallery.css</code>)</li>
<li>Global styles are in <code>/src/styles.css</code></li>
<li>Theme-specific styles are in <code>/src/themes.css</code></li>
</ul>
</li>
<li><p><strong>Check for Theme Variables</strong>:</p>
<ul>
<li>Look for CSS variables in <code>/src/themes.css</code> that might be relevant</li>
<li>Use theme variables (e.g., <code>var(--accent)</code>, <code>var(--text-primary)</code>) when<br>possible</li>
<li>This ensures consistency across all themes</li>
</ul>
</li>
<li><p><strong>Consider the Cascading Effects</strong>:</p>
<ul>
<li>Check if the style affects other components</li>
<li>Look for related styles in parent/child components</li>
<li>Consider responsive design implications</li>
<li>Test the changes across different screen sizes</li>
</ul>
</li>
<li><p><strong>Follow CSS Best Practices</strong>:</p>
<ul>
<li>Use CSS variables for reusable values</li>
<li>Keep specificity as low as possible</li>
<li>Group related properties together</li>
<li>Add comments for complex selectors or calculations</li>
<li>Use modern CSS features like <code>color-mix()</code> when appropriate</li>
<li>Ensure sufficient contrast in all themes</li>
<li>Check that animations and transitions work smoothly</li>
<li>Verify that the changes respect theme-specific customizations</li>
</ul>
</li>
</ol>
<h2>Theme Variables</h2>
<hr>
<h3>Layering Architecture</h3>
<p>The global cascade layers are defined in <code>src/styles.css</code> in this order (lowest<br>first): <code>reset</code>, <code>base</code>, <code>components</code>, <code>utilities</code>, <code>overrides</code>.</p>
<p>All component-level styles should live under the <code>components</code> layer (prefer CSS<br>Modules). Cross-cutting temporary fixes should live under <code>overrides</code> and be<br>time-bounded.</p>
<h3>Core Colors</h3>
<ul>
<li><code>--accent</code>: Primary accent color</li>
<li><code>--text-primary</code>: Main text color</li>
<li><code>--text-secondary</code>: Secondary text color</li>
<li><code>--card-bg</code>: Card/container background</li>
<li><code>--error-bg</code>: Error state background</li>
<li><code>--error-text</code>: Error state text</li>
<li><code>--success-bg</code>: Success state background</li>
<li><code>--success-text</code>: Success state text</li>
</ul>
<h3>Component-Specific Variables</h3>
<ul>
<li><code>--notification-bg</code>: Notification background</li>
<li><code>--tooltip-bg</code>: Tooltip background</li>
<li><code>--modal-overlay</code>: Modal overlay background</li>
<li><code>--scrollbar-thumb</code>: Scrollbar thumb color</li>
<li><code>--scrollbar-track</code>: Scrollbar track color</li>
</ul>
<h3>Animation Variables</h3>
<ul>
<li><code>--transition-speed</code>: Base transition duration</li>
<li><code>--animation-curve</code>: Default easing function</li>
<li><code>--hover-lift</code>: Hover elevation amount</li>
<li><code>--press-depth</code>: Press animation depth</li>
</ul>
<h2>Scoping Policy</h2>
<hr>
<ul>
<li>Component styles must use CSS Modules (<code>*.module.css</code>), imported in the<br>component. Prefer module-level state classes and <code>data-*</code> attributes to avoid<br>deep descendant selectors.</li>
<li>Global styles are limited to resets, base typography, layout primitives,<br>accessibility helpers (e.g., <code>.sr-only</code>), and design tokens in<br><code>src/styles.css</code> and <code>src/themes.css</code>.</li>
<li>Do not use <code>!important</code>. Use cascade layers, <code>:where()</code>, data attributes, and<br>lower specificity to resolve conflicts.</li>
</ul>
<h3>Z-Index Tokens</h3>
<ul>
<li><code>--z-base</code>: 0</li>
<li><code>--z-dropdown</code>: 10</li>
<li><code>--z-sticky</code>: 20</li>
<li><code>--z-tooltip</code>: 30</li>
<li><code>--z-modal</code>: 40</li>
<li><code>--z-toast</code>: 50</li>
</ul>
<p>Use these tokens in components instead of raw numbers for predictable stacking.</p>
<h3>Motion Tokens</h3>
<ul>
<li><code>--duration-fast</code>: 120ms</li>
<li><code>--duration-base</code>: 200ms</li>
<li><code>--duration-slow</code>: 320ms</li>
<li><code>--easing-standard</code>: cubic-bezier(0.2, 0, 0, 1)</li>
<li><code>--easing-decelerate</code>: cubic-bezier(0, 0, 0, 1)</li>
<li><code>--easing-accelerate</code>: cubic-bezier(0.3, 0, 1, 1)</li>
</ul>
<p>Respect reduced motion:</p>
<pre><code class="hljs language-css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-reduced-motion</span>: reduce) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--duration-fast</span>: <span class="hljs-number">0ms</span>;
    <span class="hljs-attr">--duration-base</span>: <span class="hljs-number">0ms</span>;
    <span class="hljs-attr">--duration-slow</span>: <span class="hljs-number">0ms</span>;
    <span class="hljs-attr">--easing-standard</span>: linear;
    <span class="hljs-attr">--easing-decelerate</span>: linear;
    <span class="hljs-attr">--easing-accelerate</span>: linear;
  }
}</code></pre><h3>Backdrop Tokens</h3>
<ul>
<li><code>--backdrop-blur</code>: 10px</li>
<li><code>--backdrop-opacity</code>: 0.2</li>
<li><code>--backdrop-saturation</code>: 0.5</li>
</ul>
<p><code>src/styles.css</code> ties overlay variables to these tokens:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--overlay-bg</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> / <span class="hljs-built_in">var</span>(--backdrop-opacity));
  <span class="hljs-attr">--overlay-backdrop</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-number">0.5</span>) <span class="hljs-built_in">saturate</span>(<span class="hljs-built_in">var</span>(--backdrop-saturation));
}</code></pre><h3>Elevation and Focus Tokens</h3>
<ul>
<li><code>--elevation-1|2|3|4</code>: Shadow levels</li>
<li><code>--focus-ring-color|width|offset</code>: Standardized focus outlines</li>
</ul>
<h2>Example Usage</h2>
<hr>
<h3>Basic Theme-Aware Styling</h3>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.component</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--card-bg);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-primary);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-built_in">var</span>(--transition-speed) <span class="hljs-built_in">var</span>(--animation-curve);
}

<span class="hljs-selector-class">.component</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-built_in">calc</span>(-<span class="hljs-number">1</span> * <span class="hljs-built_in">var</span>(--hover-lift)));
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-built_in">var</span>(--hover-lift) <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--hover-lift) * <span class="hljs-number">2</span>) <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
}</code></pre><h3>Advanced Color Mixing</h3>
<pre><code class="hljs language-css"><span class="hljs-comment">/* Before: Basic selected state */</span>
&amp;<span class="hljs-selector-class">.selected</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--card-bg) <span class="hljs-number">95%</span>, black);
  <span class="hljs-attribute">backdrop-filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">2px</span>);
}

<span class="hljs-comment">/* After: Enhanced selected state with theme awareness */</span>
&amp;<span class="hljs-selector-class">.selected</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--card-bg), <span class="hljs-built_in">var</span>(--text-primary) <span class="hljs-number">80%</span>);
  <span class="hljs-attribute">backdrop-filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">4px</span> <span class="hljs-number">8px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.4</span>);

  &amp; &gt; <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">brightness</span>(<span class="hljs-number">1.1</span>);
  }
}</code></pre><h2>Theme Integration</h2>
<hr>
<h3>Component Level</h3>
<p>When building components, proper theme integration is essential. All colors and<br>animations should utilize the theme variables rather than hard-coded values to<br>maintain consistency across the application. Components need to implement both<br>dark and light mode variants to ensure a cohesive experience regardless of the<br>user&#39;s theme preference. Right-to-left (RTL) layout support should be<br>incorporated when necessary to accommodate languages that read from right to<br>left.</p>
<p>Finally, components must handle theme transitions smoothly to avoid jarring<br>visual changes when the theme is switched.</p>
<p>Example:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--accent);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-on-accent);
  <span class="hljs-attribute">transition</span>: background <span class="hljs-built_in">var</span>(--transition-speed);

  <span class="hljs-selector-attr">[data-theme=<span class="hljs-string">&quot;dark&quot;</span>]</span> &amp; {
    <span class="hljs-attr">--text-on-accent</span>: <span class="hljs-built_in">var</span>(--text-primary-dark);
  }

  <span class="hljs-selector-attr">[dir=<span class="hljs-string">&quot;rtl&quot;</span>]</span> &amp; {
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-built_in">var</span>(--spacing);
  }
}</code></pre><h3>Global Level</h3>
<p>Global styles should:</p>
<ul>
<li>Define theme-specific root variables</li>
<li>Handle system preference detection</li>
<li>Manage theme transitions</li>
<li>Set up base component styles</li>
</ul>
<p>Example:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* Light theme defaults */</span>
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-attr">--text-primary</span>: <span class="hljs-number">#2c3e50</span>;

  <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
    <span class="hljs-attr">--accent</span>: <span class="hljs-number">#3498db</span>;
    <span class="hljs-attr">--text-primary</span>: <span class="hljs-number">#ecf0f1</span>;
  }
}

<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">&quot;dark&quot;</span>]</span> {
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attr">--text-primary</span>: <span class="hljs-number">#ecf0f1</span>;
}</code></pre><h2>Special Theme Variants</h2>
<hr>
<h3>Colorful Themes</h3>
<p>The <strong>Banana theme</strong> utilizes cheerful yellow accents throughout the interface<br>with a warm, sunny color palette. The <strong>Strawberry theme</strong> employs vibrant red<br>accents for a bold, energetic look. The <strong>Peanut theme</strong> incorporates warm brown<br>accents for an earthy, natural feel.</p>
<h3>High Contrast Themes</h3>
<p><strong>High contrast themes</strong> prioritize accessibility with enhanced contrast ratios.<br>These themes feature simplified animations to reduce visual noise and clear<br>focus indicators to aid navigation. The system includes both<br><code>high-contrast-black</code> and <code>high-contrast-inverse</code> variants to accommodate<br>different user preferences and accessibility needs.</p>
<h2>Best Practices</h2>
<hr>
<p>The color usage system relies on semantic color variables to maintain<br>consistency. All colors must meet sufficient contrast ratios and support both<br>dark and light modes. Color choices take into account color blindness<br>considerations to ensure accessibility for all users.</p>
<p>Animation consistency is maintained through standard timing variables across the<br>application. Motion patterns follow established conventions while respecting<br>user preferences for reduced motion. All animations are kept subtle to avoid<br>distraction.</p>
<p>Theme switching is implemented with smooth transitions between states. The<br>system persists user theme preferences and respects system-level preferences.<br>Clear theme controls are provided to users for easy customization.</p>
<p>Proper maintenance requires thorough documentation of color usage patterns and<br>organized theme variables. All changes must be tested across the full range of<br>themes. Theme documentation should be kept up to date as the system evolves.</p>
<p>When making theme changes, thoroughly test across all themes and consider the<br>accessibility implications. Document any significant changes made to the system.<br>Keep theme documentation current and evaluate the performance impact of changes.</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>