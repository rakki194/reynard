<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reynard Git Hooks - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Reynard Git Hooks</h1>
      <div class="markdown-content"><h1>Reynard Git Hooks</h1>
<p>This directory contains all Git hooks and related tools for the Reynard project, managed by Husky.</p>
<h2>🛠️ Tools Overview</h2>
<h3>1. <code>validate-css-variables.js</code></h3>
<p>A comprehensive CSS variable validator that checks for:</p>
<ul>
<li><strong>Inconsistent variable definitions</strong> across files</li>
<li><strong>Missing variable definitions</strong> (used but not defined)</li>
<li><strong>Unused variable definitions</strong> (defined but never used)</li>
<li><strong>Potential typos</strong> in variable names</li>
<li><strong>Theme-specific inconsistencies</strong></li>
</ul>
<h3>2. <code>pre-commit</code></h3>
<p>A Git pre-commit hook that automatically runs:</p>
<ul>
<li>Format checking (<code>npm run format:check</code>)</li>
<li>Linting (<code>npm run lint</code>)</li>
<li>Type checking (<code>npm run typecheck</code>)</li>
<li>CSS variable validation (using <code>validate-css-variables.js</code>)</li>
</ul>
<h3>3. <code>commit-msg</code></h3>
<p>A Git commit-msg hook that validates commit messages using commitlint with conventional commit format.</p>
<h2>🚀 Usage</h2>
<h3>Manual CSS Validation</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Run validation in any Reynard project</span>
node .husky/validate-css-variables.js

<span class="hljs-comment"># Run with strict mode (fails on warnings)</span>
node .husky/validate-css-variables.js --strict

<span class="hljs-comment"># Run with verbose output</span>
node .husky/validate-css-variables.js --verbose</code></pre><h3>Hooks are Automatically Installed</h3>
<p>The Git hooks are automatically installed when you run <code>npm install</code> thanks to Husky. No manual setup required!</p>
<h2>📋 What Gets Validated</h2>
<h3>Critical Variables (Must Be Consistent)</h3>
<ul>
<li><code>--accent</code></li>
<li><code>--bg-color</code></li>
<li><code>--secondary-bg</code></li>
<li><code>--card-bg</code></li>
<li><code>--text-primary</code></li>
<li><code>--text-secondary</code></li>
<li><code>--text-tertiary</code></li>
<li><code>--border-color</code></li>
<li><code>--success</code></li>
<li><code>--error</code></li>
<li><code>--warning</code></li>
<li><code>--info</code></li>
<li><code>--danger</code></li>
</ul>
<h3>Theme Variables (Should Have Different Values Per Theme)</h3>
<ul>
<li><code>--accent</code></li>
<li><code>--bg-color</code></li>
<li><code>--secondary-bg</code></li>
<li><code>--card-bg</code></li>
<li><code>--text-primary</code></li>
<li><code>--text-secondary</code></li>
<li><code>--border-color</code></li>
</ul>
<h2>🔍 Validation Rules</h2>
<h3>✅ What&#39;s Allowed</h3>
<ul>
<li>Different values for theme variables across different themes</li>
<li>Variables used only in specific components</li>
<li>Variables with consistent definitions across files</li>
</ul>
<h3>❌ What&#39;s Blocked</h3>
<ul>
<li>Variables used but not defined anywhere</li>
<li>Inconsistent values for non-theme variables</li>
<li>Critical variables with different values in the same theme</li>
</ul>
<h3>⚠️ What&#39;s Warned About</h3>
<ul>
<li>Unused variable definitions</li>
<li>Potential typos in variable names</li>
<li>Non-critical variables with inconsistencies</li>
</ul>
<h2>🎯 Usage Examples</h2>
<h3>Check a Specific Project</h3>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> reynard-test-app
node ../reynard/.husky/validate-css-variables.js</code></pre><h3>Run Validation in CI/CD</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># In your CI pipeline</span>
node .husky/validate-css-variables.js --strict
<span class="hljs-comment"># Exit code 1 = errors (block deployment)</span>
<span class="hljs-comment"># Exit code 2 = warnings (allow deployment)</span>
<span class="hljs-comment"># Exit code 0 = clean</span></code></pre><h2>🔧 Configuration</h2>
<p>The validator can be configured by modifying the <code>CONFIG</code> object in <code>validate-css-variables.js</code>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONFIG</span> = {
  <span class="hljs-comment">// Directories to scan for CSS files</span>
  <span class="hljs-attr">scanDirs</span>: [<span class="hljs-string">&#x27;packages&#x27;</span>, <span class="hljs-string">&#x27;examples&#x27;</span>, <span class="hljs-string">&#x27;templates&#x27;</span>, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;styles&#x27;</span>],

  <span class="hljs-comment">// Files to ignore</span>
  <span class="hljs-attr">ignorePatterns</span>: [<span class="hljs-regexp">/node_modules/</span>, <span class="hljs-regexp">/dist/</span>, <span class="hljs-regexp">/build/</span>, <span class="hljs-regexp">/\.git/</span>],

  <span class="hljs-comment">// Critical variables that must be consistent</span>
  <span class="hljs-attr">criticalVariables</span>: [<span class="hljs-string">&#x27;accent&#x27;</span>, <span class="hljs-string">&#x27;bg-color&#x27;</span>, <span class="hljs-string">&#x27;text-primary&#x27;</span>, ...],

  <span class="hljs-comment">// Theme-specific variables</span>
  <span class="hljs-attr">themeVariables</span>: [<span class="hljs-string">&#x27;accent&#x27;</span>, <span class="hljs-string">&#x27;bg-color&#x27;</span>, <span class="hljs-string">&#x27;secondary-bg&#x27;</span>, ...]
};</code></pre><h2>📊 Output</h2>
<p>The validator generates:</p>
<ol>
<li><strong>Console output</strong> with colored status messages</li>
<li><strong>css-validation-report.md</strong> with detailed analysis</li>
<li><strong>Exit codes</strong> for CI/CD integration:<ul>
<li><code>0</code> = Success</li>
<li><code>1</code> = Errors found (block commit/deployment)</li>
<li><code>2</code> = Warnings found (allow but notify)</li>
</ul>
</li>
</ol>
<h2>🐛 Troubleshooting</h2>
<h3>Hook Not Running</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Check if hook is installed</span>
<span class="hljs-built_in">ls</span> -la .git/hooks/pre-commit

<span class="hljs-comment"># Reinstall hooks (if needed)</span>
npx husky install</code></pre><h3>Validation Failing</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Check the detailed report</span>
<span class="hljs-built_in">cat</span> css-validation-report.md

<span class="hljs-comment"># Run with verbose output</span>
node .husky/validate-css-variables.js --verbose</code></pre><h3>Skip Validation (Not Recommended)</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Skip pre-commit hook for one commit</span>
git commit --no-verify -m <span class="hljs-string">&quot;Emergency fix&quot;</span></code></pre><h2>🤝 Contributing</h2>
<p>When adding new CSS variables:</p>
<ol>
<li>Use consistent naming conventions</li>
<li>Add to the appropriate theme files</li>
<li>Update the <code>criticalVariables</code> list if needed</li>
<li>Test with the validator before committing</li>
</ol>
<h2>📝 Best Practices</h2>
<ol>
<li><strong>Always run validation</strong> before committing CSS changes</li>
<li><strong>Fix errors immediately</strong> - they block commits</li>
<li><strong>Address warnings</strong> when possible - they indicate potential issues</li>
<li><strong>Use consistent naming</strong> - follow the established patterns</li>
<li><strong>Document new variables</strong> - add comments explaining their purpose</li>
</ol>
<h2>🔗 Integration</h2>
<h3>Package.json</h3>
<p>Add to your project&#39;s package.json:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;validate-css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node .husky/validate-css-variables.js&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;validate-css:strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node .husky/validate-css-variables.js --strict&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h3>GitHub Actions</h3>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Validate</span> <span class="hljs-string">CSS</span> <span class="hljs-string">Variables</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">node</span> <span class="hljs-string">.husky/validate-css-variables.js</span> <span class="hljs-string">--strict</span></code></pre><h2>📁 File Structure</h2>
<pre><code class="hljs language-plaintext">reynard/.husky/
├── validate-css-variables.js    # Main validation script
├── pre-commit                   # Git pre-commit hook (includes CSS validation)
├── commit-msg                   # Git commit-msg hook (commitlint)
└── README.md                    # This documentation file</code></pre><h2>🔄 Migration from scripts/</h2>
<p>The CSS validation tools were previously located in <code>scripts/</code> but have been consolidated here for better integration with Husky. The old <code>scripts/</code> directory setup scripts are no longer needed as Husky handles hook installation automatically.</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>