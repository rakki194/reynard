<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>External HTML Tooltip - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>External HTML Tooltip</h1>
      <div class="markdown-content"><h1>External HTML Tooltip</h1>
<p>This sample shows how to use the external tooltip functionality to generate an HTML tooltip.</p>
<pre><code class="hljs"><span class="hljs-comment">// &lt;block:external:2&gt;</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">getOrCreateTooltip</span> = (chart) =&gt; {
  let tooltipEl = chart.canvas.parentNode.<span class="hljs-title function_ invoke__">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>);

  <span class="hljs-keyword">if</span> (!tooltipEl) {
    tooltipEl = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);
    tooltipEl.style.background = <span class="hljs-string">&#x27;rgba(0, 0, 0, 0.7)&#x27;</span>;
    tooltipEl.style.borderRadius = <span class="hljs-string">&#x27;3px&#x27;</span>;
    tooltipEl.style.color = <span class="hljs-string">&#x27;white&#x27;</span>;
    tooltipEl.style.opacity = <span class="hljs-number">1</span>;
    tooltipEl.style.pointerEvents = <span class="hljs-string">&#x27;none&#x27;</span>;
    tooltipEl.style.position = <span class="hljs-string">&#x27;absolute&#x27;</span>;
    tooltipEl.style.transform = <span class="hljs-string">&#x27;translate(-50%, 0)&#x27;</span>;
    tooltipEl.style.transition = <span class="hljs-string">&#x27;all .1s ease&#x27;</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">table</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;table&#x27;</span>);
    table.style.margin = <span class="hljs-string">&#x27;0px&#x27;</span>;

    tooltipEl.<span class="hljs-title function_ invoke__">appendChild</span>(table);
    chart.canvas.parentNode.<span class="hljs-title function_ invoke__">appendChild</span>(tooltipEl);
  }

  <span class="hljs-keyword">return</span> tooltipEl;
};

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">externalTooltipHandler</span> = (context) =&gt; {
  <span class="hljs-comment">// Tooltip Element</span>
  <span class="hljs-keyword">const</span> {chart, tooltip} = context;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">tooltipEl</span> = <span class="hljs-title function_ invoke__">getOrCreateTooltip</span>(chart);

  <span class="hljs-comment">// Hide if no tooltip</span>
  <span class="hljs-keyword">if</span> (tooltip.opacity === <span class="hljs-number">0</span>) {
    tooltipEl.style.opacity = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// Set Text</span>
  <span class="hljs-keyword">if</span> (tooltip.body) {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">titleLines</span> = tooltip.title || [];
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">bodyLines</span> = tooltip.body.<span class="hljs-title function_ invoke__">map</span>(b =&gt; b.lines);

    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">tableHead</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;thead&#x27;</span>);

    titleLines.<span class="hljs-title function_ invoke__">forEach</span>(title =&gt; {
      <span class="hljs-keyword">const</span> tr = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;tr&#x27;</span>);
      tr.style.borderWidth = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">const</span> th = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;th&#x27;</span>);
      th.style.borderWidth = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">const</span> text = document.<span class="hljs-title function_ invoke__">createTextNode</span>(title);

      th.<span class="hljs-title function_ invoke__">appendChild</span>(text);
      tr.<span class="hljs-title function_ invoke__">appendChild</span>(th);
      tableHead.<span class="hljs-title function_ invoke__">appendChild</span>(tr);
    });

    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">tableBody</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;tbody&#x27;</span>);
    bodyLines.<span class="hljs-title function_ invoke__">forEach</span>((body, i) =&gt; {
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">colors</span> = tooltip.labelColors[i];

      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">span</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;span&#x27;</span>);
      span.style.background = colors.backgroundColor;
      span.style.borderColor = colors.borderColor;
      span.style.borderWidth = <span class="hljs-string">&#x27;2px&#x27;</span>;
      span.style.marginRight = <span class="hljs-string">&#x27;10px&#x27;</span>;
      span.style.height = <span class="hljs-string">&#x27;10px&#x27;</span>;
      span.style.width = <span class="hljs-string">&#x27;10px&#x27;</span>;
      span.style.display = <span class="hljs-string">&#x27;inline-block&#x27;</span>;

      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">tr</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;tr&#x27;</span>);
      tr.style.backgroundColor = <span class="hljs-string">&#x27;inherit&#x27;</span>;
      tr.style.borderWidth = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">td</span> = document.<span class="hljs-title function_ invoke__">createElement</span>(<span class="hljs-string">&#x27;td&#x27;</span>);
      td.style.borderWidth = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">text</span> = document.<span class="hljs-title function_ invoke__">createTextNode</span>(body);

      td.<span class="hljs-title function_ invoke__">appendChild</span>(span);
      td.<span class="hljs-title function_ invoke__">appendChild</span>(text);
      tr.<span class="hljs-title function_ invoke__">appendChild</span>(td);
      tableBody.<span class="hljs-title function_ invoke__">appendChild</span>(tr);
    });

    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">tableRoot</span> = tooltipEl.<span class="hljs-title function_ invoke__">querySelector</span>(<span class="hljs-string">&#x27;table&#x27;</span>);

    <span class="hljs-comment">// Remove old children</span>
    <span class="hljs-keyword">while</span> (tableRoot.firstChild) {
      tableRoot.firstChild.<span class="hljs-title function_ invoke__">remove</span>();
    }

    <span class="hljs-comment">// Add new children</span>
    tableRoot.<span class="hljs-title function_ invoke__">appendChild</span>(tableHead);
    tableRoot.<span class="hljs-title function_ invoke__">appendChild</span>(tableBody);
  }

  <span class="hljs-keyword">const</span> {offsetLeft: positionX, offsetTop: positionY} = chart.canvas;

  <span class="hljs-comment">// Display, position, and set styles for font</span>
  tooltipEl.style.opacity = <span class="hljs-number">1</span>;
  tooltipEl.style.left = positionX + tooltip.caretX + <span class="hljs-string">&#x27;px&#x27;</span>;
  tooltipEl.style.top = positionY + tooltip.caretY + <span class="hljs-string">&#x27;px&#x27;</span>;
  tooltipEl.style.font = tooltip.options.bodyFont.<span class="hljs-keyword">string</span>;
  tooltipEl.style.padding = tooltip.options.padding + <span class="hljs-string">&#x27;px &#x27;</span> + tooltip.options.padding + <span class="hljs-string">&#x27;px&#x27;</span>;
};
<span class="hljs-comment">// &lt;/block:external&gt;</span>

<span class="hljs-comment">// &lt;block:setup:1&gt;</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DATA_COUNT</span> = <span class="hljs-number">7</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NUMBER_CFG</span> = {count: DATA_COUNT, min: -<span class="hljs-number">100</span>, max: <span class="hljs-number">100</span>, decimals: <span class="hljs-number">0</span>};
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">data</span> = {
  labels: Utils.<span class="hljs-title function_ invoke__">months</span>({<span class="hljs-attr">count</span>: DATA_COUNT}),
  datasets: [
    {
      label: <span class="hljs-string">&#x27;Dataset 1&#x27;</span>,
      data: Utils.<span class="hljs-title function_ invoke__">numbers</span>(NUMBER_CFG),
      fill: <span class="hljs-literal">false</span>,
      borderColor: Utils.CHART_COLORS.red,
      backgroundColor: Utils.<span class="hljs-title function_ invoke__">transparentize</span>(Utils.CHART_COLORS.red, <span class="hljs-number">0.5</span>),
    },
    {
      label: <span class="hljs-string">&#x27;Dataset 2&#x27;</span>,
      data: Utils.<span class="hljs-title function_ invoke__">numbers</span>(NUMBER_CFG),
      fill: <span class="hljs-literal">false</span>,
      borderColor: Utils.CHART_COLORS.blue,
      backgroundColor: Utils.<span class="hljs-title function_ invoke__">transparentize</span>(Utils.CHART_COLORS.blue, <span class="hljs-number">0.5</span>),
    },
  ]
};
<span class="hljs-comment">// &lt;/block:setup&gt;</span>

<span class="hljs-comment">// &lt;block:config:0&gt;</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">config</span> = {
  type: <span class="hljs-string">&#x27;line&#x27;</span>,
  data: data,
  options: {
    interaction: {
      mode: <span class="hljs-string">&#x27;index&#x27;</span>,
      intersect: <span class="hljs-literal">false</span>,
    },
    plugins: {
      title: {
        display: <span class="hljs-literal">true</span>,
        text: <span class="hljs-string">&#x27;Chart.js Line Chart - External Tooltips&#x27;</span>
      },
      tooltip: {
        enabled: <span class="hljs-literal">false</span>,
        position: <span class="hljs-string">&#x27;nearest&#x27;</span>,
        external: externalTooltipHandler
      }
    }
  }
};
<span class="hljs-comment">// &lt;/block:config&gt;</span>

module.exports = {
  actions: [],
  config: config,
};</code></pre><h2>Docs</h2>
<ul>
<li><a href="../../general/data-structures.md">Data structures (<code>labels</code>)</a></li>
<li><a href="../../charts/line.md">Line</a></li>
<li><a href="../../configuration/tooltip.md">Tooltip</a><ul>
<li><a href="../../configuration/tooltip.md#external-custom-tooltips">External (Custom) Tooltips</a></li>
</ul>
</li>
</ul>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>