<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Summarization System Monitoring and Alerting - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Summarization System Monitoring and Alerting</h1>
      <div class="markdown-content"><h1>Summarization System Monitoring and Alerting</h1>
<p>This guide covers monitoring, alerting, and observability for the YipYap summarization system, including health checks, metrics collection, logging, and alerting configurations.</p>
<h2>Overview</h2>
<p>The summarization system provides comprehensive monitoring capabilities to ensure reliable operation, performance optimization, and early detection of issues. The monitoring system includes health checks, metrics collection, structured logging, and configurable alerting.</p>
<h2>Health Monitoring</h2>
<h3>Health Check Endpoints</h3>
<p>The summarization system provides several health check endpoints:</p>
<h4>1. Overall System Health</h4>
<pre><code class="hljs language-bash">GET /api/health</code></pre><p><strong>Response:</strong></p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:00Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;services&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;summarization_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;uptime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;ollama_service&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;uptime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;cache_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;uptime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3600</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;ollama&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.15</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;models_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;llama3.2:8b&quot;</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;cache&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.02</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;cache_hit_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h4>2. Summarization Service Health</h4>
<pre><code class="hljs language-bash">GET /api/summarize/health</code></pre><p><strong>Response:</strong></p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;service&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:00Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;components&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;summarization_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;available_summarizers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;ollama&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;article&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;code&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;document&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;total_requests&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1234</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;active_requests&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;cache_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;cache_size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1024</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;cache_hit_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;cache_miss_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.15</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;parallel_summarizer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;active_batches&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;queue_size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;max_concurrent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;performance&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;average_response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;p95_response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5.1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;p99_response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8.7</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;requests_per_minute&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;error_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.02</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;quality_metrics&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;average_quality_score&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;low_quality_summaries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;auto_regenerations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h4>3. Detailed Component Health</h4>
<pre><code class="hljs language-bash">GET /api/summarize/health/detailed</code></pre><p><strong>Response:</strong></p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:00Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;detailed_components&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;summarization_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;initialized&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;available_summarizers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;ollama&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;supported_content_types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;article&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;code&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;document&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;requests_processed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">567</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;average_processing_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.1</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;article&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;requests_processed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">234</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;average_processing_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.8</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;requests_processed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">123</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;average_processing_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.5</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;cache_manager&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;cache_stats&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;total_entries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1024</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;cache_size_mb&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45.2</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;hit_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;miss_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.15</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;eviction_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.05</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;storage&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;available_space_mb&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10240</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;used_space_mb&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45.2</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;cache_directory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/cache/yipyap/summarization&quot;</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;parallel_summarizer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;healthy&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;concurrency&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;max_concurrent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;current_active&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;queue_size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;semaphore_available&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;batch_processing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;active_batches&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;completed_batches&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;failed_batches&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;average_batch_size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8.5</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h3>Health Check Configuration</h3>
<p>Configure health check intervals and timeouts:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Health check configuration</span>
SUMMARIZATION_HEALTH_CHECK_INTERVAL=60
SUMMARIZATION_HEALTH_CHECK_TIMEOUT=10
SUMMARIZATION_HEALTH_CHECK_RETRIES=3
SUMMARIZATION_HEALTH_CHECK_START_PERIOD=60</code></pre><h2>Metrics Collection</h2>
<h3>Prometheus Metrics</h3>
<p>The summarization system exposes Prometheus-compatible metrics:</p>
<pre><code class="hljs language-bash">GET /metrics</code></pre><p><strong>Key Metrics:</strong></p>
<pre><code class="hljs"><span class="hljs-comment"># Summarization request metrics</span>
<span class="hljs-attribute">summarization_requests_total</span>{content_type=<span class="hljs-string">&quot;article&quot;</span>,status=<span class="hljs-string">&quot;success&quot;</span>} <span class="hljs-number">1234</span>
<span class="hljs-attribute">summarization_requests_total</span>{content_type=<span class="hljs-string">&quot;code&quot;</span>,status=<span class="hljs-string">&quot;success&quot;</span>} <span class="hljs-number">567</span>
<span class="hljs-attribute">summarization_requests_total</span>{content_type=<span class="hljs-string">&quot;document&quot;</span>,status=<span class="hljs-string">&quot;success&quot;</span>} <span class="hljs-number">890</span>
<span class="hljs-attribute">summarization_requests_total</span>{status=<span class="hljs-string">&quot;error&quot;</span>} <span class="hljs-number">45</span>

<span class="hljs-comment"># Response time metrics</span>
<span class="hljs-attribute">summarization_response_time_seconds</span>{quantile=<span class="hljs-string">&quot;0.5&quot;</span>} <span class="hljs-number">2</span>.<span class="hljs-number">1</span>
<span class="hljs-attribute">summarization_response_time_seconds</span>{quantile=<span class="hljs-string">&quot;0.9&quot;</span>} <span class="hljs-number">5</span>.<span class="hljs-number">1</span>
<span class="hljs-attribute">summarization_response_time_seconds</span>{quantile=<span class="hljs-string">&quot;0.99&quot;</span>} <span class="hljs-number">8</span>.<span class="hljs-number">7</span>
<span class="hljs-attribute">summarization_response_time_seconds_sum</span> <span class="hljs-number">5678</span>.<span class="hljs-number">9</span>
<span class="hljs-attribute">summarization_response_time_seconds_count</span> <span class="hljs-number">2345</span>

<span class="hljs-comment"># Cache metrics</span>
<span class="hljs-attribute">summarization_cache_hits_total</span> <span class="hljs-number">1890</span>
<span class="hljs-attribute">summarization_cache_misses_total</span> <span class="hljs-number">455</span>
<span class="hljs-attribute">summarization_cache_size_bytes</span> <span class="hljs-number">47332168</span>

<span class="hljs-comment"># Quality metrics</span>
<span class="hljs-attribute">summarization_quality_score</span>{quantile=<span class="hljs-string">&quot;0.5&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">85</span>
<span class="hljs-attribute">summarization_quality_score</span>{quantile=<span class="hljs-string">&quot;0.9&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">92</span>
<span class="hljs-attribute">summarization_quality_score</span>{quantile=<span class="hljs-string">&quot;0.99&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">95</span>
<span class="hljs-attribute">summarization_quality_score_sum</span> <span class="hljs-number">1987</span>.<span class="hljs-number">6</span>
<span class="hljs-attribute">summarization_quality_score_count</span> <span class="hljs-number">2345</span>

<span class="hljs-comment"># Batch processing metrics</span>
<span class="hljs-attribute">summarization_batch_requests_total</span> <span class="hljs-number">123</span>
<span class="hljs-attribute">summarization_batch_processing_time_seconds</span>{quantile=<span class="hljs-string">&quot;0.5&quot;</span>} <span class="hljs-number">15</span>.<span class="hljs-number">2</span>
<span class="hljs-attribute">summarization_batch_processing_time_seconds</span>{quantile=<span class="hljs-string">&quot;0.9&quot;</span>} <span class="hljs-number">25</span>.<span class="hljs-number">8</span>
<span class="hljs-attribute">summarization_batch_processing_time_seconds_sum</span> <span class="hljs-number">2345</span>.<span class="hljs-number">6</span>
<span class="hljs-attribute">summarization_batch_processing_time_seconds_count</span> <span class="hljs-number">123</span>

<span class="hljs-comment"># Error metrics</span>
<span class="hljs-attribute">summarization_errors_total</span>{error_type=<span class="hljs-string">&quot;model_unavailable&quot;</span>} <span class="hljs-number">5</span>
<span class="hljs-attribute">summarization_errors_total</span>{error_type=<span class="hljs-string">&quot;timeout&quot;</span>} <span class="hljs-number">12</span>
<span class="hljs-attribute">summarization_errors_total</span>{error_type=<span class="hljs-string">&quot;invalid_input&quot;</span>} <span class="hljs-number">8</span>
<span class="hljs-attribute">summarization_errors_total</span>{error_type=<span class="hljs-string">&quot;cache_error&quot;</span>} <span class="hljs-number">3</span>

<span class="hljs-comment"># Resource usage metrics</span>
<span class="hljs-attribute">summarization_memory_usage_bytes</span> <span class="hljs-number">134217728</span>
<span class="hljs-attribute">summarization_cpu_usage_percent</span> <span class="hljs-number">45</span>.<span class="hljs-number">2</span>
<span class="hljs-attribute">summarization_active_connections</span> <span class="hljs-number">8</span>
<span class="hljs-attribute">summarization_queue_size</span> <span class="hljs-number">5</span></code></pre><h3>Custom Metrics</h3>
<p>Additional custom metrics for detailed monitoring:</p>
<pre><code class="hljs"><span class="hljs-comment"># Content type distribution</span>
<span class="hljs-attribute">summarization_content_type_distribution</span>{content_type=<span class="hljs-string">&quot;article&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">45</span>
<span class="hljs-attribute">summarization_content_type_distribution</span>{content_type=<span class="hljs-string">&quot;code&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">25</span>
<span class="hljs-attribute">summarization_content_type_distribution</span>{content_type=<span class="hljs-string">&quot;document&quot;</span>} <span class="hljs-number">0</span>.<span class="hljs-number">30</span>

<span class="hljs-comment"># Model usage metrics</span>
<span class="hljs-attribute">summarization_model_usage_total</span>{model=<span class="hljs-string">&quot;qwen3:8b&quot;</span>} <span class="hljs-number">1890</span>
<span class="hljs-attribute">summarization_model_usage_total</span>{model=<span class="hljs-string">&quot;llama3.2:8b&quot;</span>} <span class="hljs-number">455</span>

<span class="hljs-comment"># Feature usage metrics</span>
<span class="hljs-attribute">summarization_feature_usage_total</span>{feature=<span class="hljs-string">&quot;streaming&quot;</span>} <span class="hljs-number">567</span>
<span class="hljs-attribute">summarization_feature_usage_total</span>{feature=<span class="hljs-string">&quot;batch_processing&quot;</span>} <span class="hljs-number">123</span>
<span class="hljs-attribute">summarization_feature_usage_total</span>{feature=<span class="hljs-string">&quot;personalization&quot;</span>} <span class="hljs-number">234</span>
<span class="hljs-attribute">summarization_feature_usage_total</span>{feature=<span class="hljs-string">&quot;cross_language&quot;</span>} <span class="hljs-number">89</span>

<span class="hljs-comment"># Performance metrics</span>
<span class="hljs-attribute">summarization_tokens_per_second</span> <span class="hljs-number">1250</span>.<span class="hljs-number">5</span>
<span class="hljs-attribute">summarization_tokens_per_request</span>{content_type=<span class="hljs-string">&quot;article&quot;</span>} <span class="hljs-number">450</span>.<span class="hljs-number">2</span>
<span class="hljs-attribute">summarization_tokens_per_request</span>{content_type=<span class="hljs-string">&quot;code&quot;</span>} <span class="hljs-number">320</span>.<span class="hljs-number">8</span>
<span class="hljs-attribute">summarization_tokens_per_request</span>{content_type=<span class="hljs-string">&quot;document&quot;</span>} <span class="hljs-number">580</span>.<span class="hljs-number">1</span></code></pre><h2>Logging</h2>
<h3>Structured Logging</h3>
<p>The summarization system uses structured logging for better observability:</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># Logging configuration</span>
SUMMARIZATION_LOG_LEVEL=INFO
SUMMARIZATION_STRUCTURED_LOGGING=true
SUMMARIZATION_LOG_FORMAT=json
SUMMARIZATION_LOG_FILE=/var/log/yipyap/summarization.log</code></pre><h3>Log Examples</h3>
<h4>Request Logging</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:00.123Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;INFO&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;logger&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Summarization request started&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;request_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;req_12345&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;user_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user_67890&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;content_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;article&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;summary_level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;detailed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;text_length&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;include_outline&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;include_highlights&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span></code></pre><h4>Processing Log</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:02.456Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;INFO&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;logger&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Summarization completed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;request_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;req_12345&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;processing_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.333</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;summary_length&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">450</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;quality_score&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.87</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;cache_hit&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tokens_used&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1250</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span>
<span class="hljs-punctuation">}</span></code></pre><h4>Error Logging</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:05.789Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ERROR&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;logger&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Summarization failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;request_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;req_12346&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;error_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;model_timeout&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;error_message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Model response timeout after 30 seconds&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;content_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;document&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;text_length&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qwen3:8b&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;retry_count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
<span class="hljs-punctuation">}</span></code></pre><h4>Performance Log</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-01-15T10:30:10.123Z&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;INFO&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;logger&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Performance metrics&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;metrics&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;average_response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2.3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;p95_response_time&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5.1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;requests_per_minute&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">45</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;cache_hit_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.85</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;error_rate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.02</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;active_requests&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;queue_size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h3>Log Rotation</h3>
<p>Configure log rotation for production environments:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Log rotation configuration</span>
/var/log/yipyap/summarization.log {
  daily
  rotate 30
  compress
  delaycompress
  missingok
  notifempty
  create 644 yipyap yipyap
  postrotate
    systemctl reload yipyap
  endscript
}</code></pre><h2>Alerting</h2>
<h3>Alert Rules</h3>
<p>Configure alerting rules for different scenarios:</p>
<h4>1. High Error Rate Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># prometheus/alert_rules.yml</span>
<span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">summarization_alerts</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighSummarizationErrorRate</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(summarization_requests_total{status=&quot;error&quot;}[5m])</span> <span class="hljs-string">/</span> <span class="hljs-string">rate(summarization_requests_total[5m])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.05</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;High summarization error rate&quot;</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Summarization error rate is <span class="hljs-template-variable">{{ $value | humanizePercentage }}</span> over the last 5 minutes&quot;</span></code></pre><h4>2. High Response Time Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighSummarizationResponseTime</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-string">histogram_quantile(0.95,</span> <span class="hljs-string">rate(summarization_response_time_seconds_bucket[5m]))</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;High summarization response time&quot;</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;95th percentile response time is <span class="hljs-template-variable">{{ $value }}</span>s over the last 5 minutes&quot;</span></code></pre><h4>3. Service Unavailable Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">SummarizationServiceDown</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-string">up{job=&quot;yipyap&quot;}</span> <span class="hljs-string">==</span> <span class="hljs-number">0</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">1m</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;Summarization service is down&quot;</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;The summarization service has been down for more than 1 minute&quot;</span></code></pre><h4>4. Low Cache Hit Rate Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">LowSummarizationCacheHitRate</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(summarization_cache_hits_total[5m])</span> <span class="hljs-string">/</span> <span class="hljs-string">(rate(summarization_cache_hits_total[5m])</span> <span class="hljs-string">+</span> <span class="hljs-string">rate(summarization_cache_misses_total[5m]))</span> <span class="hljs-string">&lt;</span> <span class="hljs-number">0.7</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;Low summarization cache hit rate&quot;</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Cache hit rate is <span class="hljs-template-variable">{{ $value | humanizePercentage }}</span> over the last 5 minutes&quot;</span></code></pre><h4>5. High Memory Usage Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighSummarizationMemoryUsage</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-string">summarization_memory_usage_bytes</span> <span class="hljs-string">/</span> <span class="hljs-number">1024</span> <span class="hljs-string">/</span> <span class="hljs-number">1024</span> <span class="hljs-string">/</span> <span class="hljs-number">1024</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">6</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;High summarization memory usage&quot;</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Memory usage is <span class="hljs-template-variable">{{ $value }}</span>GB&quot;</span></code></pre><h4>6. Queue Overflow Alert</h4>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">SummarizationQueueOverflow</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-string">summarization_queue_size</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">50</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;Summarization queue overflow&quot;</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;Queue size is <span class="hljs-template-variable">{{ $value }}</span> items&quot;</span></code></pre><h3>Alert Configuration</h3>
<p>Configure alerting channels and thresholds:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Alerting configuration</span>
SUMMARIZATION_ALERTING_ENABLED=<span class="hljs-literal">true</span>
SUMMARIZATION_ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SUMMARIZATION_ALERT_EMAIL=alerts@yourcompany.com
SUMMARIZATION_ALERT_PAGERDUTY_KEY=your-pagerduty-key

<span class="hljs-comment"># Alert thresholds</span>
SUMMARIZATION_ALERT_ERROR_RATE_THRESHOLD=0.05
SUMMARIZATION_ALERT_RESPONSE_TIME_THRESHOLD=10
SUMMARIZATION_ALERT_CACHE_HIT_RATE_THRESHOLD=0.7
SUMMARIZATION_ALERT_MEMORY_USAGE_THRESHOLD=6
SUMMARIZATION_ALERT_QUEUE_SIZE_THRESHOLD=50</code></pre><h2>Dashboard Configuration</h2>
<h3>Grafana Dashboard</h3>
<p>Create a Grafana dashboard for summarization monitoring:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;dashboard&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;YipYap Summarization Dashboard&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;panels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Request Rate&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;graph&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rate(summarization_requests_total[5m])&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;{{content_type}}&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Response Time&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;graph&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;histogram_quantile(0.95, rate(summarization_response_time_seconds_bucket[5m]))&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;P95&quot;</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;histogram_quantile(0.5, rate(summarization_response_time_seconds_bucket[5m]))&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;P50&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Error Rate&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;graph&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rate(summarization_requests_total{status=\&quot;error\&quot;}[5m]) / rate(summarization_requests_total[5m])&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Error Rate&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Cache Hit Rate&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;graph&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rate(summarization_cache_hits_total[5m]) / (rate(summarization_cache_hits_total[5m]) + rate(summarization_cache_misses_total[5m]))&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Cache Hit Rate&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Quality Score&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;graph&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;histogram_quantile(0.5, rate(summarization_quality_score_bucket[5m]))&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Average Quality&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Active Requests&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;stat&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;targets&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;expr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;summarization_active_connections&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;legendFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Active Requests&quot;</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h2>Performance Monitoring</h2>
<h3>Key Performance Indicators (KPIs)</h3>
<p>Monitor these KPIs for optimal performance:</p>
<ol>
<li><p><strong>Response Time</strong>:</p>
<ul>
<li>P50: &lt; 3 seconds</li>
<li>P95: &lt; 8 seconds</li>
<li>P99: &lt; 15 seconds</li>
</ul>
</li>
<li><p><strong>Throughput</strong>:</p>
<ul>
<li>Requests per minute: &gt; 100</li>
<li>Tokens per second: &gt; 1000</li>
</ul>
</li>
<li><p><strong>Quality</strong>:</p>
<ul>
<li>Average quality score: &gt; 0.8</li>
<li>Low quality summaries: &lt; 5%</li>
</ul>
</li>
<li><p><strong>Resource Usage</strong>:</p>
<ul>
<li>Memory usage: &lt; 6GB</li>
<li>CPU usage: &lt; 80%</li>
<li>Cache hit rate: &gt; 70%</li>
</ul>
</li>
<li><p><strong>Reliability</strong>:</p>
<ul>
<li>Error rate: &lt; 2%</li>
<li>Uptime: &gt; 99.9%</li>
</ul>
</li>
</ol>
<h3>Performance Tuning</h3>
<p>Based on monitoring data, adjust these settings:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Performance tuning based on metrics</span>
SUMMARIZATION_MAX_CONCURRENT=10
SUMMARIZATION_MAX_TOKENS_PER_BATCH=15000
SUMMARIZATION_MAX_BATCH_SIZE=15
SUMMARIZATION_CACHE_TTL_HOURS=48
SUMMARIZATION_RATE_LIMIT_PER_MINUTE=500</code></pre><h2>Troubleshooting</h2>
<h3>Common Monitoring Issues</h3>
<ol>
<li><p><strong>High Error Rate</strong>:</p>
<ul>
<li>Check Ollama service health</li>
<li>Verify model availability</li>
<li>Review error logs for specific issues</li>
</ul>
</li>
<li><p><strong>High Response Time</strong>:</p>
<ul>
<li>Increase concurrent processing</li>
<li>Optimize cache settings</li>
<li>Check system resources</li>
</ul>
</li>
<li><p><strong>Low Cache Hit Rate</strong>:</p>
<ul>
<li>Increase cache TTL</li>
<li>Review cache invalidation logic</li>
<li>Check cache storage capacity</li>
</ul>
</li>
<li><p><strong>Memory Issues</strong>:</p>
<ul>
<li>Reduce concurrent operations</li>
<li>Implement memory limits</li>
<li>Monitor for memory leaks</li>
</ul>
</li>
</ol>
<h3>Debug Mode</h3>
<p>Enable debug mode for detailed monitoring:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Debug configuration</span>
SUMMARIZATION_DEBUG_MODE=<span class="hljs-literal">true</span>
SUMMARIZATION_LOG_LEVEL=DEBUG
SUMMARIZATION_PROFILING_ENABLED=<span class="hljs-literal">true</span>
SUMMARIZATION_PROFILING_OUTPUT=/tmp/summarization_profile.json</code></pre><p>This monitoring and alerting guide provides comprehensive observability for the summarization system. Adjust the configurations based on your specific requirements and infrastructure constraints.</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>