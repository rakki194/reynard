<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reynard Basic Backend - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>Reynard Basic Backend</h1>
      <div class="markdown-content"><h1>Reynard Basic Backend</h1>
<p>A modular FastAPI backend example demonstrating uvicorn reload best practices and development patterns for the Reynard ecosystem.</p>
<h2>Features</h2>
<ul>
<li><strong>Optimized Uvicorn Reload</strong>: Smart reload detection and service management</li>
<li>üèóÔ∏è <strong>Modular Architecture</strong>: Clean separation of concerns with services and routes</li>
<li><strong>Configuration Management</strong>: Environment-based configuration with sensible defaults</li>
<li>üóÑÔ∏è <strong>Service Layer</strong>: Database, cache, and background service abstractions</li>
<li>üìä <strong>Health Monitoring</strong>: Comprehensive health checks and metrics</li>
<li>üîê <strong>Authentication</strong>: JWT-based authentication with session management</li>
<li>üë• <strong>User Management</strong>: Full CRUD operations for user management</li>
<li>üß™ <strong>Development Ready</strong>: Optimized for development workflows</li>
</ul>
<h2>Quick Start</h2>
<h3>Prerequisites</h3>
<ul>
<li>Python 3.8+</li>
<li>pip (Python package manager)</li>
</ul>
<h3>Installation</h3>
<ol>
<li><p><strong>Navigate to the backend directory</strong>:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> examples/basic-backend</code></pre></li>
<li><p><strong>Create a virtual environment</strong>:</p>
<pre><code class="hljs language-bash">python -m venv venv
<span class="hljs-built_in">source</span> venv/bin/activate  <span class="hljs-comment"># On Windows: venv\Scripts\activate</span></code></pre></li>
<li><p><strong>Install dependencies</strong>:</p>
<pre><code class="hljs language-bash">pip install -r requirements.txt</code></pre></li>
<li><p><strong>Run the development server</strong>:</p>
<pre><code class="hljs language-bash">python main.py</code></pre></li>
</ol>
<p>The API will be available at <code>http://localhost:8000</code></p>
<h2>API Documentation</h2>
<p>Once the server is running, you can access:</p>
<ul>
<li><strong>Swagger UI</strong>: <a href="http://localhost:8000/docs">http://localhost:8000/docs</a></li>
<li><strong>ReDoc</strong>: <a href="http://localhost:8000/redoc">http://localhost:8000/redoc</a></li>
<li><strong>OpenAPI JSON</strong>: <a href="http://localhost:8000/openapi.json">http://localhost:8000/openapi.json</a></li>
</ul>
<h2>Project Structure</h2>
<pre><code class="hljs language-text">basic-backend/
‚îú‚îÄ‚îÄ main.py                 # FastAPI application entry point
‚îú‚îÄ‚îÄ config.py              # Configuration management
‚îú‚îÄ‚îÄ requirements.txt       # Python dependencies
‚îú‚îÄ‚îÄ README.md             # This file
‚îú‚îÄ‚îÄ services/             # Service layer
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py       # Database service
‚îÇ   ‚îú‚îÄ‚îÄ cache.py          # Cache service
‚îÇ   ‚îî‚îÄ‚îÄ background.py     # Background service
‚îî‚îÄ‚îÄ routes/               # API routes
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ health.py         # Health check endpoints
    ‚îú‚îÄ‚îÄ auth.py           # Authentication endpoints
    ‚îî‚îÄ‚îÄ users.py          # User management endpoints</code></pre><h2>Configuration</h2>
<p>The backend uses environment-based configuration. You can customize behavior using environment variables:</p>
<h3>Uvicorn Configuration</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>UVICORN_HOST</code></td>
<td><code>0.0.0.0</code></td>
<td>Host to bind to</td>
</tr>
<tr>
<td><code>UVICORN_PORT</code></td>
<td><code>8000</code></td>
<td>Port to bind to</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD</code></td>
<td><code>true</code></td>
<td>Enable auto-reload</td>
</tr>
<tr>
<td><code>UVICORN_LOG_LEVEL</code></td>
<td><code>info</code></td>
<td>Logging level</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD_DIRS</code></td>
<td><code>.</code></td>
<td>Comma-separated directories to watch</td>
</tr>
<tr>
<td><code>UVICORN_RELOAD_DELAY</code></td>
<td><code>0.25</code></td>
<td>Delay between file checks</td>
</tr>
</tbody></table>
<h3>Application Configuration</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>ENVIRONMENT</code></td>
<td><code>development</code></td>
<td>Environment (development/production)</td>
</tr>
<tr>
<td><code>DEBUG</code></td>
<td><code>true</code></td>
<td>Enable debug mode</td>
</tr>
<tr>
<td><code>SECRET_KEY</code></td>
<td><code>your-secret-key-change-in-production</code></td>
<td>Secret key for JWT</td>
</tr>
<tr>
<td><code>CORS_ORIGINS</code></td>
<td><code>http://localhost:3000,http://localhost:5173</code></td>
<td>CORS origins</td>
</tr>
</tbody></table>
<h3>Database Configuration</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>DATABASE_URL</code></td>
<td><code>sqlite:///./reynard.db</code></td>
<td>Database connection URL</td>
</tr>
<tr>
<td><code>DATABASE_ECHO</code></td>
<td><code>false</code></td>
<td>Enable SQL logging</td>
</tr>
<tr>
<td><code>DATABASE_POOL_SIZE</code></td>
<td><code>5</code></td>
<td>Connection pool size</td>
</tr>
<tr>
<td><code>DATABASE_MAX_OVERFLOW</code></td>
<td><code>10</code></td>
<td>Max overflow connections</td>
</tr>
</tbody></table>
<h3>Cache Configuration</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>CACHE_URL</code></td>
<td><code>redis://localhost:6379/0</code></td>
<td>Cache connection URL</td>
</tr>
<tr>
<td><code>CACHE_TTL</code></td>
<td><code>3600</code></td>
<td>Default TTL in seconds</td>
</tr>
<tr>
<td><code>CACHE_MAX_CONNECTIONS</code></td>
<td><code>10</code></td>
<td>Max cache connections</td>
</tr>
</tbody></table>
<h2>API Endpoints</h2>
<h3>Health &amp; System</h3>
<ul>
<li><code>GET /</code> - Root endpoint with system information</li>
<li><code>GET /api/system</code> - Detailed system status</li>
<li><code>GET /api/health</code> - Comprehensive health check</li>
<li><code>GET /api/health/simple</code> - Simple health check</li>
<li><code>GET /api/health/ready</code> - Readiness check (Kubernetes)</li>
<li><code>GET /api/health/live</code> - Liveness check (Kubernetes)</li>
<li><code>GET /api/health/services</code> - Detailed service status</li>
<li><code>GET /api/health/metrics</code> - System metrics</li>
</ul>
<h3>Authentication</h3>
<ul>
<li><code>POST /api/auth/login</code> - User login</li>
<li><code>POST /api/auth/register</code> - User registration</li>
<li><code>POST /api/auth/logout</code> - User logout</li>
<li><code>GET /api/auth/me</code> - Get current user</li>
<li><code>POST /api/auth/refresh</code> - Refresh access token</li>
<li><code>GET /api/auth/users</code> - List all users</li>
</ul>
<h3>User Management</h3>
<ul>
<li><code>GET /api/users/</code> - List users with pagination</li>
<li><code>GET /api/users/{user_id}</code> - Get user by ID</li>
<li><code>POST /api/users/</code> - Create new user</li>
<li><code>PUT /api/users/{user_id}</code> - Update user</li>
<li><code>DELETE /api/users/{user_id}</code> - Delete user</li>
<li><code>GET /api/users/stats/overview</code> - User statistics</li>
<li><code>GET /api/users/search/{query}</code> - Search users</li>
</ul>
<h2>Uvicorn Reload Features</h2>
<p>This backend demonstrates several uvicorn reload optimization patterns:</p>
<h3>1. Reload Mode Detection</h3>
<pre><code class="hljs language-python">IS_RELOAD_MODE = os.environ.get(<span class="hljs-string">&quot;UVICORN_RELOAD_PROCESS&quot;</span>) == <span class="hljs-string">&quot;1&quot;</span></code></pre><h3>2. Optimized Service Initialization</h3>
<p>Services skip heavy initialization during reload to speed up the process:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">if</span> IS_RELOAD_MODE:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;[INFO] Skipping heavy initialization during reload&quot;</span>)
    <span class="hljs-keyword">yield</span>
    <span class="hljs-keyword">return</span></code></pre><h3>3. Smart Background Task Management</h3>
<p>Background services are disabled during reload to prevent hanging:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">if</span> IS_RELOAD_MODE:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;[INFO] Skipping background service during reload&quot;</span>)
    <span class="hljs-keyword">return</span></code></pre><h3>4. Configuration-Based Reload</h3>
<p>The reload behavior is configurable via environment variables:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Custom reload configuration</span>
<span class="hljs-built_in">export</span> UVICORN_RELOAD_DIRS=<span class="hljs-string">&quot;services,routes&quot;</span>
<span class="hljs-built_in">export</span> UVICORN_RELOAD_DELAY=<span class="hljs-string">&quot;0.5&quot;</span>
<span class="hljs-built_in">export</span> UVICORN_LOG_LEVEL=<span class="hljs-string">&quot;debug&quot;</span></code></pre><h2>Development Workflow</h2>
<h3>1. Start Development Server</h3>
<pre><code class="hljs language-bash">python main.py</code></pre><h3>2. Make Changes</h3>
<p>Edit any Python file in the project. Uvicorn will automatically detect changes and reload the server.</p>
<h3>3. Monitor Reload</h3>
<p>Watch the console output for reload messages:</p>
<pre><code class="hljs language-text">[INFO] Running in uvicorn reload mode - skipping heavy initialization
[INFO] Skipping database initialization during reload
[INFO] Skipping cache initialization during reload
[INFO] Skipping background service during reload</code></pre><h3>4. Test Endpoints</h3>
<p>Use the interactive API documentation at <a href="http://localhost:8000/docs">http://localhost:8000/docs</a> to test endpoints.</p>
<h2>Production Deployment</h2>
<p>For production deployment, disable reload and configure properly:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">export</span> UVICORN_RELOAD=<span class="hljs-string">&quot;false&quot;</span>
<span class="hljs-built_in">export</span> ENVIRONMENT=<span class="hljs-string">&quot;production&quot;</span>
<span class="hljs-built_in">export</span> DEBUG=<span class="hljs-string">&quot;false&quot;</span>
<span class="hljs-built_in">export</span> SECRET_KEY=<span class="hljs-string">&quot;your-secure-secret-key&quot;</span></code></pre><h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<ol>
<li><strong>Reload Not Working</strong>: Ensure you have <code>uvicorn[standard]</code> installed</li>
<li><strong>Slow Reloads</strong>: Check <code>UVICORN_RELOAD_DELAY</code> and <code>UVICORN_RELOAD_DIRS</code></li>
<li><strong>Hanging Processes</strong>: Use <code>pkill -f uvicorn</code> to kill hanging processes</li>
<li><strong>Import Errors</strong>: Ensure all dependencies are installed in the virtual environment</li>
</ol>
<h3>Debug Mode</h3>
<p>Enable debug logging for more verbose output:</p>
<pre><code class="hljs language-bash"><span class="hljs-built_in">export</span> UVICORN_LOG_LEVEL=<span class="hljs-string">&quot;debug&quot;</span>
<span class="hljs-built_in">export</span> DEBUG=<span class="hljs-string">&quot;true&quot;</span></code></pre><h2>Contributing</h2>
<p>This is an example backend for the Reynard ecosystem. Feel free to use it as a starting point for your own projects or contribute improvements.</p>
<h2>License</h2>
<p>Part of the Reynard framework ecosystem.</p>
</div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ‚ù§Ô∏è using SolidJS.</p></footer>
</body>
</html>