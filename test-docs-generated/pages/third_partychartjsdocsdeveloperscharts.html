<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New Charts - Reynard Documentation Test</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../highlight.css">
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <nav class="docs-nav">
    <div class="nav-brand"><a href="../index.html">Reynard Documentation Test</a></div>
    <div class="nav-links"><a href="../index.html">Home</a><a href="../api.html">API Reference</a></div>
  </nav>
  <main class="docs-main">
    <div class="docs-content">
      <h1>New Charts</h1>
      <div class="markdown-content"><h1>New Charts</h1>
<p>Chart.js 2.0 introduced the concept of controllers for each dataset. Like scales, new controllers can be written as needed.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Chart.DatasetController</span> {

}

<span class="hljs-title class_">Chart</span>.<span class="hljs-title function_">register</span>(<span class="hljs-title class_">MyType</span>);

<span class="hljs-comment">// Now we can create a new instance of our chart, using the Chart.js API</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-comment">// this is the string the constructor was registered at, ie Chart.controllers.MyType</span>
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;MyType&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: options
});</code></pre><h2>Dataset Controller Interface</h2>
<p>Dataset controllers must implement the following interface.</p>
<pre><code class="hljs language-javascript">{
    <span class="hljs-comment">// Defaults for charts of this type</span>
    <span class="hljs-attr">defaults</span>: {
        <span class="hljs-comment">// If set to `false` or `null`, no dataset level element is created.</span>
        <span class="hljs-comment">// If set to a string, this is the type of element to create for the dataset.</span>
        <span class="hljs-comment">// For example, a line create needs to create a line element so this is the string &#x27;line&#x27;</span>
        <span class="hljs-attr">datasetElementType</span>: string | <span class="hljs-literal">null</span> | <span class="hljs-literal">false</span>,

        <span class="hljs-comment">// If set to `false` or `null`, no elements are created for each data value.</span>
        <span class="hljs-comment">// If set to a string, this is the type of element to create for each data value.</span>
        <span class="hljs-comment">// For example, a line create needs to create a point element so this is the string &#x27;point&#x27;</span>
        <span class="hljs-attr">dataElementType</span>: string | <span class="hljs-literal">null</span> | <span class="hljs-literal">false</span>,
    }

    <span class="hljs-comment">// ID of the controller</span>
    <span class="hljs-attr">id</span>: string;

    <span class="hljs-comment">// Update the elements in response to new data</span>
    <span class="hljs-comment">// @param mode : update mode, core calls this method using any of `&#x27;active&#x27;`, `&#x27;hide&#x27;`, `&#x27;reset&#x27;`, `&#x27;resize&#x27;`, `&#x27;show&#x27;` or `undefined`</span>
    <span class="hljs-attr">update</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">mode</span>) {}
}</code></pre><p>The following methods may optionally be overridden by derived dataset controllers.</p>
<pre><code class="hljs language-javascript">{
    <span class="hljs-comment">// Draw the representation of the dataset. The base implementation works in most cases, and an example of a derived version</span>
    <span class="hljs-comment">// can be found in the line controller</span>
    <span class="hljs-attr">draw</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {},

    <span class="hljs-comment">// Initializes the controller</span>
    <span class="hljs-attr">initialize</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {},

    <span class="hljs-comment">// Ensures that the dataset represented by this controller is linked to a scale. Overridden to helpers.noop in the polar area and doughnut controllers as these</span>
    <span class="hljs-comment">// chart types using a single scale</span>
    <span class="hljs-attr">linkScales</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {},

    <span class="hljs-comment">// Parse the data into the controller meta data. The default implementation will work for cartesian parsing, but an example of an overridden</span>
    <span class="hljs-comment">// version can be found in the doughnut controller</span>
    <span class="hljs-attr">parse</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">start, count</span>) {},
}</code></pre><h2>Extending Existing Chart Types</h2>
<p>Extending or replacing an existing controller type is easy. Simply replace the constructor for one of the built-in types with your own.</p>
<p>The built-in controller types are:</p>
<ul>
<li><code>BarController</code></li>
<li><code>BubbleController</code></li>
<li><code>DoughnutController</code></li>
<li><code>LineController</code></li>
<li><code>PieController</code></li>
<li><code>PolarAreaController</code></li>
<li><code>RadarController</code></li>
<li><code>ScatterController</code></li>
</ul>
<p>These controllers are also available in the UMD package, directly under <code>Chart</code>. Eg: <code>Chart.BarController</code>.</p>
<p>For example, to derive a new chart type that extends from a bubble chart, you would do the following.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">BubbleController</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;chart.js&#x27;</span>;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Custom</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BubbleController</span> {
    <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Call bubble controller method to draw all the points</span>
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">draw</span>(<span class="hljs-variable language_">arguments</span>);

        <span class="hljs-comment">// Now we can do some custom drawing for this dataset. Here we&#x27;ll draw a red box around the first point in each dataset</span>
        <span class="hljs-keyword">const</span> meta = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getMeta</span>();
        <span class="hljs-keyword">const</span> pt0 = meta.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>];

        <span class="hljs-keyword">const</span> {x, y} = pt0.<span class="hljs-title function_">getProps</span>([<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>]);
        <span class="hljs-keyword">const</span> {radius} = pt0.<span class="hljs-property">options</span>;

        <span class="hljs-keyword">const</span> ctx = <span class="hljs-variable language_">this</span>.<span class="hljs-property">chart</span>.<span class="hljs-property">ctx</span>;
        ctx.<span class="hljs-title function_">save</span>();
        ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">&#x27;red&#x27;</span>;
        ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">1</span>;
        ctx.<span class="hljs-title function_">strokeRect</span>(x - radius, y - radius, <span class="hljs-number">2</span> * radius, <span class="hljs-number">2</span> * radius);
        ctx.<span class="hljs-title function_">restore</span>();
    }
};
<span class="hljs-title class_">Custom</span>.<span class="hljs-property">id</span> = <span class="hljs-string">&#x27;derivedBubble&#x27;</span>;
<span class="hljs-title class_">Custom</span>.<span class="hljs-property">defaults</span> = <span class="hljs-title class_">BubbleController</span>.<span class="hljs-property">defaults</span>;

<span class="hljs-comment">// Stores the controller so that the chart initialization routine can look it up</span>
<span class="hljs-title class_">Chart</span>.<span class="hljs-title function_">register</span>(<span class="hljs-title class_">Custom</span>);

<span class="hljs-comment">// Now we can create and use our new chart type</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Chart</span>(ctx, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;derivedBubble&#x27;</span>,
    <span class="hljs-attr">data</span>: data,
    <span class="hljs-attr">options</span>: options
});</code></pre><h2>TypeScript Typings</h2>
<p>If you want your new chart type to be statically typed, you must provide a <code>.d.ts</code> TypeScript declaration file. Chart.js provides a way to augment built-in types with user-defined ones, by using the concept of &quot;declaration merging&quot;.</p>
<p>When adding a new chart type, <code>ChartTypeRegistry</code> must contain the declarations for the new type, either by extending an existing entry in <code>ChartTypeRegistry</code> or by creating a new one.</p>
<p>For example, to provide typings for a new chart type that extends from a bubble chart, you would add a <code>.d.ts</code> containing:</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChartTypeRegistry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;chart.js&#x27;</span>;

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;chart.js&#x27;</span> {
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChartTypeRegistry</span> {
        <span class="hljs-attr">derivedBubble</span>: <span class="hljs-title class_">ChartTypeRegistry</span>[<span class="hljs-string">&#x27;bubble&#x27;</span>]
    }
}</code></pre></div>
    </div>
  </main>
  <footer class="docs-footer"><p>&copy; 2024 Reynard Documentation Test. Built with ❤️ using SolidJS.</p></footer>
</body>
</html>